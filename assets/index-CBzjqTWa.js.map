{"version":3,"file":"index-CBzjqTWa.js","sources":["../../node_modules/react-dom/client.js","../../node_modules/clsx/dist/clsx.mjs","../../src/components/ui/Card.tsx","../../src/components/ui/Button.tsx","../../node_modules/zustand/esm/middleware.mjs","../../src/store/settingsStore.ts","../../src/components/ui/ThemeToggle.tsx","../../src/components/ui/SoundToggle.tsx","../../src/components/tutorial/Tutorial.tsx","../../src/utils/constants.ts","../../src/utils/security.ts","../../src/store/portfolioStore.ts","../../src/store/marketStore.ts","../../src/utils/formatters.ts","../../src/api/config.ts","../../src/api/websocket.ts","../../src/hooks/useWebSocket.ts","../../src/components/layout/Header.tsx","../../src/components/layout/MarketTicker.tsx","../../src/components/layout/Footer.tsx","../../src/store/watchlistStore.ts","../../src/components/charts/Sparkline.tsx","../../src/components/trading/AssetCard.tsx","../../src/store/uiStore.ts","../../src/components/trading/MarketOverview.tsx","../../src/components/ui/Input.tsx","../../src/hooks/useAnnouncer.ts","../../src/utils/validators.ts","../../src/components/trading/TradingPanel.tsx","../../src/components/trading/MarketStatus.tsx","../../src/store/stopLossStore.ts","../../src/components/ui/Tooltip.tsx","../../src/components/trading/StopLossPanel.tsx","../../src/api/types.ts","../../src/api/finnhub.ts","../../src/hooks/useCandlestick.ts","../../src/components/charts/PriceChart.tsx","../../src/components/charts/VolumeChart.tsx","../../src/components/charts/ChartControls.tsx","../../src/components/charts/OrderBook.tsx","../../src/components/charts/MarketNews.tsx","../../src/components/charts/ChartSection.tsx","../../src/components/portfolio/PortfolioSection.tsx","../../src/utils/exportCsv.ts","../../src/components/history/TradeHistory.tsx","../../src/components/analytics/AnalyticsDashboard.tsx","../../src/components/watchlist/Watchlist.tsx","../../src/store/alertsStore.ts","../../src/components/alerts/PriceAlerts.tsx","../../src/components/ui/Toast.tsx","../../src/components/ui/ScreenReaderAnnouncer.tsx","../../src/utils/sounds.ts","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}export function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","import { clsx } from 'clsx';\nimport type { ReactNode, HTMLAttributes } from 'react';\n\ninterface CardProps extends HTMLAttributes<HTMLDivElement> {\n  children: ReactNode;\n  className?: string;\n}\n\nexport function Card({ children, className, ...props }: CardProps) {\n  return (\n    <div\n      className={clsx('card', className)}\n      {...props}\n    >\n      {children}\n    </div>\n  );\n}\n","import { clsx } from 'clsx';\nimport type { ButtonHTMLAttributes, ReactNode } from 'react';\n\ninterface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {\n  children: ReactNode;\n  variant?: 'primary' | 'secondary' | 'success' | 'danger' | 'ghost';\n  size?: 'sm' | 'md' | 'lg';\n}\n\nconst variants = {\n  primary: 'bg-emerald-600 hover:bg-emerald-700 text-white',\n  secondary: 'bg-gray-700 hover:bg-gray-600 text-white',\n  success: 'bg-emerald-600 hover:bg-emerald-700 text-white',\n  danger: 'bg-red-600 hover:bg-red-700 text-white',\n  ghost: 'bg-transparent hover:bg-gray-700/50 text-gray-300 hover:text-white',\n};\n\nconst sizes = {\n  sm: 'px-3 py-1.5 text-sm',\n  md: 'px-4 py-2 text-sm',\n  lg: 'px-6 py-3 text-base font-semibold',\n};\n\nexport function Button({\n  children,\n  variant = 'primary',\n  size = 'md',\n  className,\n  disabled,\n  ...props\n}: ButtonProps) {\n  return (\n    <button\n      className={clsx(\n        'rounded-lg transition-colors focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800',\n        variants[variant],\n        sizes[size],\n        disabled && 'opacity-50 cursor-not-allowed',\n        variant === 'success' && 'focus:ring-emerald-400',\n        variant === 'danger' && 'focus:ring-red-400',\n        variant === 'primary' && 'focus:ring-emerald-400',\n        variant === 'secondary' && 'focus:ring-gray-400',\n        variant === 'ghost' && 'focus:ring-gray-400',\n        className\n      )}\n      disabled={disabled}\n      {...props}\n    >\n      {children}\n    </button>\n  );\n}\n","const reduxImpl = (reducer, initial) => (set, _get, api) => {\n  api.dispatch = (action) => {\n    set((state) => reducer(state, action), false, action);\n    return action;\n  };\n  api.dispatchFromDevtools = true;\n  return { dispatch: (...args) => api.dispatch(...args), ...initial };\n};\nconst redux = reduxImpl;\n\nconst trackedConnections = /* @__PURE__ */ new Map();\nconst getTrackedConnectionState = (name) => {\n  const api = trackedConnections.get(name);\n  if (!api) return {};\n  return Object.fromEntries(\n    Object.entries(api.stores).map(([key, api2]) => [key, api2.getState()])\n  );\n};\nconst extractConnectionInformation = (store, extensionConnector, options) => {\n  if (store === void 0) {\n    return {\n      type: \"untracked\",\n      connection: extensionConnector.connect(options)\n    };\n  }\n  const existingConnection = trackedConnections.get(options.name);\n  if (existingConnection) {\n    return { type: \"tracked\", store, ...existingConnection };\n  }\n  const newConnection = {\n    connection: extensionConnector.connect(options),\n    stores: {}\n  };\n  trackedConnections.set(options.name, newConnection);\n  return { type: \"tracked\", store, ...newConnection };\n};\nconst removeStoreFromTrackedConnections = (name, store) => {\n  if (store === void 0) return;\n  const connectionInfo = trackedConnections.get(name);\n  if (!connectionInfo) return;\n  delete connectionInfo.stores[store];\n  if (Object.keys(connectionInfo.stores).length === 0) {\n    trackedConnections.delete(name);\n  }\n};\nconst findCallerName = (stack) => {\n  var _a, _b;\n  if (!stack) return void 0;\n  const traceLines = stack.split(\"\\n\");\n  const apiSetStateLineIndex = traceLines.findIndex(\n    (traceLine) => traceLine.includes(\"api.setState\")\n  );\n  if (apiSetStateLineIndex < 0) return void 0;\n  const callerLine = ((_a = traceLines[apiSetStateLineIndex + 1]) == null ? void 0 : _a.trim()) || \"\";\n  return (_b = /.+ (.+) .+/.exec(callerLine)) == null ? void 0 : _b[1];\n};\nconst devtoolsImpl = (fn, devtoolsOptions = {}) => (set, get, api) => {\n  const { enabled, anonymousActionType, store, ...options } = devtoolsOptions;\n  let extensionConnector;\n  try {\n    extensionConnector = (enabled != null ? enabled : (import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") && window.__REDUX_DEVTOOLS_EXTENSION__;\n  } catch (e) {\n  }\n  if (!extensionConnector) {\n    return fn(set, get, api);\n  }\n  const { connection, ...connectionInformation } = extractConnectionInformation(store, extensionConnector, options);\n  let isRecording = true;\n  api.setState = ((state, replace, nameOrAction) => {\n    const r = set(state, replace);\n    if (!isRecording) return r;\n    const action = nameOrAction === void 0 ? {\n      type: anonymousActionType || findCallerName(new Error().stack) || \"anonymous\"\n    } : typeof nameOrAction === \"string\" ? { type: nameOrAction } : nameOrAction;\n    if (store === void 0) {\n      connection == null ? void 0 : connection.send(action, get());\n      return r;\n    }\n    connection == null ? void 0 : connection.send(\n      {\n        ...action,\n        type: `${store}/${action.type}`\n      },\n      {\n        ...getTrackedConnectionState(options.name),\n        [store]: api.getState()\n      }\n    );\n    return r;\n  });\n  api.devtools = {\n    cleanup: () => {\n      if (connection && typeof connection.unsubscribe === \"function\") {\n        connection.unsubscribe();\n      }\n      removeStoreFromTrackedConnections(options.name, store);\n    }\n  };\n  const setStateFromDevtools = (...a) => {\n    const originalIsRecording = isRecording;\n    isRecording = false;\n    set(...a);\n    isRecording = originalIsRecording;\n  };\n  const initialState = fn(api.setState, get, api);\n  if (connectionInformation.type === \"untracked\") {\n    connection == null ? void 0 : connection.init(initialState);\n  } else {\n    connectionInformation.stores[connectionInformation.store] = api;\n    connection == null ? void 0 : connection.init(\n      Object.fromEntries(\n        Object.entries(connectionInformation.stores).map(([key, store2]) => [\n          key,\n          key === connectionInformation.store ? initialState : store2.getState()\n        ])\n      )\n    );\n  }\n  if (api.dispatchFromDevtools && typeof api.dispatch === \"function\") {\n    let didWarnAboutReservedActionType = false;\n    const originalDispatch = api.dispatch;\n    api.dispatch = (...args) => {\n      if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && args[0].type === \"__setState\" && !didWarnAboutReservedActionType) {\n        console.warn(\n          '[zustand devtools middleware] \"__setState\" action type is reserved to set state from the devtools. Avoid using it.'\n        );\n        didWarnAboutReservedActionType = true;\n      }\n      originalDispatch(...args);\n    };\n  }\n  connection.subscribe((message) => {\n    var _a;\n    switch (message.type) {\n      case \"ACTION\":\n        if (typeof message.payload !== \"string\") {\n          console.error(\n            \"[zustand devtools middleware] Unsupported action format\"\n          );\n          return;\n        }\n        return parseJsonThen(\n          message.payload,\n          (action) => {\n            if (action.type === \"__setState\") {\n              if (store === void 0) {\n                setStateFromDevtools(action.state);\n                return;\n              }\n              if (Object.keys(action.state).length !== 1) {\n                console.error(\n                  `\n                    [zustand devtools middleware] Unsupported __setState action format.\n                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),\n                    and value of this only key should be a state object. Example: { \"type\": \"__setState\", \"state\": { \"abc123Store\": { \"foo\": \"bar\" } } }\n                    `\n                );\n              }\n              const stateFromDevtools = action.state[store];\n              if (stateFromDevtools === void 0 || stateFromDevtools === null) {\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(stateFromDevtools)) {\n                setStateFromDevtools(stateFromDevtools);\n              }\n              return;\n            }\n            if (!api.dispatchFromDevtools) return;\n            if (typeof api.dispatch !== \"function\") return;\n            api.dispatch(action);\n          }\n        );\n      case \"DISPATCH\":\n        switch (message.payload.type) {\n          case \"RESET\":\n            setStateFromDevtools(initialState);\n            if (store === void 0) {\n              return connection == null ? void 0 : connection.init(api.getState());\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"COMMIT\":\n            if (store === void 0) {\n              connection == null ? void 0 : connection.init(api.getState());\n              return;\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"ROLLBACK\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                connection == null ? void 0 : connection.init(api.getState());\n                return;\n              }\n              setStateFromDevtools(state[store]);\n              connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n            });\n          case \"JUMP_TO_STATE\":\n          case \"JUMP_TO_ACTION\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(state[store])) {\n                setStateFromDevtools(state[store]);\n              }\n            });\n          case \"IMPORT_STATE\": {\n            const { nextLiftedState } = message.payload;\n            const lastComputedState = (_a = nextLiftedState.computedStates.slice(-1)[0]) == null ? void 0 : _a.state;\n            if (!lastComputedState) return;\n            if (store === void 0) {\n              setStateFromDevtools(lastComputedState);\n            } else {\n              setStateFromDevtools(lastComputedState[store]);\n            }\n            connection == null ? void 0 : connection.send(\n              null,\n              // FIXME no-any\n              nextLiftedState\n            );\n            return;\n          }\n          case \"PAUSE_RECORDING\":\n            return isRecording = !isRecording;\n        }\n        return;\n    }\n  });\n  return initialState;\n};\nconst devtools = devtoolsImpl;\nconst parseJsonThen = (stringified, fn) => {\n  let parsed;\n  try {\n    parsed = JSON.parse(stringified);\n  } catch (e) {\n    console.error(\n      \"[zustand devtools middleware] Could not parse the received json\",\n      e\n    );\n  }\n  if (parsed !== void 0) fn(parsed);\n};\n\nconst subscribeWithSelectorImpl = (fn) => (set, get, api) => {\n  const origSubscribe = api.subscribe;\n  api.subscribe = ((selector, optListener, options) => {\n    let listener = selector;\n    if (optListener) {\n      const equalityFn = (options == null ? void 0 : options.equalityFn) || Object.is;\n      let currentSlice = selector(api.getState());\n      listener = (state) => {\n        const nextSlice = selector(state);\n        if (!equalityFn(currentSlice, nextSlice)) {\n          const previousSlice = currentSlice;\n          optListener(currentSlice = nextSlice, previousSlice);\n        }\n      };\n      if (options == null ? void 0 : options.fireImmediately) {\n        optListener(currentSlice, currentSlice);\n      }\n    }\n    return origSubscribe(listener);\n  });\n  const initialState = fn(set, get, api);\n  return initialState;\n};\nconst subscribeWithSelector = subscribeWithSelectorImpl;\n\nfunction combine(initialState, create) {\n  return (...args) => Object.assign({}, initialState, create(...args));\n}\n\nfunction createJSONStorage(getStorage, options) {\n  let storage;\n  try {\n    storage = getStorage();\n  } catch (e) {\n    return;\n  }\n  const persistStorage = {\n    getItem: (name) => {\n      var _a;\n      const parse = (str2) => {\n        if (str2 === null) {\n          return null;\n        }\n        return JSON.parse(str2, options == null ? void 0 : options.reviver);\n      };\n      const str = (_a = storage.getItem(name)) != null ? _a : null;\n      if (str instanceof Promise) {\n        return str.then(parse);\n      }\n      return parse(str);\n    },\n    setItem: (name, newValue) => storage.setItem(name, JSON.stringify(newValue, options == null ? void 0 : options.replacer)),\n    removeItem: (name) => storage.removeItem(name)\n  };\n  return persistStorage;\n}\nconst toThenable = (fn) => (input) => {\n  try {\n    const result = fn(input);\n    if (result instanceof Promise) {\n      return result;\n    }\n    return {\n      then(onFulfilled) {\n        return toThenable(onFulfilled)(result);\n      },\n      catch(_onRejected) {\n        return this;\n      }\n    };\n  } catch (e) {\n    return {\n      then(_onFulfilled) {\n        return this;\n      },\n      catch(onRejected) {\n        return toThenable(onRejected)(e);\n      }\n    };\n  }\n};\nconst persistImpl = (config, baseOptions) => (set, get, api) => {\n  let options = {\n    storage: createJSONStorage(() => localStorage),\n    partialize: (state) => state,\n    version: 0,\n    merge: (persistedState, currentState) => ({\n      ...currentState,\n      ...persistedState\n    }),\n    ...baseOptions\n  };\n  let hasHydrated = false;\n  const hydrationListeners = /* @__PURE__ */ new Set();\n  const finishHydrationListeners = /* @__PURE__ */ new Set();\n  let storage = options.storage;\n  if (!storage) {\n    return config(\n      (...args) => {\n        console.warn(\n          `[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`\n        );\n        set(...args);\n      },\n      get,\n      api\n    );\n  }\n  const setItem = () => {\n    const state = options.partialize({ ...get() });\n    return storage.setItem(options.name, {\n      state,\n      version: options.version\n    });\n  };\n  const savedSetState = api.setState;\n  api.setState = (state, replace) => {\n    savedSetState(state, replace);\n    return setItem();\n  };\n  const configResult = config(\n    (...args) => {\n      set(...args);\n      return setItem();\n    },\n    get,\n    api\n  );\n  api.getInitialState = () => configResult;\n  let stateFromStorage;\n  const hydrate = () => {\n    var _a, _b;\n    if (!storage) return;\n    hasHydrated = false;\n    hydrationListeners.forEach((cb) => {\n      var _a2;\n      return cb((_a2 = get()) != null ? _a2 : configResult);\n    });\n    const postRehydrationCallback = ((_b = options.onRehydrateStorage) == null ? void 0 : _b.call(options, (_a = get()) != null ? _a : configResult)) || void 0;\n    return toThenable(storage.getItem.bind(storage))(options.name).then((deserializedStorageValue) => {\n      if (deserializedStorageValue) {\n        if (typeof deserializedStorageValue.version === \"number\" && deserializedStorageValue.version !== options.version) {\n          if (options.migrate) {\n            const migration = options.migrate(\n              deserializedStorageValue.state,\n              deserializedStorageValue.version\n            );\n            if (migration instanceof Promise) {\n              return migration.then((result) => [true, result]);\n            }\n            return [true, migration];\n          }\n          console.error(\n            `State loaded from storage couldn't be migrated since no migrate function was provided`\n          );\n        } else {\n          return [false, deserializedStorageValue.state];\n        }\n      }\n      return [false, void 0];\n    }).then((migrationResult) => {\n      var _a2;\n      const [migrated, migratedState] = migrationResult;\n      stateFromStorage = options.merge(\n        migratedState,\n        (_a2 = get()) != null ? _a2 : configResult\n      );\n      set(stateFromStorage, true);\n      if (migrated) {\n        return setItem();\n      }\n    }).then(() => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(stateFromStorage, void 0);\n      stateFromStorage = get();\n      hasHydrated = true;\n      finishHydrationListeners.forEach((cb) => cb(stateFromStorage));\n    }).catch((e) => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(void 0, e);\n    });\n  };\n  api.persist = {\n    setOptions: (newOptions) => {\n      options = {\n        ...options,\n        ...newOptions\n      };\n      if (newOptions.storage) {\n        storage = newOptions.storage;\n      }\n    },\n    clearStorage: () => {\n      storage == null ? void 0 : storage.removeItem(options.name);\n    },\n    getOptions: () => options,\n    rehydrate: () => hydrate(),\n    hasHydrated: () => hasHydrated,\n    onHydrate: (cb) => {\n      hydrationListeners.add(cb);\n      return () => {\n        hydrationListeners.delete(cb);\n      };\n    },\n    onFinishHydration: (cb) => {\n      finishHydrationListeners.add(cb);\n      return () => {\n        finishHydrationListeners.delete(cb);\n      };\n    }\n  };\n  if (!options.skipHydration) {\n    hydrate();\n  }\n  return stateFromStorage || configResult;\n};\nconst persist = persistImpl;\n\nfunction ssrSafe(config, isSSR = typeof window === \"undefined\") {\n  return (set, get, api) => {\n    if (!isSSR) {\n      return config(set, get, api);\n    }\n    const ssrSet = () => {\n      throw new Error(\"Cannot set state of Zustand store in SSR\");\n    };\n    api.setState = ssrSet;\n    return config(ssrSet, get, api);\n  };\n}\n\nexport { combine, createJSONStorage, devtools, persist, redux, subscribeWithSelector, ssrSafe as unstable_ssrSafe };\n","import { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\n\nexport type Theme = 'dark' | 'light';\n\ninterface SettingsState {\n  theme: Theme;\n  soundEnabled: boolean;\n  showTutorial: boolean;\n  hasCompletedTutorial: boolean;\n\n  // Actions\n  setTheme: (theme: Theme) => void;\n  toggleTheme: () => void;\n  setSoundEnabled: (enabled: boolean) => void;\n  toggleSound: () => void;\n  setShowTutorial: (show: boolean) => void;\n  completeTutorial: () => void;\n  resetTutorial: () => void;\n}\n\nexport const useSettingsStore = create<SettingsState>()(\n  persist(\n    (set, get) => ({\n      theme: 'dark',\n      soundEnabled: true,\n      showTutorial: false,\n      hasCompletedTutorial: false,\n\n      setTheme: (theme) => {\n        set({ theme });\n        // Apply theme to document\n        if (theme === 'light') {\n          document.documentElement.classList.add('light-theme');\n        } else {\n          document.documentElement.classList.remove('light-theme');\n        }\n      },\n\n      toggleTheme: () => {\n        const newTheme = get().theme === 'dark' ? 'light' : 'dark';\n        get().setTheme(newTheme);\n      },\n\n      setSoundEnabled: (enabled) => set({ soundEnabled: enabled }),\n\n      toggleSound: () => set((state) => ({ soundEnabled: !state.soundEnabled })),\n\n      setShowTutorial: (show) => set({ showTutorial: show }),\n\n      completeTutorial: () => set({ showTutorial: false, hasCompletedTutorial: true }),\n\n      resetTutorial: () => set({ hasCompletedTutorial: false }),\n    }),\n    {\n      name: 'wall-street-settings',\n      storage: createJSONStorage(() => localStorage),\n      onRehydrateStorage: () => (state) => {\n        // Apply theme on hydration\n        if (state?.theme === 'light') {\n          document.documentElement.classList.add('light-theme');\n        }\n      },\n    }\n  )\n);\n","import { useSettingsStore } from '@/store/settingsStore';\nimport { Button } from './Button';\n\nexport function ThemeToggle() {\n  const theme = useSettingsStore((state) => state.theme);\n  const toggleTheme = useSettingsStore((state) => state.toggleTheme);\n\n  return (\n    <Button\n      variant=\"ghost\"\n      size=\"sm\"\n      onClick={toggleTheme}\n      aria-label={`Switch to ${theme === 'dark' ? 'light' : 'dark'} mode`}\n      title={`Switch to ${theme === 'dark' ? 'light' : 'dark'} mode`}\n    >\n      {theme === 'dark' ? '‚òÄÔ∏è' : 'üåô'}\n    </Button>\n  );\n}\n","import { useSettingsStore } from '@/store/settingsStore';\nimport { Button } from './Button';\n\nexport function SoundToggle() {\n  const soundEnabled = useSettingsStore((state) => state.soundEnabled);\n  const toggleSound = useSettingsStore((state) => state.toggleSound);\n\n  return (\n    <Button\n      variant=\"ghost\"\n      size=\"sm\"\n      onClick={toggleSound}\n      aria-label={soundEnabled ? 'Mute sounds' : 'Enable sounds'}\n      title={soundEnabled ? 'Mute sounds' : 'Enable sounds'}\n    >\n      {soundEnabled ? 'üîä' : 'üîá'}\n    </Button>\n  );\n}\n","import { useState } from 'react';\nimport { useSettingsStore } from '@/store/settingsStore';\nimport { Button } from '@/components/ui/Button';\n\nconst TUTORIAL_STEPS = [\n  {\n    title: 'Welcome to Wall Street Simulator! üìà',\n    content:\n      'This is a paper trading simulator where you can practice trading stocks, commodities, and bonds with virtual money. No real money is involved!',\n    highlight: null,\n  },\n  {\n    title: 'Market Overview',\n    content:\n      'Browse available assets in the Market Overview section. Click on any asset to select it for trading. Use the filter buttons to show only stocks, commodities, or bonds.',\n    highlight: 'market-overview',\n  },\n  {\n    title: 'Trading Panel',\n    content:\n      'Once you select an asset, use the Trading Panel to buy or sell. Choose between Market orders (instant execution at current price) or Limit orders (execution at your specified price).',\n    highlight: 'trading-panel',\n  },\n  {\n    title: 'Your Portfolio',\n    content:\n      'Track your holdings in the Portfolio section. You can see your positions, average purchase price, and current profit/loss for each asset.',\n    highlight: 'portfolio',\n  },\n  {\n    title: 'Price Charts',\n    content:\n      'Analyze price movements with interactive candlestick charts. Switch between different timeframes (1D, 5D, 1M, 3M, 1Y) to see historical trends.',\n    highlight: 'charts',\n  },\n  {\n    title: 'Watchlist & Alerts',\n    content:\n      'Star your favorite assets to add them to your Watchlist. Set Price Alerts to get notified when a stock reaches your target price.',\n    highlight: 'watchlist',\n  },\n  {\n    title: 'Analytics Dashboard',\n    content:\n      'Review your trading performance in the Analytics Dashboard. See your portfolio allocation, win rate, and other key metrics.',\n    highlight: 'analytics',\n  },\n  {\n    title: \"You're Ready! üöÄ\",\n    content:\n      'Start with $100,000 in virtual cash. Experiment with different strategies, learn from your trades, and have fun! You can always reset your portfolio to start fresh.',\n    highlight: null,\n  },\n];\n\nexport function Tutorial() {\n  const [currentStep, setCurrentStep] = useState(0);\n  const showTutorial = useSettingsStore((state) => state.showTutorial);\n  const completeTutorial = useSettingsStore((state) => state.completeTutorial);\n  const setShowTutorial = useSettingsStore((state) => state.setShowTutorial);\n\n  if (!showTutorial) return null;\n\n  const step = TUTORIAL_STEPS[currentStep];\n  const isLastStep = currentStep === TUTORIAL_STEPS.length - 1;\n  const isFirstStep = currentStep === 0;\n\n  const handleNext = () => {\n    if (isLastStep) {\n      completeTutorial();\n    } else {\n      setCurrentStep((s) => s + 1);\n    }\n  };\n\n  const handlePrev = () => {\n    if (!isFirstStep) {\n      setCurrentStep((s) => s - 1);\n    }\n  };\n\n  const handleSkip = () => {\n    setShowTutorial(false);\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4\">\n      <div className=\"bg-gray-800 border border-gray-700 rounded-xl max-w-md w-full p-6 shadow-2xl\">\n        {/* Progress bar */}\n        <div className=\"flex gap-1 mb-4\">\n          {TUTORIAL_STEPS.map((_, index) => (\n            <div\n              key={index}\n              className={`h-1 flex-1 rounded ${\n                index <= currentStep ? 'bg-emerald-500' : 'bg-gray-600'\n              }`}\n            />\n          ))}\n        </div>\n\n        {/* Step counter */}\n        <div className=\"text-sm text-gray-400 mb-2\">\n          Step {currentStep + 1} of {TUTORIAL_STEPS.length}\n        </div>\n\n        {/* Content */}\n        <h3 className=\"text-xl font-bold text-white mb-3\">{step.title}</h3>\n        <p className=\"text-gray-300 mb-6 leading-relaxed\">{step.content}</p>\n\n        {/* Navigation */}\n        <div className=\"flex justify-between items-center\">\n          <Button variant=\"ghost\" onClick={handleSkip}>\n            Skip Tutorial\n          </Button>\n          <div className=\"flex gap-2\">\n            {!isFirstStep && (\n              <Button variant=\"secondary\" onClick={handlePrev}>\n                Back\n              </Button>\n            )}\n            <Button onClick={handleNext}>\n              {isLastStep ? 'Get Started' : 'Next'}\n            </Button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport function TutorialButton() {\n  const setShowTutorial = useSettingsStore((state) => state.setShowTutorial);\n\n  return (\n    <Button\n      variant=\"ghost\"\n      size=\"sm\"\n      onClick={() => setShowTutorial(true)}\n      aria-label=\"Show tutorial\"\n      title=\"Show tutorial\"\n    >\n      ‚ùì\n    </Button>\n  );\n}\n","// Asset definitions with current market data\nexport interface Asset {\n  name: string;\n  type: 'stocks' | 'commodities' | 'bonds';\n  symbol: string;\n}\n\nexport const ASSETS: Record<string, Asset> = {\n  // Stocks\n  AAPL: { name: 'Apple Inc.', type: 'stocks', symbol: 'AAPL' },\n  MSFT: { name: 'Microsoft', type: 'stocks', symbol: 'MSFT' },\n  TSLA: { name: 'Tesla Inc.', type: 'stocks', symbol: 'TSLA' },\n  GOOGL: { name: 'Alphabet', type: 'stocks', symbol: 'GOOGL' },\n  AMZN: { name: 'Amazon', type: 'stocks', symbol: 'AMZN' },\n  META: { name: 'Meta Platforms', type: 'stocks', symbol: 'META' },\n  NVDA: { name: 'NVIDIA', type: 'stocks', symbol: 'NVDA' },\n  JPM: { name: 'JPMorgan Chase', type: 'stocks', symbol: 'JPM' },\n  // Commodities (using futures symbols)\n  GC: { name: 'Gold', type: 'commodities', symbol: 'GC' },\n  CL: { name: 'Crude Oil', type: 'commodities', symbol: 'CL' },\n  SI: { name: 'Silver', type: 'commodities', symbol: 'SI' },\n  // Bonds (using index symbols)\n  TNX: { name: '10Y Treasury', type: 'bonds', symbol: 'TNX' },\n  TYX: { name: '30Y Treasury', type: 'bonds', symbol: 'TYX' },\n};\n\n// Symbols for the scrolling ticker\nexport const TICKER_SYMBOLS = ['AAPL', 'MSFT', 'GOOGL', 'AMZN', 'TSLA', 'META', 'NVDA', 'JPM'];\n\n// Valid symbols set for O(1) lookup\nexport const VALID_SYMBOLS = new Set(Object.keys(ASSETS));\n\n// Initial portfolio values\nexport const INITIAL_CASH = 100000;\nexport const STORAGE_KEY = 'wallStreetSimulator';\nexport const STORAGE_VERSION = '2.0';\n\n// Fallback prices (used when API is unavailable)\nexport const FALLBACK_PRICES: Record<string, { price: number; change: number }> = {\n  AAPL: { price: 262.24, change: -5.02 },\n  MSFT: { price: 475.00, change: 2.15 },\n  TSLA: { price: 432.96, change: -18.71 },\n  GOOGL: { price: 314.34, change: -2.36 },\n  AMZN: { price: 240.92, change: 7.86 },\n  META: { price: 660.46, change: 1.67 },\n  NVDA: { price: 187.27, change: -0.85 },\n  JPM: { price: 334.29, change: 1.75 },\n  GC: { price: 4478.24, change: 30.24 },\n  CL: { price: 58.15, change: -0.17 },\n  SI: { price: 81.52, change: 4.97 },\n  TNX: { price: 4.19, change: 0.02 },\n  TYX: { price: 4.88, change: 0.03 },\n};\n\n// API rate limits\nexport const API_RATE_LIMIT = 60; // calls per minute\nexport const API_RATE_WINDOW = 60000; // 1 minute in ms\n\n// Chart timeframes\nexport type Timeframe = '1D' | '5D' | '1M' | '3M' | '1Y';\nexport const TIMEFRAMES: Timeframe[] = ['1D', '5D', '1M', '3M', '1Y'];\n\n// Resolution mapping for Finnhub API\nexport const TIMEFRAME_RESOLUTION: Record<Timeframe, string> = {\n  '1D': '5',   // 5 minute bars\n  '5D': '15',  // 15 minute bars\n  '1M': '60',  // 1 hour bars\n  '3M': 'D',   // Daily bars\n  '1Y': 'D',   // Daily bars\n};\n\n// Order types\nexport type OrderType = 'market' | 'limit';\n\n// Asset filter types\nexport type AssetFilter = 'all' | 'stocks' | 'commodities' | 'bonds';\n\n// Chart tab types\nexport type ChartTab = 'chart' | 'orderbook' | 'news';\n","/**\n * Rate limiter to prevent rapid API calls or actions\n */\nclass RateLimiterClass {\n  private attempts = new Map<string, { count: number; resetTime: number }>();\n  private maxAttempts: number;\n  private windowMs: number;\n\n  constructor(maxAttempts = 60, windowMs = 60000) {\n    this.maxAttempts = maxAttempts;\n    this.windowMs = windowMs;\n  }\n\n  check(action: string): boolean {\n    const now = Date.now();\n    const record = this.attempts.get(action) ?? { count: 0, resetTime: now + this.windowMs };\n\n    if (now > record.resetTime) {\n      record.count = 0;\n      record.resetTime = now + this.windowMs;\n    }\n\n    if (record.count >= this.maxAttempts) {\n      return false;\n    }\n\n    record.count++;\n    this.attempts.set(action, record);\n    return true;\n  }\n\n  reset(action: string): void {\n    this.attempts.delete(action);\n  }\n\n  async acquire(): Promise<void> {\n    return new Promise((resolve) => {\n      const tryAcquire = () => {\n        if (this.check('api')) {\n          resolve();\n        } else {\n          setTimeout(tryAcquire, 100);\n        }\n      };\n      tryAcquire();\n    });\n  }\n}\n\n// Singleton rate limiter for API calls\nexport const apiRateLimiter = new RateLimiterClass(60, 60000);\n\n// Singleton rate limiter for trade actions\nexport const tradeRateLimiter = new RateLimiterClass(10, 60000);\n\n/**\n * Sanitize HTML to prevent XSS\n */\nexport function sanitizeHTML(str: unknown): string {\n  if (typeof str !== 'string') return '';\n  const div = document.createElement('div');\n  div.textContent = str;\n  return div.innerHTML;\n}\n\n/**\n * Deep freeze an object to prevent mutation\n */\nexport function deepFreeze<T extends object>(obj: T): Readonly<T> {\n  Object.keys(obj).forEach((prop) => {\n    const value = (obj as Record<string, unknown>)[prop];\n    if (typeof value === 'object' && value !== null) {\n      deepFreeze(value as object);\n    }\n  });\n  return Object.freeze(obj);\n}\n\n/**\n * Generate a unique ID\n */\nexport function generateId(): string {\n  return crypto.randomUUID();\n}\n","import { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\nimport { INITIAL_CASH, STORAGE_KEY, STORAGE_VERSION } from '@/utils/constants';\nimport { generateId } from '@/utils/security';\nimport type { Position, Trade } from './types';\n\ninterface PortfolioState {\n  version: string;\n  cashBalance: number;\n  positions: Record<string, Position>;\n  tradeHistory: Trade[];\n\n  // Actions\n  executeTrade: (\n    type: 'buy' | 'sell',\n    symbol: string,\n    quantity: number,\n    price: number\n  ) => boolean;\n  resetPortfolio: () => void;\n  getPositionValue: (symbol: string, currentPrice: number) => number;\n  getTotalPositionsValue: (prices: Record<string, number>) => number;\n}\n\nexport const usePortfolioStore = create<PortfolioState>()(\n  persist(\n    (set, get) => ({\n      version: STORAGE_VERSION,\n      cashBalance: INITIAL_CASH,\n      positions: {},\n      tradeHistory: [],\n\n      executeTrade: (type, symbol, quantity, price) => {\n        const state = get();\n        const total = quantity * price;\n\n        if (type === 'buy') {\n          // Check if we have enough cash\n          if (total > state.cashBalance) {\n            return false;\n          }\n\n          set((state) => {\n            const existing = state.positions[symbol];\n            const newQuantity = (existing?.quantity || 0) + quantity;\n            const existingCost = existing ? existing.quantity * existing.avgPrice : 0;\n            const newAvgPrice = (existingCost + total) / newQuantity;\n\n            const newTrade: Trade = {\n              id: generateId(),\n              type: 'buy',\n              symbol,\n              quantity,\n              price,\n              total,\n              timestamp: Date.now(),\n            };\n\n            return {\n              cashBalance: state.cashBalance - total,\n              positions: {\n                ...state.positions,\n                [symbol]: {\n                  symbol,\n                  quantity: newQuantity,\n                  avgPrice: newAvgPrice,\n                },\n              },\n              tradeHistory: [newTrade, ...state.tradeHistory.slice(0, 99)],\n            };\n          });\n\n          return true;\n        } else {\n          // Sell\n          const position = state.positions[symbol];\n\n          // Check if we have enough shares\n          if (!position || position.quantity < quantity) {\n            return false;\n          }\n\n          set((state) => {\n            const newQuantity = state.positions[symbol].quantity - quantity;\n            const newPositions = { ...state.positions };\n\n            if (newQuantity === 0) {\n              delete newPositions[symbol];\n            } else {\n              newPositions[symbol] = {\n                ...newPositions[symbol],\n                quantity: newQuantity,\n              };\n            }\n\n            const newTrade: Trade = {\n              id: generateId(),\n              type: 'sell',\n              symbol,\n              quantity,\n              price,\n              total,\n              timestamp: Date.now(),\n            };\n\n            return {\n              cashBalance: state.cashBalance + total,\n              positions: newPositions,\n              tradeHistory: [newTrade, ...state.tradeHistory.slice(0, 99)],\n            };\n          });\n\n          return true;\n        }\n      },\n\n      resetPortfolio: () =>\n        set({\n          cashBalance: INITIAL_CASH,\n          positions: {},\n          tradeHistory: [],\n        }),\n\n      getPositionValue: (symbol, currentPrice) => {\n        const position = get().positions[symbol];\n        return position ? position.quantity * currentPrice : 0;\n      },\n\n      getTotalPositionsValue: (prices) => {\n        const positions = get().positions;\n        return Object.entries(positions).reduce((total, [symbol, position]) => {\n          const price = prices[symbol] ?? position.avgPrice;\n          return total + position.quantity * price;\n        }, 0);\n      },\n    }),\n    {\n      name: STORAGE_KEY,\n      version: 2,\n      storage: createJSONStorage(() => localStorage),\n      migrate: (persistedState, version) => {\n        // Handle migration from v1 to v2\n        if (version < 2) {\n          const oldState = persistedState as Record<string, unknown>;\n          return {\n            version: STORAGE_VERSION,\n            cashBalance: (oldState.cashBalance as number) ?? INITIAL_CASH,\n            positions: (oldState.positions as Record<string, Position>) ?? {},\n            tradeHistory: (oldState.tradeHistory as Trade[]) ?? [],\n          };\n        }\n        return persistedState as PortfolioState;\n      },\n    }\n  )\n);\n","import { create } from 'zustand';\nimport { FALLBACK_PRICES } from '@/utils/constants';\nimport type { AssetPrice } from './types';\n\nconst MAX_PRICE_HISTORY = 20;\n\ninterface MarketState {\n  prices: Record<string, AssetPrice>;\n  priceHistory: Record<string, number[]>;\n  selectedSymbol: string;\n  isSimulated: boolean;\n  isConnected: boolean;\n\n  // Actions\n  setPrice: (\n    symbol: string,\n    price: number,\n    change: number,\n    changePercent: number\n  ) => void;\n  updatePriceFromWebSocket: (symbol: string, price: number) => void;\n  selectSymbol: (symbol: string) => void;\n  setSimulated: (isSimulated: boolean) => void;\n  setConnected: (isConnected: boolean) => void;\n  initializeFallbackPrices: () => void;\n  simulatePriceMovement: () => void;\n  getPriceHistory: (symbol: string) => number[];\n}\n\nexport const useMarketStore = create<MarketState>((set, get) => ({\n  prices: {},\n  priceHistory: {},\n  selectedSymbol: 'AAPL',\n  isSimulated: true,\n  isConnected: false,\n\n  setPrice: (symbol, price, change, changePercent) => {\n    set((state) => {\n      const history = state.priceHistory[symbol] ?? [];\n      const newHistory = [...history, price].slice(-MAX_PRICE_HISTORY);\n\n      return {\n        prices: {\n          ...state.prices,\n          [symbol]: {\n            price,\n            change,\n            changePercent,\n            lastUpdated: Date.now(),\n          },\n        },\n        priceHistory: {\n          ...state.priceHistory,\n          [symbol]: newHistory,\n        },\n      };\n    });\n  },\n\n  updatePriceFromWebSocket: (symbol, newPrice) => {\n    set((state) => {\n      const existing = state.prices[symbol];\n      const previousPrice = existing?.price ?? newPrice;\n      const change = newPrice - previousPrice;\n      const changePercent = previousPrice > 0 ? (change / previousPrice) * 100 : 0;\n\n      const history = state.priceHistory[symbol] ?? [];\n      const newHistory = [...history, newPrice].slice(-MAX_PRICE_HISTORY);\n\n      return {\n        prices: {\n          ...state.prices,\n          [symbol]: {\n            ...existing,\n            price: newPrice,\n            change,\n            changePercent,\n            lastUpdated: Date.now(),\n          },\n        },\n        priceHistory: {\n          ...state.priceHistory,\n          [symbol]: newHistory,\n        },\n      };\n    });\n  },\n\n  selectSymbol: (symbol) => set({ selectedSymbol: symbol }),\n\n  setSimulated: (isSimulated) => set({ isSimulated }),\n\n  setConnected: (isConnected) => set({ isConnected }),\n\n  initializeFallbackPrices: () => {\n    const prices: Record<string, AssetPrice> = {};\n    const priceHistory: Record<string, number[]> = {};\n\n    Object.entries(FALLBACK_PRICES).forEach(([symbol, data]) => {\n      const changePercent = data.price > 0 ? (data.change / data.price) * 100 : 0;\n      prices[symbol] = {\n        price: data.price,\n        change: data.change,\n        changePercent,\n        lastUpdated: Date.now(),\n      };\n      // Initialize with some historical data points\n      const basePrice = data.price;\n      priceHistory[symbol] = Array.from({ length: 10 }, (_, i) => {\n        const variation = (Math.random() - 0.5) * 0.02 * basePrice;\n        return basePrice + variation * (i / 10);\n      });\n      priceHistory[symbol].push(data.price);\n    });\n\n    set({ prices, priceHistory, isSimulated: true });\n  },\n\n  simulatePriceMovement: () => {\n    const state = get();\n    if (!state.isSimulated) return;\n\n    const newPrices: Record<string, AssetPrice> = {};\n    const newHistory: Record<string, number[]> = {};\n\n    Object.entries(state.prices).forEach(([symbol, asset]) => {\n      // Random change between -0.25% and +0.25%\n      const changePercent = (Math.random() - 0.5) * 0.5;\n      const priceChange = asset.price * (changePercent / 100);\n      const newPrice = Math.max(0.01, asset.price + priceChange);\n\n      newPrices[symbol] = {\n        ...asset,\n        price: newPrice,\n        change: priceChange,\n        changePercent,\n        lastUpdated: Date.now(),\n      };\n\n      const history = state.priceHistory[symbol] ?? [];\n      newHistory[symbol] = [...history, newPrice].slice(-MAX_PRICE_HISTORY);\n    });\n\n    set({ prices: newPrices, priceHistory: newHistory });\n  },\n\n  getPriceHistory: (symbol) => {\n    return get().priceHistory[symbol] ?? [];\n  },\n}));\n","/**\n * Format a number as US currency\n */\nexport function formatCurrency(amount: number): string {\n  if (!Number.isFinite(amount)) return '$0.00';\n\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 2,\n  }).format(amount);\n}\n\n/**\n * Format a number as a percentage with sign\n */\nexport function formatPercent(value: number): string {\n  if (!Number.isFinite(value)) return '+0.00%';\n\n  const sign = value >= 0 ? '+' : '';\n  return `${sign}${value.toFixed(2)}%`;\n}\n\n/**\n * Format a number with thousand separators\n */\nexport function formatNumber(value: number, decimals = 0): string {\n  if (!Number.isFinite(value)) return '0';\n\n  return new Intl.NumberFormat('en-US', {\n    minimumFractionDigits: decimals,\n    maximumFractionDigits: decimals,\n  }).format(value);\n}\n\n/**\n * Format a timestamp as local time\n */\nexport function formatTime(timestamp: number): string {\n  return new Date(timestamp).toLocaleTimeString('en-US', {\n    hour: '2-digit',\n    minute: '2-digit',\n    second: '2-digit',\n  });\n}\n\n/**\n * Format a timestamp as local date\n */\nexport function formatDate(timestamp: number): string {\n  return new Date(timestamp).toLocaleDateString('en-US', {\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric',\n  });\n}\n\n/**\n * Format large numbers with abbreviations (K, M, B)\n */\nexport function formatCompact(value: number): string {\n  if (!Number.isFinite(value)) return '0';\n\n  if (value >= 1e9) {\n    return `${(value / 1e9).toFixed(1)}B`;\n  }\n  if (value >= 1e6) {\n    return `${(value / 1e6).toFixed(1)}M`;\n  }\n  if (value >= 1e3) {\n    return `${(value / 1e3).toFixed(1)}K`;\n  }\n\n  return value.toFixed(0);\n}\n\n/**\n * Format price change with color indicator\n */\nexport function formatPriceChange(change: number, price: number): { text: string; isPositive: boolean } {\n  const changePercent = price > 0 ? (change / price) * 100 : 0;\n  const isPositive = change >= 0;\n  const arrow = isPositive ? '‚ñ≤' : '‚ñº';\n\n  return {\n    text: `${arrow} ${formatCurrency(Math.abs(change))} (${formatPercent(changePercent)})`,\n    isPositive,\n  };\n}\n","// Finnhub API Configuration\n\nconst FINNHUB_API_KEY = import.meta.env.VITE_FINNHUB_API_KEY || '';\n\nexport const config = {\n  apiKey: FINNHUB_API_KEY,\n  baseUrl: 'https://finnhub.io/api/v1',\n  wsUrl: 'wss://ws.finnhub.io',\n  hasApiKey: Boolean(FINNHUB_API_KEY),\n};\n\n// Log configuration status (only in development)\nif (import.meta.env.DEV) {\n  if (config.hasApiKey) {\n    console.log('Finnhub API key configured - using live data');\n  } else {\n    console.log('No Finnhub API key found - using simulated data');\n    console.log('To enable live data, create a .env file with VITE_FINNHUB_API_KEY=your_key');\n  }\n}\n","import { config } from './config';\nimport type { FinnhubWebSocketMessage } from './types';\n\ntype TradeCallback = (symbol: string, price: number, volume: number) => void;\ntype ConnectionCallback = (connected: boolean) => void;\n\n/**\n * Finnhub WebSocket Manager for real-time price updates\n */\nclass WebSocketManager {\n  private ws: WebSocket | null = null;\n  private subscriptions = new Set<string>();\n  private tradeCallbacks: TradeCallback[] = [];\n  private connectionCallbacks: ConnectionCallback[] = [];\n  private reconnectAttempts = 0;\n  private maxReconnects = 5;\n  private reconnectTimeout: ReturnType<typeof setTimeout> | null = null;\n  private pingInterval: ReturnType<typeof setInterval> | null = null;\n\n  /**\n   * Check if WebSocket is available\n   */\n  isAvailable(): boolean {\n    return config.hasApiKey;\n  }\n\n  /**\n   * Connect to WebSocket\n   */\n  connect(): void {\n    if (!this.isAvailable()) {\n      console.log('WebSocket not available - no API key');\n      return;\n    }\n\n    if (this.ws?.readyState === WebSocket.OPEN) {\n      return;\n    }\n\n    try {\n      this.ws = new WebSocket(`${config.wsUrl}?token=${config.apiKey}`);\n\n      this.ws.onopen = () => {\n        console.log('WebSocket connected');\n        this.reconnectAttempts = 0;\n        this.notifyConnection(true);\n\n        // Resubscribe to all symbols\n        this.subscriptions.forEach((symbol) => {\n          this.sendSubscribe(symbol);\n        });\n\n        // Set up ping interval to keep connection alive\n        this.pingInterval = setInterval(() => {\n          if (this.ws?.readyState === WebSocket.OPEN) {\n            // Finnhub doesn't require explicit pings, but we can check connection\n          }\n        }, 30000);\n      };\n\n      this.ws.onmessage = (event) => {\n        try {\n          const message: FinnhubWebSocketMessage = JSON.parse(event.data);\n\n          if (message.type === 'trade' && message.data) {\n            message.data.forEach((trade) => {\n              this.tradeCallbacks.forEach((cb) => {\n                cb(trade.s, trade.p, trade.v);\n              });\n            });\n          }\n        } catch (error) {\n          console.error('Error parsing WebSocket message:', error);\n        }\n      };\n\n      this.ws.onclose = () => {\n        console.log('WebSocket disconnected');\n        this.notifyConnection(false);\n        this.cleanup();\n        this.attemptReconnect();\n      };\n\n      this.ws.onerror = (error) => {\n        console.error('WebSocket error:', error);\n      };\n    } catch (error) {\n      console.error('Failed to create WebSocket:', error);\n    }\n  }\n\n  /**\n   * Disconnect from WebSocket\n   */\n  disconnect(): void {\n    if (this.reconnectTimeout) {\n      clearTimeout(this.reconnectTimeout);\n      this.reconnectTimeout = null;\n    }\n\n    this.cleanup();\n\n    if (this.ws) {\n      this.ws.close();\n      this.ws = null;\n    }\n  }\n\n  /**\n   * Subscribe to real-time trades for a symbol\n   */\n  subscribe(symbol: string): void {\n    this.subscriptions.add(symbol);\n\n    if (this.ws?.readyState === WebSocket.OPEN) {\n      this.sendSubscribe(symbol);\n    }\n  }\n\n  /**\n   * Unsubscribe from a symbol\n   */\n  unsubscribe(symbol: string): void {\n    this.subscriptions.delete(symbol);\n\n    if (this.ws?.readyState === WebSocket.OPEN) {\n      this.ws.send(JSON.stringify({ type: 'unsubscribe', symbol }));\n    }\n  }\n\n  /**\n   * Subscribe to multiple symbols\n   */\n  subscribeAll(symbols: string[]): void {\n    symbols.forEach((symbol) => this.subscribe(symbol));\n  }\n\n  /**\n   * Add a callback for trade updates\n   */\n  onTrade(callback: TradeCallback): () => void {\n    this.tradeCallbacks.push(callback);\n\n    return () => {\n      const index = this.tradeCallbacks.indexOf(callback);\n      if (index > -1) {\n        this.tradeCallbacks.splice(index, 1);\n      }\n    };\n  }\n\n  /**\n   * Add a callback for connection status changes\n   */\n  onConnection(callback: ConnectionCallback): () => void {\n    this.connectionCallbacks.push(callback);\n\n    return () => {\n      const index = this.connectionCallbacks.indexOf(callback);\n      if (index > -1) {\n        this.connectionCallbacks.splice(index, 1);\n      }\n    };\n  }\n\n  /**\n   * Get connection status\n   */\n  isConnected(): boolean {\n    return this.ws?.readyState === WebSocket.OPEN;\n  }\n\n  private sendSubscribe(symbol: string): void {\n    if (this.ws?.readyState === WebSocket.OPEN) {\n      this.ws.send(JSON.stringify({ type: 'subscribe', symbol }));\n    }\n  }\n\n  private notifyConnection(connected: boolean): void {\n    this.connectionCallbacks.forEach((cb) => cb(connected));\n  }\n\n  private cleanup(): void {\n    if (this.pingInterval) {\n      clearInterval(this.pingInterval);\n      this.pingInterval = null;\n    }\n  }\n\n  private attemptReconnect(): void {\n    if (this.reconnectAttempts >= this.maxReconnects) {\n      console.log('Max reconnect attempts reached');\n      return;\n    }\n\n    this.reconnectAttempts++;\n    const delay = Math.min(1000 * Math.pow(2, this.reconnectAttempts), 30000);\n\n    console.log(`Reconnecting in ${delay}ms (attempt ${this.reconnectAttempts})`);\n\n    this.reconnectTimeout = setTimeout(() => {\n      this.connect();\n    }, delay);\n  }\n}\n\n// Export singleton instance\nexport const wsManager = new WebSocketManager();\n","import { useEffect } from 'react';\nimport { wsManager } from '@/api/websocket';\nimport { useMarketStore } from '@/store/marketStore';\nimport { TICKER_SYMBOLS } from '@/utils/constants';\n\n/**\n * Hook to initialize and manage WebSocket connection\n */\nexport function useWebSocketInit() {\n  const updatePriceFromWebSocket = useMarketStore((state) => state.updatePriceFromWebSocket);\n  const setConnected = useMarketStore((state) => state.setConnected);\n  const setSimulated = useMarketStore((state) => state.setSimulated);\n  const initializeFallbackPrices = useMarketStore((state) => state.initializeFallbackPrices);\n  const simulatePriceMovement = useMarketStore((state) => state.simulatePriceMovement);\n\n  useEffect(() => {\n    // Initialize with fallback prices first\n    initializeFallbackPrices();\n\n    if (wsManager.isAvailable()) {\n      // Set up WebSocket callbacks\n      const unsubscribeTrade = wsManager.onTrade((symbol, price) => {\n        updatePriceFromWebSocket(symbol, price);\n      });\n\n      const unsubscribeConnection = wsManager.onConnection((connected) => {\n        setConnected(connected);\n        setSimulated(!connected);\n      });\n\n      // Connect and subscribe to all symbols\n      wsManager.connect();\n      wsManager.subscribeAll(TICKER_SYMBOLS);\n\n      return () => {\n        unsubscribeTrade();\n        unsubscribeConnection();\n        wsManager.disconnect();\n      };\n    } else {\n      // No API key - use simulated data\n      setSimulated(true);\n      setConnected(false);\n\n      // Simulate price movements every 3 seconds\n      const interval = setInterval(() => {\n        simulatePriceMovement();\n      }, 3000);\n\n      return () => {\n        clearInterval(interval);\n      };\n    }\n  }, [\n    initializeFallbackPrices,\n    updatePriceFromWebSocket,\n    setConnected,\n    setSimulated,\n    simulatePriceMovement,\n  ]);\n}\n\n/**\n * Hook to subscribe to a specific symbol\n */\nexport function useSymbolSubscription(symbol: string) {\n  useEffect(() => {\n    if (wsManager.isAvailable()) {\n      wsManager.subscribe(symbol);\n\n      return () => {\n        wsManager.unsubscribe(symbol);\n      };\n    }\n  }, [symbol]);\n}\n\n/**\n * Hook to get connection status\n */\nexport function useConnectionStatus() {\n  const isConnected = useMarketStore((state) => state.isConnected);\n  const isSimulated = useMarketStore((state) => state.isSimulated);\n\n  return { isConnected, isSimulated };\n}\n","import { useMemo } from 'react';\nimport { Card } from '@/components/ui/Card';\nimport { Button } from '@/components/ui/Button';\nimport { ThemeToggle } from '@/components/ui/ThemeToggle';\nimport { SoundToggle } from '@/components/ui/SoundToggle';\nimport { TutorialButton } from '@/components/tutorial/Tutorial';\nimport { usePortfolioStore } from '@/store/portfolioStore';\nimport { useMarketStore } from '@/store/marketStore';\nimport { formatCurrency } from '@/utils/formatters';\nimport { INITIAL_CASH } from '@/utils/constants';\nimport { useConnectionStatus } from '@/hooks/useWebSocket';\nimport { clsx } from 'clsx';\n\nexport function Header() {\n  const cashBalance = usePortfolioStore((state) => state.cashBalance);\n  const positions = usePortfolioStore((state) => state.positions);\n  const resetPortfolio = usePortfolioStore((state) => state.resetPortfolio);\n  const prices = useMarketStore((state) => state.prices);\n  const { isConnected, isSimulated } = useConnectionStatus();\n\n  const { portfolioValue, dayPL, dayPLPercent } = useMemo(() => {\n    let positionsValue = 0;\n\n    Object.entries(positions).forEach(([symbol, position]) => {\n      const price = prices[symbol]?.price ?? position.avgPrice;\n      positionsValue += position.quantity * price;\n    });\n\n    const total = cashBalance + positionsValue;\n    const pl = total - INITIAL_CASH;\n    const plPercent = (pl / INITIAL_CASH) * 100;\n\n    return {\n      portfolioValue: total,\n      dayPL: pl,\n      dayPLPercent: plPercent,\n    };\n  }, [cashBalance, positions, prices]);\n\n  const handleReset = () => {\n    if (confirm('Are you sure you want to reset your portfolio? This will clear all positions and trade history.')) {\n      resetPortfolio();\n    }\n  };\n\n  return (\n    <Card className=\"mb-4\">\n      <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-4\">\n        <div className=\"flex items-center gap-3 sm:gap-4 flex-wrap\">\n          <h1 className=\"text-xl sm:text-2xl font-bold text-emerald-400\">\n            Wall Street Trading Simulator\n          </h1>\n          <span\n            className={clsx(\n              'flex items-center gap-2 text-sm',\n              isConnected ? 'text-emerald-400' : isSimulated ? 'text-yellow-400' : 'text-red-400'\n            )}\n            role=\"status\"\n            aria-live=\"polite\"\n          >\n            <span\n              className={clsx(\n                'w-2 h-2 rounded-full pulse',\n                isConnected ? 'bg-emerald-500' : isSimulated ? 'bg-yellow-500' : 'bg-red-500'\n              )}\n              aria-hidden=\"true\"\n            />\n            <span>\n              {isConnected ? 'LIVE' : isSimulated ? 'SIMULATED' : 'OFFLINE'}\n            </span>\n          </span>\n        </div>\n\n        <div className=\"flex items-center gap-4 sm:gap-6 flex-wrap w-full sm:w-auto\">\n          <div className=\"text-left sm:text-right\">\n            <div className=\"text-xs sm:text-sm text-gray-400\">Portfolio Value</div>\n            <div\n              className={clsx(\n                'text-lg sm:text-xl font-bold price-animate',\n                portfolioValue >= INITIAL_CASH ? 'text-emerald-400' : 'text-red-400'\n              )}\n              aria-label={`Portfolio value: ${formatCurrency(portfolioValue)}`}\n            >\n              {formatCurrency(portfolioValue)}\n            </div>\n          </div>\n\n          <div className=\"text-left sm:text-right\">\n            <div className=\"text-xs sm:text-sm text-gray-400\">Cash Balance</div>\n            <div\n              className=\"text-lg sm:text-xl font-bold text-emerald-400 price-animate\"\n              aria-label={`Cash balance: ${formatCurrency(cashBalance)}`}\n            >\n              {formatCurrency(cashBalance)}\n            </div>\n          </div>\n\n          <div className=\"text-left sm:text-right\">\n            <div className=\"text-xs sm:text-sm text-gray-400\">Total P/L</div>\n            <div\n              className={clsx(\n                'text-lg sm:text-xl font-bold price-animate',\n                dayPL >= 0 ? 'text-emerald-400' : 'text-red-400'\n              )}\n              aria-label={`Total profit and loss: ${formatCurrency(dayPL)}`}\n            >\n              {formatCurrency(dayPL)} ({dayPLPercent >= 0 ? '+' : ''}{dayPLPercent.toFixed(2)}%)\n            </div>\n          </div>\n\n          <div className=\"flex items-center gap-1\">\n            <ThemeToggle />\n            <SoundToggle />\n            <TutorialButton />\n          </div>\n\n          <Button\n            variant=\"secondary\"\n            size=\"sm\"\n            onClick={handleReset}\n            aria-label=\"Reset portfolio to starting balance\"\n          >\n            Reset\n          </Button>\n        </div>\n      </div>\n    </Card>\n  );\n}\n","import { Card } from '@/components/ui/Card';\nimport { useMarketStore } from '@/store/marketStore';\nimport { formatCurrency, formatPercent } from '@/utils/formatters';\nimport { TICKER_SYMBOLS } from '@/utils/constants';\nimport { clsx } from 'clsx';\n\nexport function MarketTicker() {\n  const prices = useMarketStore((state) => state.prices);\n\n  // Generate ticker items\n  const tickerItems = TICKER_SYMBOLS.map((symbol) => {\n    const asset = prices[symbol];\n    if (!asset) return null;\n\n    const isPositive = asset.change >= 0;\n\n    return (\n      <div\n        key={symbol}\n        className=\"flex items-center gap-3\"\n        role=\"listitem\"\n      >\n        <span className=\"font-semibold text-white\">{symbol}</span>\n        <span className=\"text-gray-300\">{formatCurrency(asset.price)}</span>\n        <span\n          className={clsx(\n            'flex items-center gap-1',\n            isPositive ? 'text-emerald-400' : 'text-red-400'\n          )}\n        >\n          <span aria-hidden=\"true\">{isPositive ? '‚ñ≤' : '‚ñº'}</span>\n          <span>{formatPercent(asset.changePercent)}</span>\n        </span>\n      </div>\n    );\n  }).filter(Boolean);\n\n  return (\n    <Card className=\"p-2 sm:p-3 mb-4 overflow-hidden\" role=\"marquee\" aria-label=\"Live market ticker\">\n      <div className=\"flex gap-6 sm:gap-8 ticker-scroll whitespace-nowrap\">\n        {/* Duplicate items for seamless scroll */}\n        {tickerItems}\n        {tickerItems}\n      </div>\n    </Card>\n  );\n}\n","import { Card } from '@/components/ui/Card';\n\nexport function Footer() {\n  return (\n    <Card className=\"text-center text-gray-400 text-sm\">\n      <p>Wall Street Trading Simulator - For Educational Purposes Only</p>\n      <p className=\"mt-1\">Data is simulated and does not represent real market conditions</p>\n      <p className=\"mt-2 text-xs\">\n        <a\n          href=\"https://github.com/JSchwartz99999/WallStreetTradingSimulator\"\n          className=\"text-emerald-400 hover:text-emerald-300 transition-colors\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          View on GitHub\n        </a>\n      </p>\n    </Card>\n  );\n}\n","import { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\n\ninterface WatchlistState {\n  watchlist: string[];\n\n  // Actions\n  addToWatchlist: (symbol: string) => void;\n  removeFromWatchlist: (symbol: string) => void;\n  isInWatchlist: (symbol: string) => boolean;\n  toggleWatchlist: (symbol: string) => void;\n}\n\nexport const useWatchlistStore = create<WatchlistState>()(\n  persist(\n    (set, get) => ({\n      watchlist: [],\n\n      addToWatchlist: (symbol) => {\n        set((state) => {\n          if (state.watchlist.includes(symbol)) return state;\n          return { watchlist: [...state.watchlist, symbol] };\n        });\n      },\n\n      removeFromWatchlist: (symbol) => {\n        set((state) => ({\n          watchlist: state.watchlist.filter((s) => s !== symbol),\n        }));\n      },\n\n      isInWatchlist: (symbol) => {\n        return get().watchlist.includes(symbol);\n      },\n\n      toggleWatchlist: (symbol) => {\n        const state = get();\n        if (state.watchlist.includes(symbol)) {\n          state.removeFromWatchlist(symbol);\n        } else {\n          state.addToWatchlist(symbol);\n        }\n      },\n    }),\n    {\n      name: 'wall-street-watchlist',\n      storage: createJSONStorage(() => localStorage),\n    }\n  )\n);\n","import { useRef, useEffect, useMemo } from 'react';\n\ninterface SparklineProps {\n  data: number[];\n  width?: number;\n  height?: number;\n  color?: string;\n  className?: string;\n}\n\nexport function Sparkline({\n  data,\n  width = 60,\n  height = 20,\n  color,\n  className,\n}: SparklineProps) {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  // Determine color based on trend\n  const sparklineColor = useMemo(() => {\n    if (color) return color;\n    if (data.length < 2) return '#6b7280';\n    const first = data[0];\n    const last = data[data.length - 1];\n    return last >= first ? '#10b981' : '#ef4444';\n  }, [data, color]);\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas || data.length < 2) return;\n\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n\n    // Clear canvas\n    ctx.clearRect(0, 0, width, height);\n\n    // Calculate scale\n    const min = Math.min(...data);\n    const max = Math.max(...data);\n    const range = max - min || 1;\n    const padding = 2;\n\n    // Draw line\n    ctx.beginPath();\n    ctx.strokeStyle = sparklineColor;\n    ctx.lineWidth = 1.5;\n    ctx.lineCap = 'round';\n    ctx.lineJoin = 'round';\n\n    data.forEach((value, index) => {\n      const x = (index / (data.length - 1)) * (width - padding * 2) + padding;\n      const y = height - padding - ((value - min) / range) * (height - padding * 2);\n\n      if (index === 0) {\n        ctx.moveTo(x, y);\n      } else {\n        ctx.lineTo(x, y);\n      }\n    });\n\n    ctx.stroke();\n\n    // Draw gradient fill\n    const gradient = ctx.createLinearGradient(0, 0, 0, height);\n    gradient.addColorStop(0, sparklineColor + '40');\n    gradient.addColorStop(1, sparklineColor + '00');\n\n    ctx.lineTo(width - padding, height);\n    ctx.lineTo(padding, height);\n    ctx.closePath();\n    ctx.fillStyle = gradient;\n    ctx.fill();\n  }, [data, width, height, sparklineColor]);\n\n  if (data.length < 2) {\n    return <div style={{ width, height }} className={className} />;\n  }\n\n  return (\n    <canvas\n      ref={canvasRef}\n      width={width}\n      height={height}\n      className={className}\n      aria-hidden=\"true\"\n    />\n  );\n}\n","import { clsx } from 'clsx';\nimport { formatCurrency, formatPercent } from '@/utils/formatters';\nimport { useWatchlistStore } from '@/store/watchlistStore';\nimport { useMarketStore } from '@/store/marketStore';\nimport { Sparkline } from '@/components/charts/Sparkline';\nimport type { Asset } from '@/utils/constants';\n\ninterface AssetCardProps {\n  symbol: string;\n  asset: Asset;\n  price: number;\n  change: number;\n  changePercent: number;\n  isSelected: boolean;\n  onSelect: (symbol: string) => void;\n}\n\nconst typeColors = {\n  stocks: { bg: 'bg-blue-900/50', text: 'text-blue-300' },\n  commodities: { bg: 'bg-yellow-900/50', text: 'text-yellow-300' },\n  bonds: { bg: 'bg-purple-900/50', text: 'text-purple-300' },\n};\n\nexport function AssetCard({\n  symbol,\n  asset,\n  price,\n  change,\n  changePercent,\n  isSelected,\n  onSelect,\n}: AssetCardProps) {\n  const isPositive = change >= 0;\n  const colors = typeColors[asset.type];\n\n  const isInWatchlist = useWatchlistStore((state) => state.watchlist.includes(symbol));\n  const toggleWatchlist = useWatchlistStore((state) => state.toggleWatchlist);\n  const priceHistory = useMarketStore((state) => state.priceHistory[symbol] ?? []);\n\n  const handleWatchlistClick = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    toggleWatchlist(symbol);\n  };\n\n  return (\n    <div\n      onClick={() => onSelect(symbol)}\n      onKeyDown={(e) => {\n        if (e.key === 'Enter' || e.key === ' ') {\n          e.preventDefault();\n          onSelect(symbol);\n        }\n      }}\n      tabIndex={0}\n      role=\"option\"\n      aria-selected={isSelected}\n      className={clsx(\n        'p-3 bg-gray-700 rounded-lg cursor-pointer',\n        'hover:bg-gray-600 transition-colors',\n        'focus:outline-none focus:ring-2 focus:ring-emerald-500',\n        'border border-transparent',\n        isSelected && 'asset-selected'\n      )}\n    >\n      <div className=\"flex justify-between items-start mb-1\">\n        <div className=\"flex items-center gap-2\">\n          <button\n            onClick={handleWatchlistClick}\n            className={clsx(\n              'text-lg transition-colors focus:outline-none hover:scale-110',\n              isInWatchlist ? 'text-yellow-400' : 'text-gray-600 hover:text-yellow-400'\n            )}\n            aria-label={isInWatchlist ? `Remove ${symbol} from watchlist` : `Add ${symbol} to watchlist`}\n          >\n            {isInWatchlist ? '‚òÖ' : '‚òÜ'}\n          </button>\n          <span className=\"font-semibold text-white\">{symbol}</span>\n        </div>\n        <span className={clsx('text-xs px-2 py-0.5 rounded', colors.bg, colors.text)}>\n          {asset.type}\n        </span>\n      </div>\n      <div className=\"text-sm text-gray-400 mb-1\">{asset.name}</div>\n\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <div className=\"text-lg font-bold text-white price-animate\">{formatCurrency(price)}</div>\n          <div\n            className={clsx(\n              'text-sm flex items-center gap-1',\n              isPositive ? 'text-emerald-400' : 'text-red-400'\n            )}\n          >\n            <span aria-hidden=\"true\">{isPositive ? '‚ñ≤' : '‚ñº'}</span>\n            {formatCurrency(Math.abs(change))} ({formatPercent(changePercent)})\n          </div>\n        </div>\n\n        {priceHistory.length > 2 && (\n          <Sparkline\n            data={priceHistory}\n            width={60}\n            height={24}\n            className=\"opacity-80\"\n          />\n        )}\n      </div>\n    </div>\n  );\n}\n","import { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\nimport type { OrderType, AssetFilter, ChartTab, Timeframe } from '@/utils/constants';\n\ninterface Toast {\n  id: string;\n  message: string;\n  type: 'success' | 'error' | 'info';\n}\n\ninterface UIState {\n  orderType: OrderType;\n  timeframe: Timeframe;\n  chartTab: ChartTab;\n  assetFilter: AssetFilter;\n  toasts: Toast[];\n\n  // Actions\n  setOrderType: (orderType: OrderType) => void;\n  setTimeframe: (timeframe: Timeframe) => void;\n  setChartTab: (chartTab: ChartTab) => void;\n  setAssetFilter: (assetFilter: AssetFilter) => void;\n  showToast: (message: string, type?: Toast['type']) => void;\n  dismissToast: (id: string) => void;\n}\n\nexport const useUIStore = create<UIState>()(\n  persist(\n    (set) => ({\n      orderType: 'market',\n      timeframe: '1D',\n      chartTab: 'chart',\n      assetFilter: 'all',\n      toasts: [],\n\n      setOrderType: (orderType) => set({ orderType }),\n\n      setTimeframe: (timeframe) => set({ timeframe }),\n\n      setChartTab: (chartTab) => set({ chartTab }),\n\n      setAssetFilter: (assetFilter) => set({ assetFilter }),\n\n      showToast: (message, type = 'info') => {\n        const id = crypto.randomUUID();\n        set((state) => ({\n          toasts: [...state.toasts, { id, message, type }],\n        }));\n\n        // Auto-dismiss after 3 seconds\n        setTimeout(() => {\n          set((state) => ({\n            toasts: state.toasts.filter((t) => t.id !== id),\n          }));\n        }, 3000);\n      },\n\n      dismissToast: (id) =>\n        set((state) => ({\n          toasts: state.toasts.filter((t) => t.id !== id),\n        })),\n    }),\n    {\n      name: 'wall-street-ui',\n      storage: createJSONStorage(() => localStorage),\n      partialize: (state) => ({\n        orderType: state.orderType,\n        timeframe: state.timeframe,\n        chartTab: state.chartTab,\n        assetFilter: state.assetFilter,\n      }),\n    }\n  )\n);\n","import { Card } from '@/components/ui/Card';\nimport { Button } from '@/components/ui/Button';\nimport { AssetCard } from './AssetCard';\nimport { useMarketStore } from '@/store/marketStore';\nimport { useUIStore } from '@/store/uiStore';\nimport { ASSETS, type AssetFilter } from '@/utils/constants';\n\ninterface MarketOverviewProps {\n  className?: string;\n}\n\nconst filters: { value: AssetFilter; label: string }[] = [\n  { value: 'all', label: 'All' },\n  { value: 'stocks', label: 'Stocks' },\n  { value: 'commodities', label: 'Commodities' },\n  { value: 'bonds', label: 'Bonds' },\n];\n\nexport function MarketOverview({ className }: MarketOverviewProps) {\n  const prices = useMarketStore((state) => state.prices);\n  const selectedSymbol = useMarketStore((state) => state.selectedSymbol);\n  const selectSymbol = useMarketStore((state) => state.selectSymbol);\n\n  const assetFilter = useUIStore((state) => state.assetFilter);\n  const setAssetFilter = useUIStore((state) => state.setAssetFilter);\n\n  // Filter assets based on current filter\n  const filteredAssets = Object.entries(ASSETS).filter(([, asset]) => {\n    return assetFilter === 'all' || asset.type === assetFilter;\n  });\n\n  return (\n    <Card className={className} aria-labelledby=\"market-overview-title\">\n      <h2 id=\"market-overview-title\" className=\"text-lg font-semibold mb-4 text-gray-200\">\n        Market Overview\n      </h2>\n\n      {/* Filter buttons */}\n      <div className=\"flex flex-wrap gap-2 mb-4\" role=\"tablist\" aria-label=\"Filter assets by type\">\n        {filters.map((filter) => (\n          <Button\n            key={filter.value}\n            variant={assetFilter === filter.value ? 'primary' : 'secondary'}\n            size=\"sm\"\n            onClick={() => setAssetFilter(filter.value)}\n            role=\"tab\"\n            aria-selected={assetFilter === filter.value}\n          >\n            {filter.label}\n          </Button>\n        ))}\n      </div>\n\n      {/* Asset grid */}\n      <div\n        className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-80 overflow-y-auto\"\n        role=\"listbox\"\n        aria-label=\"Available assets\"\n      >\n        {filteredAssets.map(([symbol, asset]) => {\n          const priceData = prices[symbol] ?? { price: 0, change: 0, changePercent: 0 };\n\n          return (\n            <AssetCard\n              key={symbol}\n              symbol={symbol}\n              asset={asset}\n              price={priceData.price}\n              change={priceData.change}\n              changePercent={priceData.changePercent}\n              isSelected={selectedSymbol === symbol}\n              onSelect={selectSymbol}\n            />\n          );\n        })}\n      </div>\n    </Card>\n  );\n}\n","import { clsx } from 'clsx';\nimport type { InputHTMLAttributes } from 'react';\n\ninterface InputProps extends InputHTMLAttributes<HTMLInputElement> {\n  label?: string;\n  error?: string;\n}\n\nexport function Input({ label, error, className, id, ...props }: InputProps) {\n  const inputId = id || label?.toLowerCase().replace(/\\s+/g, '-');\n\n  return (\n    <div className=\"space-y-1\">\n      {label && (\n        <label\n          htmlFor={inputId}\n          className=\"block text-sm text-gray-400\"\n        >\n          {label}\n        </label>\n      )}\n      <input\n        id={inputId}\n        className={clsx(\n          'w-full px-3 py-2 bg-gray-700 border rounded-lg',\n          'focus:border-emerald-500 focus:outline-none focus:ring-1 focus:ring-emerald-500',\n          'transition-colors',\n          error ? 'border-red-500' : 'border-gray-600',\n          className\n        )}\n        {...props}\n      />\n      {error && (\n        <p className=\"text-sm text-red-400\">{error}</p>\n      )}\n    </div>\n  );\n}\n","import { useCallback, useRef } from 'react';\n\n/**\n * Hook for screen reader announcements\n */\nexport function useAnnouncer() {\n  const announcerRef = useRef<HTMLDivElement | null>(null);\n\n  const announce = useCallback((message: string, politeness: 'polite' | 'assertive' = 'polite') => {\n    // Try to find the announcer element\n    let announcer = announcerRef.current;\n\n    if (!announcer) {\n      announcer = document.getElementById('sr-announce') as HTMLDivElement;\n      announcerRef.current = announcer;\n    }\n\n    if (announcer) {\n      // Clear and set new message to trigger announcement\n      announcer.textContent = '';\n      announcer.setAttribute('aria-live', politeness);\n\n      // Use requestAnimationFrame to ensure the DOM updates\n      requestAnimationFrame(() => {\n        if (announcer) {\n          announcer.textContent = message;\n        }\n      });\n\n      // Clear after announcement\n      setTimeout(() => {\n        if (announcer) {\n          announcer.textContent = '';\n        }\n      }, 1000);\n    }\n  }, []);\n\n  return { announce };\n}\n","import { VALID_SYMBOLS } from './constants';\n\n/**\n * Validate a stock symbol\n */\nexport function isValidSymbol(symbol: string): boolean {\n  return (\n    typeof symbol === 'string' &&\n    symbol.length <= 10 &&\n    /^[A-Z0-9]+$/.test(symbol) &&\n    VALID_SYMBOLS.has(symbol)\n  );\n}\n\n/**\n * Validate a numeric value is within range\n */\nexport function isValidNumber(value: unknown, min = 0, max = Infinity): boolean {\n  const num = parseFloat(String(value));\n  return Number.isFinite(num) && num >= min && num <= max;\n}\n\n/**\n * Validate quantity for trading\n */\nexport function validateQuantity(quantity: unknown): quantity is number {\n  const num = Number(quantity);\n  return Number.isInteger(num) && num >= 1 && num <= 100000;\n}\n\n/**\n * Validate price for limit orders\n */\nexport function validatePrice(price: unknown): price is number {\n  const num = Number(price);\n  return Number.isFinite(num) && num > 0 && num <= 1000000;\n}\n\n/**\n * Sanitize and clamp a number to a range\n */\nexport function sanitizeNumber(\n  value: unknown,\n  min = 0,\n  max = Number.MAX_SAFE_INTEGER,\n  decimals = 2\n): number {\n  const num = parseFloat(String(value));\n  if (!Number.isFinite(num)) return min;\n  const clamped = Math.max(min, Math.min(max, num));\n  return Number(clamped.toFixed(decimals));\n}\n","import { useState, useCallback, useMemo } from 'react';\nimport { Card } from '@/components/ui/Card';\nimport { Button } from '@/components/ui/Button';\nimport { Input } from '@/components/ui/Input';\nimport { usePortfolioStore } from '@/store/portfolioStore';\nimport { useMarketStore } from '@/store/marketStore';\nimport { useUIStore } from '@/store/uiStore';\nimport { useAnnouncer } from '@/hooks/useAnnouncer';\nimport { formatCurrency } from '@/utils/formatters';\nimport { validateQuantity, validatePrice } from '@/utils/validators';\nimport { tradeRateLimiter } from '@/utils/security';\nimport { ASSETS } from '@/utils/constants';\n\ninterface TradingPanelProps {\n  className?: string;\n}\n\nexport function TradingPanel({ className }: TradingPanelProps) {\n  const [quantity, setQuantity] = useState(1);\n  const [limitPrice, setLimitPrice] = useState<string>('');\n\n  const selectedSymbol = useMarketStore((state) => state.selectedSymbol);\n  const prices = useMarketStore((state) => state.prices);\n  const currentPrice = prices[selectedSymbol]?.price ?? 0;\n\n  const cashBalance = usePortfolioStore((state) => state.cashBalance);\n  const positions = usePortfolioStore((state) => state.positions);\n  const executeTrade = usePortfolioStore((state) => state.executeTrade);\n\n  const orderType = useUIStore((state) => state.orderType);\n  const setOrderType = useUIStore((state) => state.setOrderType);\n  const showToast = useUIStore((state) => state.showToast);\n\n  const { announce } = useAnnouncer();\n\n  const asset = ASSETS[selectedSymbol];\n  const position = positions[selectedSymbol];\n\n  const price = useMemo(() => {\n    if (orderType === 'limit' && limitPrice) {\n      return parseFloat(limitPrice) || currentPrice;\n    }\n    return currentPrice;\n  }, [orderType, limitPrice, currentPrice]);\n\n  const estimatedTotal = quantity * price;\n  const maxShares = price > 0 ? Math.floor(cashBalance / price) : 0;\n\n  const handleQuantityChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = parseInt(e.target.value) || 0;\n    setQuantity(Math.max(0, Math.min(100000, value)));\n  };\n\n  const handleLimitPriceChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setLimitPrice(e.target.value);\n  };\n\n  const handleTrade = useCallback((type: 'buy' | 'sell') => {\n    // Rate limiting check\n    if (!tradeRateLimiter.check('trade')) {\n      showToast('Too many trades. Please wait a moment.', 'error');\n      return;\n    }\n\n    if (!validateQuantity(quantity)) {\n      showToast('Please enter a valid quantity (1-100,000)', 'error');\n      return;\n    }\n\n    if (orderType === 'limit' && !validatePrice(limitPrice)) {\n      showToast('Please enter a valid limit price', 'error');\n      return;\n    }\n\n    const success = executeTrade(type, selectedSymbol, quantity, price);\n\n    if (success) {\n      showToast(\n        `${type === 'buy' ? 'Bought' : 'Sold'} ${quantity} shares of ${selectedSymbol}`,\n        'success'\n      );\n      announce(\n        `Successfully ${type === 'buy' ? 'bought' : 'sold'} ${quantity} shares of ${selectedSymbol} at ${formatCurrency(price)} each`\n      );\n      setQuantity(1);\n    } else {\n      showToast(\n        type === 'buy' ? 'Insufficient funds' : 'Insufficient shares',\n        'error'\n      );\n    }\n  }, [quantity, limitPrice, price, selectedSymbol, orderType, executeTrade, showToast, announce]);\n\n  return (\n    <Card className={className} aria-labelledby=\"trading-title\">\n      <h2 id=\"trading-title\" className=\"text-lg font-semibold mb-4 text-gray-200\">\n        Trade\n      </h2>\n\n      {/* Selected Asset Info */}\n      <div className=\"mb-4 p-3 bg-gray-700 rounded-lg\">\n        <div className=\"text-sm text-gray-400\">Selected Asset</div>\n        <div className=\"text-xl font-bold text-emerald-400\">{selectedSymbol}</div>\n        <div className=\"text-sm text-gray-400\">{asset?.name}</div>\n        <div className=\"text-lg\">{formatCurrency(currentPrice)}</div>\n        {position && (\n          <div className=\"text-sm text-gray-400 mt-1\">\n            You own: {position.quantity} shares\n          </div>\n        )}\n      </div>\n\n      {/* Order Type Selection */}\n      <div className=\"flex gap-2 mb-3\" role=\"group\" aria-label=\"Order type selection\">\n        <Button\n          variant={orderType === 'market' ? 'primary' : 'secondary'}\n          onClick={() => setOrderType('market')}\n          aria-pressed={orderType === 'market'}\n          className=\"flex-1\"\n        >\n          Market\n        </Button>\n        <Button\n          variant={orderType === 'limit' ? 'primary' : 'secondary'}\n          onClick={() => setOrderType('limit')}\n          aria-pressed={orderType === 'limit'}\n          className=\"flex-1\"\n        >\n          Limit\n        </Button>\n      </div>\n\n      {/* Order Form */}\n      <div className=\"space-y-3 mb-4\">\n        <Input\n          label=\"Quantity\"\n          type=\"number\"\n          min={1}\n          max={100000}\n          value={quantity}\n          onChange={handleQuantityChange}\n          aria-describedby=\"maxSharesHint\"\n        />\n\n        {orderType === 'limit' && (\n          <Input\n            label=\"Limit Price\"\n            type=\"number\"\n            step={0.01}\n            min={0.01}\n            value={limitPrice || currentPrice.toFixed(2)}\n            onChange={handleLimitPriceChange}\n          />\n        )}\n\n        <div className=\"text-sm text-gray-400\">\n          Estimated Total:{' '}\n          <span className=\"text-white font-semibold\">\n            {formatCurrency(estimatedTotal)}\n          </span>\n        </div>\n\n        <div id=\"maxSharesHint\" className=\"text-sm text-gray-400\">\n          Max Shares: <span className=\"text-white\">{maxShares.toLocaleString()}</span>\n        </div>\n      </div>\n\n      {/* Buy/Sell Buttons */}\n      <div className=\"grid grid-cols-2 gap-3\">\n        <Button\n          variant=\"success\"\n          size=\"lg\"\n          onClick={() => handleTrade('buy')}\n          aria-label=\"Buy selected asset\"\n          className=\"glow-green\"\n        >\n          BUY\n        </Button>\n        <Button\n          variant=\"danger\"\n          size=\"lg\"\n          onClick={() => handleTrade('sell')}\n          aria-label=\"Sell selected asset\"\n          className=\"glow-red\"\n        >\n          SELL\n        </Button>\n      </div>\n    </Card>\n  );\n}\n","import { useState, useEffect, useMemo } from 'react';\nimport { Card } from '@/components/ui/Card';\nimport { formatPercent } from '@/utils/formatters';\nimport { clsx } from 'clsx';\n\ninterface MarketStatusProps {\n  className?: string;\n}\n\nexport function MarketStatus({ className }: MarketStatusProps) {\n  const [indices, setIndices] = useState({\n    sp500: 1.24,\n    nasdaq: 1.56,\n    dow: -0.32,\n    vix: 16.42,\n  });\n\n  // Simulate market index movements\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setIndices({\n        sp500: (Math.random() - 0.3) * 2,\n        nasdaq: (Math.random() - 0.3) * 2.5,\n        dow: (Math.random() - 0.5) * 1.5,\n        vix: 15 + Math.random() * 5,\n      });\n    }, 5000);\n\n    return () => clearInterval(interval);\n  }, []);\n\n  // Check if market is open (simplified - just checks weekday and hours)\n  const isMarketOpen = useMemo(() => {\n    const now = new Date();\n    const day = now.getDay();\n    const hour = now.getHours();\n\n    // Weekday between 9:30 AM and 4:00 PM ET (simplified)\n    const isWeekday = day >= 1 && day <= 5;\n    const isDuringHours = hour >= 9 && hour < 16;\n\n    return isWeekday && isDuringHours;\n  }, []);\n\n  // Simulated volume\n  const volume = useMemo(() => {\n    return `${(2 + Math.random() * 2).toFixed(1)}B`;\n  }, []);\n\n  return (\n    <Card className={className} aria-labelledby=\"market-status-title\">\n      <h2 id=\"market-status-title\" className=\"text-lg font-semibold mb-4 text-gray-200\">\n        Market Status\n      </h2>\n\n      <dl className=\"space-y-3 sm:space-y-4\">\n        <div className=\"flex justify-between items-center\">\n          <dt className=\"text-gray-400\">Market Hours</dt>\n          <dd className={clsx('font-semibold', isMarketOpen ? 'text-emerald-400' : 'text-red-400')}>\n            {isMarketOpen ? 'Open' : 'Closed'}\n          </dd>\n        </div>\n\n        <div className=\"flex justify-between items-center\">\n          <dt className=\"text-gray-400\">S&P 500</dt>\n          <dd className={clsx(indices.sp500 >= 0 ? 'text-emerald-400' : 'text-red-400')}>\n            {formatPercent(indices.sp500)}\n          </dd>\n        </div>\n\n        <div className=\"flex justify-between items-center\">\n          <dt className=\"text-gray-400\">NASDAQ</dt>\n          <dd className={clsx(indices.nasdaq >= 0 ? 'text-emerald-400' : 'text-red-400')}>\n            {formatPercent(indices.nasdaq)}\n          </dd>\n        </div>\n\n        <div className=\"flex justify-between items-center\">\n          <dt className=\"text-gray-400\">DOW</dt>\n          <dd className={clsx(indices.dow >= 0 ? 'text-emerald-400' : 'text-red-400')}>\n            {formatPercent(indices.dow)}\n          </dd>\n        </div>\n\n        <div className=\"flex justify-between items-center\">\n          <dt className=\"text-gray-400\">VIX</dt>\n          <dd className=\"text-yellow-400\">{indices.vix.toFixed(2)}</dd>\n        </div>\n\n        <div className=\"flex justify-between items-center\">\n          <dt className=\"text-gray-400\">Volume</dt>\n          <dd className=\"text-gray-200\">{volume}</dd>\n        </div>\n      </dl>\n    </Card>\n  );\n}\n","import { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\nimport { generateId } from '@/utils/security';\n\nexport interface StopLossOrder {\n  id: string;\n  symbol: string;\n  triggerPrice: number;\n  quantity: number;\n  createdAt: number;\n  triggered: boolean;\n  triggeredAt?: number;\n  executedPrice?: number;\n}\n\ninterface StopLossState {\n  orders: StopLossOrder[];\n\n  // Actions\n  addStopLoss: (symbol: string, triggerPrice: number, quantity: number) => void;\n  removeStopLoss: (id: string) => void;\n  triggerStopLoss: (id: string, executedPrice: number) => void;\n  getActiveOrders: () => StopLossOrder[];\n  getOrdersForSymbol: (symbol: string) => StopLossOrder[];\n  checkStopLosses: (\n    prices: Record<string, { price: number }>,\n    positions: Record<string, { quantity: number }>\n  ) => StopLossOrder[];\n}\n\nexport const useStopLossStore = create<StopLossState>()(\n  persist(\n    (set, get) => ({\n      orders: [],\n\n      addStopLoss: (symbol, triggerPrice, quantity) => {\n        const newOrder: StopLossOrder = {\n          id: generateId(),\n          symbol,\n          triggerPrice,\n          quantity,\n          createdAt: Date.now(),\n          triggered: false,\n        };\n        set((state) => ({\n          orders: [...state.orders, newOrder],\n        }));\n      },\n\n      removeStopLoss: (id) => {\n        set((state) => ({\n          orders: state.orders.filter((o) => o.id !== id),\n        }));\n      },\n\n      triggerStopLoss: (id, executedPrice) => {\n        set((state) => ({\n          orders: state.orders.map((o) =>\n            o.id === id\n              ? { ...o, triggered: true, triggeredAt: Date.now(), executedPrice }\n              : o\n          ),\n        }));\n      },\n\n      getActiveOrders: () => {\n        return get().orders.filter((o) => !o.triggered);\n      },\n\n      getOrdersForSymbol: (symbol) => {\n        return get().orders.filter((o) => o.symbol === symbol && !o.triggered);\n      },\n\n      checkStopLosses: (prices, positions) => {\n        const state = get();\n        const triggered: StopLossOrder[] = [];\n\n        state.orders.forEach((order) => {\n          if (order.triggered) return;\n\n          const priceData = prices[order.symbol];\n          const position = positions[order.symbol];\n\n          if (!priceData || !position) return;\n\n          const currentPrice = priceData.price;\n\n          // Stop loss triggers when price falls below trigger price\n          if (currentPrice <= order.triggerPrice) {\n            // Only trigger if we still have enough shares\n            if (position.quantity >= order.quantity) {\n              triggered.push(order);\n            }\n          }\n        });\n\n        return triggered;\n      },\n    }),\n    {\n      name: 'wall-street-stop-loss',\n      storage: createJSONStorage(() => localStorage),\n    }\n  )\n);\n","import { useState, useRef, useEffect, type ReactNode } from 'react';\nimport { clsx } from 'clsx';\n\ninterface TooltipProps {\n  content: string;\n  children: ReactNode;\n  position?: 'top' | 'bottom' | 'left' | 'right';\n}\n\nexport function Tooltip({ content, children, position = 'top' }: TooltipProps) {\n  const [isVisible, setIsVisible] = useState(false);\n  const [coords, setCoords] = useState({ top: 0, left: 0 });\n  const triggerRef = useRef<HTMLDivElement>(null);\n  const tooltipRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (isVisible && triggerRef.current && tooltipRef.current) {\n      const trigger = triggerRef.current.getBoundingClientRect();\n      const tooltip = tooltipRef.current.getBoundingClientRect();\n\n      let top = 0;\n      let left = 0;\n\n      switch (position) {\n        case 'top':\n          top = trigger.top - tooltip.height - 8;\n          left = trigger.left + trigger.width / 2 - tooltip.width / 2;\n          break;\n        case 'bottom':\n          top = trigger.bottom + 8;\n          left = trigger.left + trigger.width / 2 - tooltip.width / 2;\n          break;\n        case 'left':\n          top = trigger.top + trigger.height / 2 - tooltip.height / 2;\n          left = trigger.left - tooltip.width - 8;\n          break;\n        case 'right':\n          top = trigger.top + trigger.height / 2 - tooltip.height / 2;\n          left = trigger.right + 8;\n          break;\n      }\n\n      // Keep tooltip within viewport\n      left = Math.max(8, Math.min(left, window.innerWidth - tooltip.width - 8));\n      top = Math.max(8, Math.min(top, window.innerHeight - tooltip.height - 8));\n\n      setCoords({ top, left });\n    }\n  }, [isVisible, position]);\n\n  return (\n    <>\n      <div\n        ref={triggerRef}\n        onMouseEnter={() => setIsVisible(true)}\n        onMouseLeave={() => setIsVisible(false)}\n        onFocus={() => setIsVisible(true)}\n        onBlur={() => setIsVisible(false)}\n        className=\"inline-flex items-center\"\n      >\n        {children}\n      </div>\n      {isVisible && (\n        <div\n          ref={tooltipRef}\n          className={clsx(\n            'fixed z-50 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg shadow-lg',\n            'border border-gray-700 max-w-xs',\n            'animate-fade-in'\n          )}\n          style={{ top: coords.top, left: coords.left }}\n          role=\"tooltip\"\n        >\n          {content}\n        </div>\n      )}\n    </>\n  );\n}\n\n// Glossary of trading terms\nexport const TRADING_GLOSSARY: Record<string, string> = {\n  'Market Order':\n    'An order to buy or sell immediately at the current market price. Execution is guaranteed, but the price is not.',\n  'Limit Order':\n    'An order to buy or sell at a specific price or better. The order will only execute if the market reaches your price.',\n  'Stop-Loss':\n    'An order to sell a security when it reaches a certain price, designed to limit losses.',\n  'P/L':\n    'Profit and Loss - the net gain or loss on your investment.',\n  'Position':\n    'The amount of a security that you own (long position) or owe (short position).',\n  'Portfolio':\n    'A collection of all your investments and cash holdings.',\n  'Volume':\n    'The number of shares or contracts traded during a given period.',\n  'Candlestick':\n    'A chart type showing open, high, low, and close prices for a time period.',\n  'Bid':\n    'The highest price a buyer is willing to pay for a security.',\n  'Ask':\n    'The lowest price a seller is willing to accept for a security.',\n  'Spread':\n    'The difference between the bid and ask prices.',\n  'Bull Market':\n    'A market condition where prices are rising or expected to rise.',\n  'Bear Market':\n    'A market condition where prices are falling or expected to fall.',\n  'Volatility':\n    'A measure of how much a security\\'s price fluctuates over time.',\n  'Dividend':\n    'A portion of a company\\'s earnings distributed to shareholders.',\n};\n\ninterface GlossaryTermProps {\n  term: string;\n  children?: ReactNode;\n}\n\nexport function GlossaryTerm({ term, children }: GlossaryTermProps) {\n  const definition = TRADING_GLOSSARY[term];\n\n  if (!definition) {\n    return <span>{children || term}</span>;\n  }\n\n  return (\n    <Tooltip content={definition}>\n      <span className=\"border-b border-dotted border-gray-500 cursor-help\">\n        {children || term}\n      </span>\n    </Tooltip>\n  );\n}\n","import { useState } from 'react';\nimport { Card } from '@/components/ui/Card';\nimport { Button } from '@/components/ui/Button';\nimport { Input } from '@/components/ui/Input';\nimport { useStopLossStore, type StopLossOrder } from '@/store/stopLossStore';\nimport { usePortfolioStore } from '@/store/portfolioStore';\nimport { useMarketStore } from '@/store/marketStore';\nimport { formatCurrency } from '@/utils/formatters';\nimport { GlossaryTerm } from '@/components/ui/Tooltip';\n\ninterface StopLossPanelProps {\n  className?: string;\n}\n\nexport function StopLossPanel({ className }: StopLossPanelProps) {\n  const [triggerPrice, setTriggerPrice] = useState('');\n  const [quantity, setQuantity] = useState('');\n\n  const orders = useStopLossStore((state) => state.orders);\n  const addStopLoss = useStopLossStore((state) => state.addStopLoss);\n  const removeStopLoss = useStopLossStore((state) => state.removeStopLoss);\n\n  const selectedSymbol = useMarketStore((state) => state.selectedSymbol);\n  const prices = useMarketStore((state) => state.prices);\n  const currentPrice = prices[selectedSymbol]?.price ?? 0;\n\n  const positions = usePortfolioStore((state) => state.positions);\n  const position = positions[selectedSymbol];\n  const ownedShares = position?.quantity ?? 0;\n\n  const handleAddStopLoss = () => {\n    const price = parseFloat(triggerPrice);\n    const qty = parseInt(quantity);\n\n    if (isNaN(price) || price <= 0 || isNaN(qty) || qty <= 0) return;\n    if (qty > ownedShares) return;\n\n    addStopLoss(selectedSymbol, price, qty);\n    setTriggerPrice('');\n    setQuantity('');\n  };\n\n  const activeOrders = orders.filter((o) => !o.triggered);\n  const triggeredOrders = orders.filter((o) => o.triggered).slice(0, 5);\n\n  return (\n    <Card className={className}>\n      <h2 className=\"text-lg font-semibold mb-4 text-gray-200 flex items-center gap-2\">\n        <span>üõ°Ô∏è</span> <GlossaryTerm term=\"Stop-Loss\">Stop-Loss Orders</GlossaryTerm>\n      </h2>\n\n      {/* Add Stop Loss Form */}\n      <div className=\"mb-4 p-3 bg-gray-700/50 rounded-lg\">\n        <div className=\"text-sm text-gray-400 mb-2\">\n          Set stop-loss for{' '}\n          <span className=\"text-emerald-400 font-semibold\">{selectedSymbol}</span>\n          {ownedShares > 0 && (\n            <span className=\"text-gray-500 ml-2\">(You own: {ownedShares} shares)</span>\n          )}\n        </div>\n\n        {ownedShares === 0 ? (\n          <p className=\"text-gray-500 text-sm\">\n            You need to own shares of {selectedSymbol} to set a stop-loss.\n          </p>\n        ) : (\n          <>\n            <div className=\"text-xs text-gray-500 mb-2\">\n              Current price: {formatCurrency(currentPrice)}\n            </div>\n            <div className=\"grid grid-cols-2 gap-2 mb-2\">\n              <Input\n                type=\"number\"\n                step=\"0.01\"\n                min=\"0.01\"\n                max={currentPrice}\n                value={triggerPrice}\n                onChange={(e) => setTriggerPrice(e.target.value)}\n                placeholder=\"Trigger price\"\n                label=\"Trigger Price\"\n              />\n              <Input\n                type=\"number\"\n                min=\"1\"\n                max={ownedShares}\n                value={quantity}\n                onChange={(e) => setQuantity(e.target.value)}\n                placeholder=\"Quantity\"\n                label=\"Quantity\"\n              />\n            </div>\n            <Button\n              onClick={handleAddStopLoss}\n              disabled={!triggerPrice || !quantity}\n              className=\"w-full\"\n            >\n              Set Stop-Loss\n            </Button>\n          </>\n        )}\n      </div>\n\n      {/* Active Orders */}\n      {activeOrders.length > 0 && (\n        <div className=\"mb-4\">\n          <h3 className=\"text-sm font-semibold text-gray-400 mb-2\">Active Orders</h3>\n          <div className=\"space-y-2\">\n            {activeOrders.map((order) => (\n              <StopLossItem key={order.id} order={order} onRemove={removeStopLoss} />\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Triggered Orders */}\n      {triggeredOrders.length > 0 && (\n        <div>\n          <h3 className=\"text-sm font-semibold text-gray-400 mb-2\">Recently Triggered</h3>\n          <div className=\"space-y-2 opacity-60\">\n            {triggeredOrders.map((order) => (\n              <StopLossItem key={order.id} order={order} onRemove={removeStopLoss} triggered />\n            ))}\n          </div>\n        </div>\n      )}\n\n      {orders.length === 0 && (\n        <p className=\"text-center text-gray-500 py-2\">No stop-loss orders</p>\n      )}\n    </Card>\n  );\n}\n\ninterface StopLossItemProps {\n  order: StopLossOrder;\n  onRemove: (id: string) => void;\n  triggered?: boolean;\n}\n\nfunction StopLossItem({ order, onRemove, triggered }: StopLossItemProps) {\n  return (\n    <div\n      className={`flex items-center justify-between p-2 rounded-lg ${\n        triggered ? 'bg-red-900/30' : 'bg-gray-700/50'\n      }`}\n    >\n      <div className=\"flex-1\">\n        <div className=\"flex items-center gap-2\">\n          <span className=\"font-semibold text-white\">{order.symbol}</span>\n          <span className=\"text-xs text-gray-400\">{order.quantity} shares</span>\n          {triggered && <span className=\"text-xs text-red-400\">‚úì Executed</span>}\n        </div>\n        <div className=\"text-sm text-gray-400\">\n          Trigger @ <span className=\"text-red-400\">{formatCurrency(order.triggerPrice)}</span>\n          {order.executedPrice && (\n            <span className=\"ml-2\">\n              ‚Üí Sold @ {formatCurrency(order.executedPrice)}\n            </span>\n          )}\n        </div>\n      </div>\n      {!triggered && (\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          onClick={() => onRemove(order.id)}\n          aria-label=\"Remove stop-loss\"\n        >\n          ‚úï\n        </Button>\n      )}\n    </div>\n  );\n}\n","// Finnhub API Response Types\n\nexport interface FinnhubQuote {\n  c: number;  // Current price\n  d: number;  // Change\n  dp: number; // Percent change\n  h: number;  // High price of the day\n  l: number;  // Low price of the day\n  o: number;  // Open price of the day\n  pc: number; // Previous close price\n  t: number;  // Timestamp\n}\n\nexport interface FinnhubCandle {\n  c: number[];  // Close prices\n  h: number[];  // High prices\n  l: number[];  // Low prices\n  o: number[];  // Open prices\n  v: number[];  // Volumes\n  t: number[];  // Timestamps (UNIX)\n  s: 'ok' | 'no_data';\n}\n\nexport interface FinnhubWebSocketTrade {\n  type: 'trade';\n  data: Array<{\n    s: string;  // Symbol\n    p: number;  // Last price\n    t: number;  // UNIX timestamp in milliseconds\n    v: number;  // Volume\n    c?: string[]; // Conditions\n  }>;\n}\n\nexport interface FinnhubWebSocketPing {\n  type: 'ping';\n}\n\nexport type FinnhubWebSocketMessage = FinnhubWebSocketTrade | FinnhubWebSocketPing;\n\nexport interface FinnhubError {\n  error: string;\n}\n\n// Custom error for rate limiting\nexport class RateLimitError extends Error {\n  constructor(message = 'Rate limit exceeded') {\n    super(message);\n    this.name = 'RateLimitError';\n  }\n}\n\n// Custom error for API errors\nexport class APIError extends Error {\n  status: number;\n\n  constructor(message: string, status: number) {\n    super(message);\n    this.name = 'APIError';\n    this.status = status;\n  }\n}\n","import { config } from './config';\nimport { apiRateLimiter } from '@/utils/security';\nimport type { FinnhubQuote, FinnhubCandle } from './types';\nimport { RateLimitError, APIError } from './types';\n\n/**\n * Finnhub REST API Client\n */\nclass FinnhubClient {\n  private baseUrl: string;\n  private apiKey: string;\n\n  constructor() {\n    this.baseUrl = config.baseUrl;\n    this.apiKey = config.apiKey;\n  }\n\n  /**\n   * Check if API is available\n   */\n  isAvailable(): boolean {\n    return config.hasApiKey;\n  }\n\n  /**\n   * Make an authenticated API request\n   */\n  private async request<T>(endpoint: string, params: Record<string, string> = {}): Promise<T> {\n    if (!this.isAvailable()) {\n      throw new Error('Finnhub API key not configured');\n    }\n\n    // Wait for rate limiter\n    await apiRateLimiter.acquire();\n\n    const url = new URL(`${this.baseUrl}${endpoint}`);\n    url.searchParams.set('token', this.apiKey);\n    Object.entries(params).forEach(([key, value]) => {\n      url.searchParams.set(key, value);\n    });\n\n    const response = await fetch(url.toString());\n\n    if (response.status === 429) {\n      throw new RateLimitError();\n    }\n\n    if (!response.ok) {\n      throw new APIError(`API error: ${response.statusText}`, response.status);\n    }\n\n    return response.json();\n  }\n\n  /**\n   * Get current quote for a symbol\n   */\n  async getQuote(symbol: string): Promise<FinnhubQuote> {\n    return this.request<FinnhubQuote>('/quote', { symbol });\n  }\n\n  /**\n   * Get candlestick data for a symbol\n   * @param symbol - Stock symbol\n   * @param resolution - Supported resolution includes 1, 5, 15, 30, 60, D, W, M\n   * @param from - UNIX timestamp for start\n   * @param to - UNIX timestamp for end\n   */\n  async getCandles(\n    symbol: string,\n    resolution: string,\n    from: number,\n    to: number\n  ): Promise<FinnhubCandle> {\n    return this.request<FinnhubCandle>('/stock/candle', {\n      symbol,\n      resolution,\n      from: String(from),\n      to: String(to),\n    });\n  }\n\n  /**\n   * Get multiple quotes at once\n   */\n  async getQuotes(symbols: string[]): Promise<Record<string, FinnhubQuote>> {\n    const quotes: Record<string, FinnhubQuote> = {};\n\n    // Fetch quotes sequentially to respect rate limits\n    for (const symbol of symbols) {\n      try {\n        quotes[symbol] = await this.getQuote(symbol);\n        // Small delay between requests\n        await new Promise((resolve) => setTimeout(resolve, 100));\n      } catch (error) {\n        console.warn(`Failed to fetch quote for ${symbol}:`, error);\n      }\n    }\n\n    return quotes;\n  }\n}\n\n// Export singleton instance\nexport const finnhub = new FinnhubClient();\n","import { useQuery } from '@tanstack/react-query';\nimport { finnhub } from '@/api/finnhub';\nimport { TIMEFRAME_RESOLUTION, type Timeframe } from '@/utils/constants';\nimport type { CandleData } from '@/store/types';\n\n/**\n * Calculate time range based on timeframe\n */\nfunction getTimeRange(timeframe: Timeframe): { from: number; to: number } {\n  const now = Math.floor(Date.now() / 1000);\n  const day = 86400;\n\n  switch (timeframe) {\n    case '1D':\n      return { from: now - day, to: now };\n    case '5D':\n      return { from: now - day * 5, to: now };\n    case '1M':\n      return { from: now - day * 30, to: now };\n    case '3M':\n      return { from: now - day * 90, to: now };\n    case '1Y':\n      return { from: now - day * 365, to: now };\n    default:\n      return { from: now - day, to: now };\n  }\n}\n\n/**\n * Generate simulated candlestick data for fallback\n */\nfunction generateSimulatedCandles(basePrice: number, count: number): CandleData[] {\n  const candles: CandleData[] = [];\n  const now = Date.now();\n  const interval = 300000; // 5 minutes in ms\n\n  let price = basePrice * 0.98;\n\n  for (let i = count - 1; i >= 0; i--) {\n    const open = price;\n    const change = (Math.random() - 0.48) * (basePrice * 0.01);\n    const close = Math.max(0.01, price + change);\n    const high = Math.max(open, close) * (1 + Math.random() * 0.005);\n    const low = Math.min(open, close) * (1 - Math.random() * 0.005);\n    const volume = Math.floor(Math.random() * 1000000) + 100000;\n\n    candles.push({\n      time: Math.floor((now - i * interval) / 1000),\n      open,\n      high,\n      low,\n      close,\n      volume,\n    });\n\n    price = close;\n  }\n\n  return candles;\n}\n\n/**\n * Hook to fetch candlestick data for a symbol\n */\nexport function useCandlestick(symbol: string, timeframe: Timeframe, basePrice?: number) {\n  return useQuery({\n    queryKey: ['candles', symbol, timeframe],\n    queryFn: async (): Promise<CandleData[]> => {\n      if (!finnhub.isAvailable()) {\n        // Return simulated data if no API key\n        return generateSimulatedCandles(basePrice ?? 100, 50);\n      }\n\n      const resolution = TIMEFRAME_RESOLUTION[timeframe];\n      const { from, to } = getTimeRange(timeframe);\n\n      const data = await finnhub.getCandles(symbol, resolution, from, to);\n\n      if (data.s === 'no_data' || !data.t || data.t.length === 0) {\n        // Return simulated data if no real data available\n        return generateSimulatedCandles(basePrice ?? 100, 50);\n      }\n\n      // Transform to our format\n      return data.t.map((time, i) => ({\n        time,\n        open: data.o[i],\n        high: data.h[i],\n        low: data.l[i],\n        close: data.c[i],\n        volume: data.v[i],\n      }));\n    },\n    staleTime: 60000, // Consider fresh for 1 minute\n    refetchInterval: 60000, // Refetch every minute\n    retry: 1,\n  });\n}\n","import { useEffect, useRef } from 'react';\nimport { createChart, IChartApi, ISeriesApi, CandlestickData, Time } from 'lightweight-charts';\nimport { useCandlestick } from '@/hooks/useCandlestick';\nimport { useMarketStore } from '@/store/marketStore';\nimport { useUIStore } from '@/store/uiStore';\n\nexport function PriceChart() {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const chartRef = useRef<IChartApi | null>(null);\n  const seriesRef = useRef<ISeriesApi<'Candlestick'> | null>(null);\n\n  const selectedSymbol = useMarketStore((state) => state.selectedSymbol);\n  const prices = useMarketStore((state) => state.prices);\n  const timeframe = useUIStore((state) => state.timeframe);\n\n  const basePrice = prices[selectedSymbol]?.price ?? 100;\n  const { data, isLoading } = useCandlestick(selectedSymbol, timeframe, basePrice);\n\n  // Initialize chart\n  useEffect(() => {\n    if (!containerRef.current) return;\n\n    const chart = createChart(containerRef.current, {\n      width: containerRef.current.clientWidth,\n      height: 300,\n      layout: {\n        background: { color: 'transparent' },\n        textColor: '#9ca3af',\n      },\n      grid: {\n        vertLines: { color: 'rgba(75, 85, 99, 0.3)' },\n        horzLines: { color: 'rgba(75, 85, 99, 0.3)' },\n      },\n      timeScale: {\n        borderColor: '#4b5563',\n        timeVisible: true,\n        secondsVisible: false,\n      },\n      rightPriceScale: {\n        borderColor: '#4b5563',\n      },\n      crosshair: {\n        vertLine: {\n          color: '#6b7280',\n          labelBackgroundColor: '#374151',\n        },\n        horzLine: {\n          color: '#6b7280',\n          labelBackgroundColor: '#374151',\n        },\n      },\n    });\n\n    const candlestickSeries = chart.addCandlestickSeries({\n      upColor: '#10b981',\n      downColor: '#ef4444',\n      borderUpColor: '#10b981',\n      borderDownColor: '#ef4444',\n      wickUpColor: '#10b981',\n      wickDownColor: '#ef4444',\n    });\n\n    chartRef.current = chart;\n    seriesRef.current = candlestickSeries;\n\n    // Handle resize\n    const handleResize = () => {\n      if (containerRef.current) {\n        chart.applyOptions({ width: containerRef.current.clientWidth });\n      }\n    };\n\n    const resizeObserver = new ResizeObserver(handleResize);\n    resizeObserver.observe(containerRef.current);\n\n    return () => {\n      resizeObserver.disconnect();\n      chart.remove();\n    };\n  }, []);\n\n  // Update data when it changes\n  useEffect(() => {\n    if (!seriesRef.current || !data) return;\n\n    const chartData: CandlestickData[] = data.map((candle) => ({\n      time: candle.time as Time,\n      open: candle.open,\n      high: candle.high,\n      low: candle.low,\n      close: candle.close,\n    }));\n\n    seriesRef.current.setData(chartData);\n    chartRef.current?.timeScale().fitContent();\n  }, [data]);\n\n  return (\n    <div className=\"relative\">\n      {isLoading && (\n        <div className=\"absolute inset-0 flex items-center justify-center bg-gray-800/50 z-10\">\n          <div className=\"animate-pulse text-gray-400\">Loading chart...</div>\n        </div>\n      )}\n      <div\n        ref={containerRef}\n        className=\"w-full\"\n        role=\"img\"\n        aria-label={`Candlestick price chart for ${selectedSymbol}`}\n      />\n    </div>\n  );\n}\n","import { useEffect, useRef } from 'react';\nimport { createChart, IChartApi, ISeriesApi, HistogramData, Time } from 'lightweight-charts';\nimport { useCandlestick } from '@/hooks/useCandlestick';\nimport { useMarketStore } from '@/store/marketStore';\nimport { useUIStore } from '@/store/uiStore';\n\nexport function VolumeChart() {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const chartRef = useRef<IChartApi | null>(null);\n  const seriesRef = useRef<ISeriesApi<'Histogram'> | null>(null);\n\n  const selectedSymbol = useMarketStore((state) => state.selectedSymbol);\n  const prices = useMarketStore((state) => state.prices);\n  const timeframe = useUIStore((state) => state.timeframe);\n\n  const basePrice = prices[selectedSymbol]?.price ?? 100;\n  const { data } = useCandlestick(selectedSymbol, timeframe, basePrice);\n\n  // Initialize chart\n  useEffect(() => {\n    if (!containerRef.current) return;\n\n    const chart = createChart(containerRef.current, {\n      width: containerRef.current.clientWidth,\n      height: 80,\n      layout: {\n        background: { color: 'transparent' },\n        textColor: '#9ca3af',\n      },\n      grid: {\n        vertLines: { visible: false },\n        horzLines: { visible: false },\n      },\n      timeScale: {\n        visible: false,\n      },\n      rightPriceScale: {\n        visible: false,\n      },\n      leftPriceScale: {\n        visible: false,\n      },\n      crosshair: {\n        vertLine: { visible: false },\n        horzLine: { visible: false },\n      },\n    });\n\n    const histogramSeries = chart.addHistogramSeries({\n      color: 'rgba(107, 114, 128, 0.5)',\n      priceFormat: {\n        type: 'volume',\n      },\n      priceScaleId: '',\n    });\n\n    chartRef.current = chart;\n    seriesRef.current = histogramSeries;\n\n    // Handle resize\n    const handleResize = () => {\n      if (containerRef.current) {\n        chart.applyOptions({ width: containerRef.current.clientWidth });\n      }\n    };\n\n    const resizeObserver = new ResizeObserver(handleResize);\n    resizeObserver.observe(containerRef.current);\n\n    return () => {\n      resizeObserver.disconnect();\n      chart.remove();\n    };\n  }, []);\n\n  // Update data when it changes\n  useEffect(() => {\n    if (!seriesRef.current || !data) return;\n\n    const volumeData: HistogramData[] = data.map((candle) => ({\n      time: candle.time as Time,\n      value: candle.volume ?? 0,\n      color: candle.close >= candle.open ? 'rgba(16, 185, 129, 0.5)' : 'rgba(239, 68, 68, 0.5)',\n    }));\n\n    seriesRef.current.setData(volumeData);\n  }, [data]);\n\n  return (\n    <div\n      ref={containerRef}\n      className=\"w-full mt-2\"\n      role=\"img\"\n      aria-label={`Volume chart for ${selectedSymbol}`}\n    />\n  );\n}\n","import { Button } from '@/components/ui/Button';\nimport { useUIStore } from '@/store/uiStore';\nimport { TIMEFRAMES } from '@/utils/constants';\n\nexport function ChartControls() {\n  const timeframe = useUIStore((state) => state.timeframe);\n  const setTimeframe = useUIStore((state) => state.setTimeframe);\n\n  return (\n    <div className=\"flex flex-wrap gap-2 mb-4\" role=\"group\" aria-label=\"Chart timeframe\">\n      {TIMEFRAMES.map((tf) => (\n        <Button\n          key={tf}\n          variant={timeframe === tf ? 'primary' : 'secondary'}\n          size=\"sm\"\n          onClick={() => setTimeframe(tf)}\n        >\n          {tf}\n        </Button>\n      ))}\n    </div>\n  );\n}\n","import { useMemo } from 'react';\nimport { useMarketStore } from '@/store/marketStore';\nimport { formatCurrency } from '@/utils/formatters';\n\nexport function OrderBook() {\n  const selectedSymbol = useMarketStore((state) => state.selectedSymbol);\n  const prices = useMarketStore((state) => state.prices);\n  const basePrice = prices[selectedSymbol]?.price ?? 100;\n\n  // Generate simulated order book data\n  const { bids, asks } = useMemo(() => {\n    const bids = [];\n    const asks = [];\n\n    for (let i = 0; i < 8; i++) {\n      const bidPrice = basePrice - (i + 1) * 0.05;\n      const bidSize = Math.floor(Math.random() * 500) + 100;\n      bids.push({ price: bidPrice, size: bidSize });\n\n      const askPrice = basePrice + (i + 1) * 0.05;\n      const askSize = Math.floor(Math.random() * 500) + 100;\n      asks.push({ price: askPrice, size: askSize });\n    }\n\n    return { bids, asks };\n  }, [basePrice]);\n\n  return (\n    <div className=\"grid grid-cols-2 gap-4\">\n      <div>\n        <h3 className=\"text-red-400 font-semibold mb-2\">Bids (Buy Orders)</h3>\n        <div className=\"space-y-1 text-sm\" role=\"list\" aria-label=\"Buy orders\">\n          {bids.map((bid, i) => (\n            <div key={i} className=\"flex justify-between text-red-400\" role=\"listitem\">\n              <span>{formatCurrency(bid.price)}</span>\n              <span>{bid.size}</span>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      <div>\n        <h3 className=\"text-emerald-400 font-semibold mb-2\">Asks (Sell Orders)</h3>\n        <div className=\"space-y-1 text-sm\" role=\"list\" aria-label=\"Sell orders\">\n          {asks.map((ask, i) => (\n            <div key={i} className=\"flex justify-between text-emerald-400\" role=\"listitem\">\n              <span>{formatCurrency(ask.price)}</span>\n              <span>{ask.size}</span>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n","const newsItems = [\n  {\n    title: 'Tech Stocks Rally on AI Optimism',\n    description: 'Major technology companies see gains as investors remain bullish on artificial intelligence developments.',\n    time: '2 hours ago',\n    positive: true,\n  },\n  {\n    title: 'Fed Signals Potential Rate Changes',\n    description: 'Federal Reserve officials hint at possible adjustments to monetary policy in upcoming meetings.',\n    time: '4 hours ago',\n    positive: false,\n  },\n  {\n    title: 'Energy Sector Shows Strong Performance',\n    description: 'Oil prices stabilize as global demand outlook improves, boosting energy stocks.',\n    time: '6 hours ago',\n    positive: true,\n  },\n  {\n    title: 'Semiconductor Demand Continues Growth',\n    description: 'Chip manufacturers report strong orders as data center and AI infrastructure investments accelerate.',\n    time: '8 hours ago',\n    positive: true,\n  },\n];\n\nexport function MarketNews() {\n  return (\n    <div className=\"space-y-3\">\n      {newsItems.map((item, i) => (\n        <article key={i} className=\"p-3 bg-gray-700 rounded-lg\">\n          <h3 className={`font-semibold ${item.positive ? 'text-emerald-400' : 'text-red-400'}`}>\n            {item.title}\n          </h3>\n          <p className=\"text-sm text-gray-400 mt-1\">{item.description}</p>\n          <time className=\"text-xs text-gray-500 mt-2 block\">{item.time}</time>\n        </article>\n      ))}\n    </div>\n  );\n}\n","import { Card } from '@/components/ui/Card';\nimport { Button } from '@/components/ui/Button';\nimport { PriceChart } from './PriceChart';\nimport { VolumeChart } from './VolumeChart';\nimport { ChartControls } from './ChartControls';\nimport { OrderBook } from './OrderBook';\nimport { MarketNews } from './MarketNews';\nimport { useUIStore } from '@/store/uiStore';\nimport { clsx } from 'clsx';\nimport type { ChartTab } from '@/utils/constants';\n\ninterface ChartSectionProps {\n  className?: string;\n}\n\nconst tabs: { value: ChartTab; label: string }[] = [\n  { value: 'chart', label: 'Price Chart' },\n  { value: 'orderbook', label: 'Order Book' },\n  { value: 'news', label: 'Market News' },\n];\n\nexport function ChartSection({ className }: ChartSectionProps) {\n  const chartTab = useUIStore((state) => state.chartTab);\n  const setChartTab = useUIStore((state) => state.setChartTab);\n\n  return (\n    <Card className={className} aria-labelledby=\"charts-title\">\n      <h2 id=\"charts-title\" className=\"sr-only\">Charts and Analysis</h2>\n\n      {/* Tab buttons */}\n      <div className=\"flex flex-wrap gap-2 mb-4\" role=\"tablist\" aria-label=\"Chart view options\">\n        {tabs.map((tab) => (\n          <Button\n            key={tab.value}\n            variant=\"secondary\"\n            size=\"sm\"\n            onClick={() => setChartTab(tab.value)}\n            role=\"tab\"\n            aria-selected={chartTab === tab.value}\n            aria-controls={`${tab.value}Content`}\n            className={clsx(chartTab === tab.value && 'tab-active')}\n          >\n            {tab.label}\n          </Button>\n        ))}\n      </div>\n\n      {/* Chart Tab */}\n      <div\n        id=\"chartContent\"\n        role=\"tabpanel\"\n        aria-labelledby=\"chartTabBtn\"\n        className={clsx(chartTab !== 'chart' && 'hidden')}\n      >\n        <ChartControls />\n        <PriceChart />\n        <VolumeChart />\n      </div>\n\n      {/* Order Book Tab */}\n      <div\n        id=\"orderbookContent\"\n        role=\"tabpanel\"\n        aria-labelledby=\"orderbookTabBtn\"\n        className={clsx(chartTab !== 'orderbook' && 'hidden')}\n      >\n        <OrderBook />\n      </div>\n\n      {/* News Tab */}\n      <div\n        id=\"newsContent\"\n        role=\"tabpanel\"\n        aria-labelledby=\"newsTabBtn\"\n        className={clsx(chartTab !== 'news' && 'hidden')}\n      >\n        <MarketNews />\n      </div>\n    </Card>\n  );\n}\n","import { useMemo } from 'react';\nimport { Card } from '@/components/ui/Card';\nimport { usePortfolioStore } from '@/store/portfolioStore';\nimport { useMarketStore } from '@/store/marketStore';\nimport { formatCurrency, formatPercent } from '@/utils/formatters';\nimport { INITIAL_CASH } from '@/utils/constants';\nimport { clsx } from 'clsx';\n\ninterface PortfolioSectionProps {\n  className?: string;\n}\n\nexport function PortfolioSection({ className }: PortfolioSectionProps) {\n  const positions = usePortfolioStore((state) => state.positions);\n  const cashBalance = usePortfolioStore((state) => state.cashBalance);\n  const prices = useMarketStore((state) => state.prices);\n\n  const { totalValue, totalPL, totalPLPercent, positionsList } = useMemo(() => {\n    let positionsValue = 0;\n    const list: Array<{\n      symbol: string;\n      quantity: number;\n      avgPrice: number;\n      currentValue: number;\n      pl: number;\n      plPercent: number;\n    }> = [];\n\n    Object.entries(positions).forEach(([symbol, position]) => {\n      const currentPrice = prices[symbol]?.price ?? position.avgPrice;\n      const currentValue = position.quantity * currentPrice;\n      const costBasis = position.quantity * position.avgPrice;\n      const pl = currentValue - costBasis;\n      const plPercent = costBasis > 0 ? (pl / costBasis) * 100 : 0;\n\n      positionsValue += currentValue;\n\n      list.push({\n        symbol,\n        quantity: position.quantity,\n        avgPrice: position.avgPrice,\n        currentValue,\n        pl,\n        plPercent,\n      });\n    });\n\n    const total = cashBalance + positionsValue;\n    const totalPL = total - INITIAL_CASH;\n    const totalPLPercent = (totalPL / INITIAL_CASH) * 100;\n\n    return {\n      totalValue: total,\n      totalPL,\n      totalPLPercent,\n      positionsList: list,\n    };\n  }, [positions, cashBalance, prices]);\n\n  return (\n    <Card className={className} aria-labelledby=\"portfolio-title\">\n      <h2 id=\"portfolio-title\" className=\"text-lg font-semibold mb-4 text-gray-200\">\n        Portfolio\n      </h2>\n\n      {/* Summary */}\n      <div className=\"mb-4 p-3 bg-gray-700 rounded-lg\">\n        <div className=\"flex justify-between\">\n          <span className=\"text-gray-400\">Total Value</span>\n          <span className={clsx('font-bold', totalPL >= 0 ? 'text-emerald-400' : 'text-red-400')}>\n            {formatCurrency(totalValue)}\n          </span>\n        </div>\n        <div className=\"flex justify-between mt-2\">\n          <span className=\"text-gray-400\">Total P/L</span>\n          <span className={clsx(totalPL >= 0 ? 'text-emerald-400' : 'text-red-400')}>\n            {formatCurrency(totalPL)} ({formatPercent(totalPLPercent)})\n          </span>\n        </div>\n      </div>\n\n      {/* Positions */}\n      <div className=\"space-y-2 max-h-60 overflow-y-auto\" role=\"list\" aria-label=\"Current positions\">\n        {positionsList.length === 0 ? (\n          <div className=\"text-center text-gray-500 py-4\">No positions yet</div>\n        ) : (\n          positionsList.map((position) => (\n            <div key={position.symbol} className=\"p-3 bg-gray-700 rounded-lg\" role=\"listitem\">\n              <div className=\"flex justify-between items-start\">\n                <div>\n                  <span className=\"font-semibold text-white\">{position.symbol}</span>\n                  <span className=\"text-gray-400 text-sm ml-2\">{position.quantity} shares</span>\n                </div>\n                <span className=\"text-white font-bold\">{formatCurrency(position.currentValue)}</span>\n              </div>\n              <div className=\"flex justify-between items-center mt-1 text-sm\">\n                <span className=\"text-gray-400\">Avg: {formatCurrency(position.avgPrice)}</span>\n                <span\n                  className={clsx(\n                    'flex items-center gap-1',\n                    position.pl >= 0 ? 'text-emerald-400' : 'text-red-400'\n                  )}\n                >\n                  <span aria-hidden=\"true\">{position.pl >= 0 ? '‚ñ≤' : '‚ñº'}</span>\n                  {formatCurrency(Math.abs(position.pl))} ({formatPercent(position.plPercent)})\n                </span>\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n    </Card>\n  );\n}\n","import type { Trade } from '@/store/types';\nimport { formatCurrency } from './formatters';\n\nexport function exportTradesToCsv(trades: Trade[]): void {\n  if (trades.length === 0) {\n    alert('No trades to export');\n    return;\n  }\n\n  // CSV headers\n  const headers = ['Date', 'Time', 'Type', 'Symbol', 'Quantity', 'Price', 'Total', 'ID'];\n\n  // Convert trades to CSV rows\n  const rows = trades.map((trade) => {\n    const date = new Date(trade.timestamp);\n    return [\n      date.toLocaleDateString(),\n      date.toLocaleTimeString(),\n      trade.type.toUpperCase(),\n      trade.symbol,\n      trade.quantity.toString(),\n      formatCurrency(trade.price),\n      formatCurrency(trade.total),\n      trade.id,\n    ];\n  });\n\n  // Combine headers and rows\n  const csvContent = [\n    headers.join(','),\n    ...rows.map((row) => row.map((cell) => `\"${cell}\"`).join(',')),\n  ].join('\\n');\n\n  // Create blob and download\n  const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n  const link = document.createElement('a');\n  const url = URL.createObjectURL(blob);\n\n  link.setAttribute('href', url);\n  link.setAttribute('download', `trade_history_${new Date().toISOString().split('T')[0]}.csv`);\n  link.style.visibility = 'hidden';\n\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n\n  URL.revokeObjectURL(url);\n}\n\nexport function exportPortfolioToCsv(\n  positions: Record<string, { symbol: string; quantity: number; avgPrice: number }>,\n  prices: Record<string, { price: number }>\n): void {\n  const positionList = Object.values(positions);\n\n  if (positionList.length === 0) {\n    alert('No positions to export');\n    return;\n  }\n\n  const headers = ['Symbol', 'Quantity', 'Avg Price', 'Current Price', 'Market Value', 'P/L', 'P/L %'];\n\n  const rows = positionList.map((pos) => {\n    const currentPrice = prices[pos.symbol]?.price ?? pos.avgPrice;\n    const marketValue = pos.quantity * currentPrice;\n    const costBasis = pos.quantity * pos.avgPrice;\n    const pl = marketValue - costBasis;\n    const plPercent = costBasis > 0 ? (pl / costBasis) * 100 : 0;\n\n    return [\n      pos.symbol,\n      pos.quantity.toString(),\n      formatCurrency(pos.avgPrice),\n      formatCurrency(currentPrice),\n      formatCurrency(marketValue),\n      formatCurrency(pl),\n      `${plPercent.toFixed(2)}%`,\n    ];\n  });\n\n  const csvContent = [\n    headers.join(','),\n    ...rows.map((row) => row.map((cell) => `\"${cell}\"`).join(',')),\n  ].join('\\n');\n\n  const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n  const link = document.createElement('a');\n  const url = URL.createObjectURL(blob);\n\n  link.setAttribute('href', url);\n  link.setAttribute('download', `portfolio_${new Date().toISOString().split('T')[0]}.csv`);\n  link.style.visibility = 'hidden';\n\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n\n  URL.revokeObjectURL(url);\n}\n","import { Card } from '@/components/ui/Card';\nimport { Button } from '@/components/ui/Button';\nimport { usePortfolioStore } from '@/store/portfolioStore';\nimport { formatCurrency, formatTime } from '@/utils/formatters';\nimport { exportTradesToCsv } from '@/utils/exportCsv';\nimport { clsx } from 'clsx';\n\ninterface TradeHistoryProps {\n  className?: string;\n}\n\nexport function TradeHistory({ className }: TradeHistoryProps) {\n  const tradeHistory = usePortfolioStore((state) => state.tradeHistory);\n\n  const handleExport = () => {\n    exportTradesToCsv(tradeHistory);\n  };\n\n  return (\n    <Card className={className} aria-labelledby=\"history-title\">\n      <div className=\"flex justify-between items-center mb-4\">\n        <h2 id=\"history-title\" className=\"text-lg font-semibold text-gray-200\">\n          Trade History\n        </h2>\n        {tradeHistory.length > 0 && (\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={handleExport}\n            aria-label=\"Export trade history to CSV\"\n            title=\"Export to CSV\"\n          >\n            üì• Export\n          </Button>\n        )}\n      </div>\n\n      <div className=\"space-y-2 max-h-80 overflow-y-auto\" role=\"list\" aria-label=\"Trade history\">\n        {tradeHistory.length === 0 ? (\n          <div className=\"text-center text-gray-500 py-4\">No trades yet</div>\n        ) : (\n          tradeHistory.slice(0, 20).map((trade) => (\n            <div key={trade.id} className=\"p-2 bg-gray-700 rounded text-sm\" role=\"listitem\">\n              <div className=\"flex justify-between items-center\">\n                <span\n                  className={clsx(\n                    'font-semibold',\n                    trade.type === 'buy' ? 'text-emerald-400' : 'text-red-400'\n                  )}\n                >\n                  {trade.type.toUpperCase()}\n                </span>\n                <span className=\"text-gray-400 text-xs\">\n                  {formatTime(trade.timestamp)}\n                </span>\n              </div>\n              <div className=\"flex justify-between items-center mt-1\">\n                <span className=\"text-white\">\n                  {trade.symbol} x{trade.quantity}\n                </span>\n                <span className=\"text-gray-300\">@ {formatCurrency(trade.price)}</span>\n              </div>\n              <div className=\"text-right text-gray-400 text-xs mt-1\">\n                Total: {formatCurrency(trade.total)}\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n    </Card>\n  );\n}\n","import { useMemo } from 'react';\nimport { Card } from '@/components/ui/Card';\nimport { usePortfolioStore } from '@/store/portfolioStore';\nimport { useMarketStore } from '@/store/marketStore';\nimport { formatCurrency, formatPercent, formatNumber } from '@/utils/formatters';\nimport { INITIAL_CASH, ASSETS } from '@/utils/constants';\nimport { clsx } from 'clsx';\n\ninterface AnalyticsDashboardProps {\n  className?: string;\n}\n\nexport function AnalyticsDashboard({ className }: AnalyticsDashboardProps) {\n  const positions = usePortfolioStore((state) => state.positions);\n  const cashBalance = usePortfolioStore((state) => state.cashBalance);\n  const tradeHistory = usePortfolioStore((state) => state.tradeHistory);\n  const prices = useMarketStore((state) => state.prices);\n\n  const analytics = useMemo(() => {\n    // Calculate portfolio value\n    let portfolioValue = cashBalance;\n    let unrealizedPL = 0;\n\n    Object.entries(positions).forEach(([symbol, pos]) => {\n      const price = prices[symbol]?.price ?? pos.avgPrice;\n      const currentValue = pos.quantity * price;\n      portfolioValue += currentValue;\n      unrealizedPL += pos.quantity * (price - pos.avgPrice);\n    });\n\n    // Calculate P/L\n    const totalPL = portfolioValue - INITIAL_CASH;\n    const totalPLPercent = (totalPL / INITIAL_CASH) * 100;\n\n    // Trade statistics\n    const buyTrades = tradeHistory.filter((t) => t.type === 'buy');\n    const sellTrades = tradeHistory.filter((t) => t.type === 'sell');\n    const avgTradeSize =\n      tradeHistory.length > 0\n        ? tradeHistory.reduce((sum, t) => sum + t.total, 0) / tradeHistory.length\n        : 0;\n\n    // Realized P/L from sell trades (simplified calculation)\n    const realizedPL = sellTrades.reduce((sum, trade) => {\n      const buyPrice = positions[trade.symbol]?.avgPrice ?? trade.price;\n      return sum + trade.quantity * (trade.price - buyPrice);\n    }, 0);\n\n    // Allocation breakdown\n    const allocations: Array<{ symbol: string; value: number; percent: number; color: string }> = [];\n\n    Object.entries(positions).forEach(([symbol, pos]) => {\n      const value = pos.quantity * (prices[symbol]?.price ?? pos.avgPrice);\n      const type = ASSETS[symbol]?.type ?? 'stocks';\n      const colors: Record<string, string> = {\n        stocks: '#3b82f6',\n        commodities: '#f59e0b',\n        bonds: '#a855f7',\n      };\n      allocations.push({\n        symbol,\n        value,\n        percent: (value / portfolioValue) * 100,\n        color: colors[type],\n      });\n    });\n\n    // Add cash to allocations\n    allocations.push({\n      symbol: 'Cash',\n      value: cashBalance,\n      percent: (cashBalance / portfolioValue) * 100,\n      color: '#6b7280',\n    });\n\n    // Sort by value descending\n    allocations.sort((a, b) => b.value - a.value);\n\n    // Win rate (simplified - based on sell trades above avg price)\n    const winningTrades = sellTrades.filter((trade) => {\n      const avgPrice = positions[trade.symbol]?.avgPrice ?? trade.price;\n      return trade.price > avgPrice;\n    });\n    const winRate = sellTrades.length > 0 ? (winningTrades.length / sellTrades.length) * 100 : 0;\n\n    return {\n      portfolioValue,\n      totalPL,\n      totalPLPercent,\n      unrealizedPL,\n      realizedPL,\n      totalTrades: tradeHistory.length,\n      buyTrades: buyTrades.length,\n      sellTrades: sellTrades.length,\n      avgTradeSize,\n      allocations,\n      winRate,\n    };\n  }, [positions, cashBalance, prices, tradeHistory]);\n\n  return (\n    <Card className={className}>\n      <h2 className=\"text-lg font-semibold mb-4 text-gray-200\">Portfolio Analytics</h2>\n\n      {/* Metric Cards */}\n      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6\">\n        <MetricCard\n          label=\"Portfolio Value\"\n          value={formatCurrency(analytics.portfolioValue)}\n          trend={analytics.totalPL >= 0 ? 'up' : 'down'}\n        />\n        <MetricCard\n          label=\"Total P/L\"\n          value={`${formatCurrency(analytics.totalPL)} (${formatPercent(analytics.totalPLPercent)})`}\n          trend={analytics.totalPL >= 0 ? 'up' : 'down'}\n        />\n        <MetricCard\n          label=\"Unrealized P/L\"\n          value={formatCurrency(analytics.unrealizedPL)}\n          trend={analytics.unrealizedPL >= 0 ? 'up' : 'down'}\n        />\n        <MetricCard\n          label=\"Total Trades\"\n          value={analytics.totalTrades.toString()}\n          subtitle={`${analytics.buyTrades} buys, ${analytics.sellTrades} sells`}\n        />\n      </div>\n\n      {/* Additional Stats */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\n        {/* Allocation Chart */}\n        <div className=\"p-4 bg-gray-700 rounded-lg\">\n          <h3 className=\"text-sm font-semibold text-gray-300 mb-3\">Portfolio Allocation</h3>\n          {analytics.allocations.length === 0 ? (\n            <p className=\"text-gray-500 text-sm\">No positions yet</p>\n          ) : (\n            <div className=\"space-y-2\">\n              {analytics.allocations.slice(0, 5).map((alloc) => (\n                <div key={alloc.symbol} className=\"flex items-center gap-2\">\n                  <div\n                    className=\"w-3 h-3 rounded-full\"\n                    style={{ backgroundColor: alloc.color }}\n                  />\n                  <span className=\"text-sm text-white flex-1\">{alloc.symbol}</span>\n                  <span className=\"text-sm text-gray-400\">{formatPercent(alloc.percent)}</span>\n                  <span className=\"text-sm text-gray-300\">{formatCurrency(alloc.value)}</span>\n                </div>\n              ))}\n\n              {/* Visual bar */}\n              <div className=\"h-4 rounded-full overflow-hidden flex mt-3\">\n                {analytics.allocations.map((alloc) => (\n                  <div\n                    key={alloc.symbol}\n                    style={{\n                      width: `${alloc.percent}%`,\n                      backgroundColor: alloc.color,\n                    }}\n                    title={`${alloc.symbol}: ${alloc.percent.toFixed(1)}%`}\n                  />\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Trading Stats */}\n        <div className=\"p-4 bg-gray-700 rounded-lg\">\n          <h3 className=\"text-sm font-semibold text-gray-300 mb-3\">Trading Statistics</h3>\n          <dl className=\"space-y-2 text-sm\">\n            <div className=\"flex justify-between\">\n              <dt className=\"text-gray-400\">Win Rate</dt>\n              <dd\n                className={clsx(\n                  analytics.winRate >= 50 ? 'text-emerald-400' : 'text-red-400'\n                )}\n              >\n                {formatNumber(analytics.winRate, 1)}%\n              </dd>\n            </div>\n            <div className=\"flex justify-between\">\n              <dt className=\"text-gray-400\">Avg Trade Size</dt>\n              <dd className=\"text-white\">{formatCurrency(analytics.avgTradeSize)}</dd>\n            </div>\n            <div className=\"flex justify-between\">\n              <dt className=\"text-gray-400\">Total Volume</dt>\n              <dd className=\"text-white\">\n                {formatCurrency(\n                  tradeHistory.reduce((sum, t) => sum + t.total, 0)\n                )}\n              </dd>\n            </div>\n            <div className=\"flex justify-between\">\n              <dt className=\"text-gray-400\">Cash Available</dt>\n              <dd className=\"text-emerald-400\">{formatCurrency(cashBalance)}</dd>\n            </div>\n          </dl>\n        </div>\n      </div>\n    </Card>\n  );\n}\n\n// Metric Card subcomponent\ninterface MetricCardProps {\n  label: string;\n  value: string;\n  trend?: 'up' | 'down';\n  subtitle?: string;\n}\n\nfunction MetricCard({ label, value, trend, subtitle }: MetricCardProps) {\n  return (\n    <div className=\"p-3 bg-gray-700 rounded-lg\">\n      <div className=\"text-xs text-gray-400 mb-1\">{label}</div>\n      <div\n        className={clsx(\n          'text-lg font-bold',\n          trend === 'up' && 'text-emerald-400',\n          trend === 'down' && 'text-red-400',\n          !trend && 'text-white'\n        )}\n      >\n        {value}\n      </div>\n      {subtitle && <div className=\"text-xs text-gray-500 mt-1\">{subtitle}</div>}\n    </div>\n  );\n}\n","import { Card } from '@/components/ui/Card';\nimport { Button } from '@/components/ui/Button';\nimport { useWatchlistStore } from '@/store/watchlistStore';\nimport { useMarketStore } from '@/store/marketStore';\nimport { ASSETS } from '@/utils/constants';\nimport { formatCurrency, formatPercent } from '@/utils/formatters';\nimport { clsx } from 'clsx';\n\ninterface WatchlistProps {\n  className?: string;\n}\n\nexport function Watchlist({ className }: WatchlistProps) {\n  const watchlist = useWatchlistStore((state) => state.watchlist);\n  const removeFromWatchlist = useWatchlistStore((state) => state.removeFromWatchlist);\n  const prices = useMarketStore((state) => state.prices);\n  const selectSymbol = useMarketStore((state) => state.selectSymbol);\n\n  if (watchlist.length === 0) {\n    return (\n      <Card className={className}>\n        <h2 className=\"text-lg font-semibold mb-4 text-gray-200 flex items-center gap-2\">\n          <span>‚≠ê</span> Watchlist\n        </h2>\n        <p className=\"text-center text-gray-500 py-4\">\n          No items in watchlist. Click the star on any asset to add it.\n        </p>\n      </Card>\n    );\n  }\n\n  return (\n    <Card className={className}>\n      <h2 className=\"text-lg font-semibold mb-4 text-gray-200 flex items-center gap-2\">\n        <span>‚≠ê</span> Watchlist ({watchlist.length})\n      </h2>\n      <div className=\"space-y-2 max-h-60 overflow-y-auto\">\n        {watchlist.map((symbol) => {\n          const asset = ASSETS[symbol];\n          const priceData = prices[symbol];\n          const price = priceData?.price ?? 0;\n          const change = priceData?.change ?? 0;\n          const changePercent = priceData?.changePercent ?? 0;\n          const isPositive = change >= 0;\n\n          return (\n            <div\n              key={symbol}\n              className=\"flex items-center justify-between p-2 bg-gray-700/50 rounded-lg hover:bg-gray-700 transition-colors cursor-pointer\"\n              onClick={() => selectSymbol(symbol)}\n            >\n              <div className=\"flex-1\">\n                <div className=\"font-semibold text-white\">{symbol}</div>\n                <div className=\"text-xs text-gray-400\">{asset?.name}</div>\n              </div>\n              <div className=\"text-right mr-2\">\n                <div className=\"font-semibold text-white\">{formatCurrency(price)}</div>\n                <div\n                  className={clsx(\n                    'text-xs',\n                    isPositive ? 'text-emerald-400' : 'text-red-400'\n                  )}\n                >\n                  {isPositive ? '‚ñ≤' : '‚ñº'} {formatPercent(changePercent)}\n                </div>\n              </div>\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={(e) => {\n                  e.stopPropagation();\n                  removeFromWatchlist(symbol);\n                }}\n                aria-label={`Remove ${symbol} from watchlist`}\n              >\n                ‚úï\n              </Button>\n            </div>\n          );\n        })}\n      </div>\n    </Card>\n  );\n}\n","import { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\nimport { generateId } from '@/utils/security';\n\nexport interface PriceAlert {\n  id: string;\n  symbol: string;\n  targetPrice: number;\n  condition: 'above' | 'below';\n  triggered: boolean;\n  createdAt: number;\n  triggeredAt?: number;\n}\n\ninterface AlertsState {\n  alerts: PriceAlert[];\n\n  // Actions\n  addAlert: (symbol: string, targetPrice: number, condition: 'above' | 'below') => void;\n  removeAlert: (id: string) => void;\n  triggerAlert: (id: string) => void;\n  clearTriggeredAlerts: () => void;\n  getActiveAlerts: () => PriceAlert[];\n  checkAlerts: (prices: Record<string, { price: number }>) => PriceAlert[];\n}\n\nexport const useAlertsStore = create<AlertsState>()(\n  persist(\n    (set, get) => ({\n      alerts: [],\n\n      addAlert: (symbol, targetPrice, condition) => {\n        const newAlert: PriceAlert = {\n          id: generateId(),\n          symbol,\n          targetPrice,\n          condition,\n          triggered: false,\n          createdAt: Date.now(),\n        };\n        set((state) => ({\n          alerts: [...state.alerts, newAlert],\n        }));\n      },\n\n      removeAlert: (id) => {\n        set((state) => ({\n          alerts: state.alerts.filter((a) => a.id !== id),\n        }));\n      },\n\n      triggerAlert: (id) => {\n        set((state) => ({\n          alerts: state.alerts.map((a) =>\n            a.id === id ? { ...a, triggered: true, triggeredAt: Date.now() } : a\n          ),\n        }));\n      },\n\n      clearTriggeredAlerts: () => {\n        set((state) => ({\n          alerts: state.alerts.filter((a) => !a.triggered),\n        }));\n      },\n\n      getActiveAlerts: () => {\n        return get().alerts.filter((a) => !a.triggered);\n      },\n\n      checkAlerts: (prices) => {\n        const state = get();\n        const triggered: PriceAlert[] = [];\n\n        state.alerts.forEach((alert) => {\n          if (alert.triggered) return;\n\n          const priceData = prices[alert.symbol];\n          if (!priceData) return;\n\n          const currentPrice = priceData.price;\n          const shouldTrigger =\n            (alert.condition === 'above' && currentPrice >= alert.targetPrice) ||\n            (alert.condition === 'below' && currentPrice <= alert.targetPrice);\n\n          if (shouldTrigger) {\n            triggered.push(alert);\n            get().triggerAlert(alert.id);\n          }\n        });\n\n        return triggered;\n      },\n    }),\n    {\n      name: 'wall-street-alerts',\n      storage: createJSONStorage(() => localStorage),\n    }\n  )\n);\n","import { useState } from 'react';\nimport { Card } from '@/components/ui/Card';\nimport { Button } from '@/components/ui/Button';\nimport { Input } from '@/components/ui/Input';\nimport { useAlertsStore, type PriceAlert } from '@/store/alertsStore';\nimport { useMarketStore } from '@/store/marketStore';\nimport { ASSETS } from '@/utils/constants';\nimport { formatCurrency } from '@/utils/formatters';\nimport { clsx } from 'clsx';\n\ninterface PriceAlertsProps {\n  className?: string;\n}\n\nexport function PriceAlerts({ className }: PriceAlertsProps) {\n  const [targetPrice, setTargetPrice] = useState('');\n  const [condition, setCondition] = useState<'above' | 'below'>('above');\n\n  const alerts = useAlertsStore((state) => state.alerts);\n  const addAlert = useAlertsStore((state) => state.addAlert);\n  const removeAlert = useAlertsStore((state) => state.removeAlert);\n  const clearTriggeredAlerts = useAlertsStore((state) => state.clearTriggeredAlerts);\n\n  const selectedSymbol = useMarketStore((state) => state.selectedSymbol);\n  const prices = useMarketStore((state) => state.prices);\n  const currentPrice = prices[selectedSymbol]?.price ?? 0;\n\n  const handleAddAlert = () => {\n    const price = parseFloat(targetPrice);\n    if (isNaN(price) || price <= 0) return;\n\n    addAlert(selectedSymbol, price, condition);\n    setTargetPrice('');\n  };\n\n  const activeAlerts = alerts.filter((a) => !a.triggered);\n  const triggeredAlerts = alerts.filter((a) => a.triggered);\n\n  return (\n    <Card className={className}>\n      <h2 className=\"text-lg font-semibold mb-4 text-gray-200 flex items-center gap-2\">\n        <span>üîî</span> Price Alerts\n      </h2>\n\n      {/* Add Alert Form */}\n      <div className=\"mb-4 p-3 bg-gray-700/50 rounded-lg\">\n        <div className=\"text-sm text-gray-400 mb-2\">\n          Create alert for <span className=\"text-emerald-400 font-semibold\">{selectedSymbol}</span>\n          <span className=\"text-gray-500 ml-2\">(Current: {formatCurrency(currentPrice)})</span>\n        </div>\n        <div className=\"flex gap-2 items-end\">\n          <div className=\"flex-1\">\n            <Input\n              type=\"number\"\n              step=\"0.01\"\n              min=\"0.01\"\n              value={targetPrice}\n              onChange={(e) => setTargetPrice(e.target.value)}\n              placeholder=\"Target price\"\n            />\n          </div>\n          <select\n            value={condition}\n            onChange={(e) => setCondition(e.target.value as 'above' | 'below')}\n            className=\"px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-emerald-500 focus:outline-none\"\n          >\n            <option value=\"above\">Above</option>\n            <option value=\"below\">Below</option>\n          </select>\n          <Button onClick={handleAddAlert} disabled={!targetPrice}>\n            Add\n          </Button>\n        </div>\n      </div>\n\n      {/* Active Alerts */}\n      {activeAlerts.length > 0 && (\n        <div className=\"mb-4\">\n          <h3 className=\"text-sm font-semibold text-gray-400 mb-2\">Active Alerts</h3>\n          <div className=\"space-y-2\">\n            {activeAlerts.map((alert) => (\n              <AlertItem key={alert.id} alert={alert} onRemove={removeAlert} />\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Triggered Alerts */}\n      {triggeredAlerts.length > 0 && (\n        <div>\n          <div className=\"flex justify-between items-center mb-2\">\n            <h3 className=\"text-sm font-semibold text-gray-400\">Triggered</h3>\n            <Button variant=\"ghost\" size=\"sm\" onClick={clearTriggeredAlerts}>\n              Clear\n            </Button>\n          </div>\n          <div className=\"space-y-2 opacity-60\">\n            {triggeredAlerts.slice(0, 5).map((alert) => (\n              <AlertItem key={alert.id} alert={alert} onRemove={removeAlert} triggered />\n            ))}\n          </div>\n        </div>\n      )}\n\n      {alerts.length === 0 && (\n        <p className=\"text-center text-gray-500 py-2\">No alerts set</p>\n      )}\n    </Card>\n  );\n}\n\ninterface AlertItemProps {\n  alert: PriceAlert;\n  onRemove: (id: string) => void;\n  triggered?: boolean;\n}\n\nfunction AlertItem({ alert, onRemove, triggered }: AlertItemProps) {\n  const asset = ASSETS[alert.symbol];\n\n  return (\n    <div\n      className={clsx(\n        'flex items-center justify-between p-2 rounded-lg',\n        triggered ? 'bg-emerald-900/30' : 'bg-gray-700/50'\n      )}\n    >\n      <div className=\"flex-1\">\n        <div className=\"flex items-center gap-2\">\n          <span className=\"font-semibold text-white\">{alert.symbol}</span>\n          <span className=\"text-xs text-gray-400\">{asset?.name}</span>\n          {triggered && <span className=\"text-xs text-emerald-400\">‚úì Triggered</span>}\n        </div>\n        <div className=\"text-sm text-gray-400\">\n          {alert.condition === 'above' ? '‚Üë Above' : '‚Üì Below'}{' '}\n          <span className=\"text-white\">{formatCurrency(alert.targetPrice)}</span>\n        </div>\n      </div>\n      <Button\n        variant=\"ghost\"\n        size=\"sm\"\n        onClick={() => onRemove(alert.id)}\n        aria-label=\"Remove alert\"\n      >\n        ‚úï\n      </Button>\n    </div>\n  );\n}\n","import { clsx } from 'clsx';\nimport { useUIStore } from '@/store/uiStore';\n\nconst typeStyles = {\n  success: 'bg-emerald-600',\n  error: 'bg-red-600',\n  info: 'bg-blue-600',\n};\n\nexport function Toast() {\n  const toasts = useUIStore((state) => state.toasts);\n  const dismissToast = useUIStore((state) => state.dismissToast);\n\n  if (toasts.length === 0) return null;\n\n  return (\n    <div className=\"fixed bottom-4 right-4 z-50 space-y-2\">\n      {toasts.map((toast) => (\n        <div\n          key={toast.id}\n          role=\"alert\"\n          aria-live=\"polite\"\n          className={clsx(\n            'px-6 py-3 rounded-lg shadow-lg text-white animate-fade-in',\n            typeStyles[toast.type]\n          )}\n          onClick={() => dismissToast(toast.id)}\n        >\n          {toast.message}\n        </div>\n      ))}\n    </div>\n  );\n}\n","/**\n * Hidden element for screen reader announcements\n */\nexport function ScreenReaderAnnouncer() {\n  return (\n    <div\n      id=\"sr-announce\"\n      className=\"sr-only\"\n      aria-live=\"polite\"\n      aria-atomic=\"true\"\n    />\n  );\n}\n","// Sound effects manager using Web Audio API\n\nclass SoundManager {\n  private audioContext: AudioContext | null = null;\n  private enabled = true;\n\n  private getContext(): AudioContext {\n    if (!this.audioContext) {\n      this.audioContext = new AudioContext();\n    }\n    return this.audioContext;\n  }\n\n  setEnabled(enabled: boolean): void {\n    this.enabled = enabled;\n  }\n\n  private playTone(\n    frequency: number,\n    duration: number,\n    type: OscillatorType = 'sine',\n    volume = 0.1\n  ): void {\n    if (!this.enabled) return;\n\n    try {\n      const ctx = this.getContext();\n      const oscillator = ctx.createOscillator();\n      const gainNode = ctx.createGain();\n\n      oscillator.connect(gainNode);\n      gainNode.connect(ctx.destination);\n\n      oscillator.type = type;\n      oscillator.frequency.setValueAtTime(frequency, ctx.currentTime);\n\n      // Envelope\n      gainNode.gain.setValueAtTime(0, ctx.currentTime);\n      gainNode.gain.linearRampToValueAtTime(volume, ctx.currentTime + 0.01);\n      gainNode.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + duration);\n\n      oscillator.start(ctx.currentTime);\n      oscillator.stop(ctx.currentTime + duration);\n    } catch {\n      // Audio context may not be available\n    }\n  }\n\n  // Success sound - ascending tones\n  playBuy(): void {\n    this.playTone(440, 0.1, 'sine', 0.08);\n    setTimeout(() => this.playTone(554, 0.1, 'sine', 0.08), 50);\n    setTimeout(() => this.playTone(659, 0.15, 'sine', 0.08), 100);\n  }\n\n  // Sell sound - descending tones\n  playSell(): void {\n    this.playTone(659, 0.1, 'sine', 0.08);\n    setTimeout(() => this.playTone(554, 0.1, 'sine', 0.08), 50);\n    setTimeout(() => this.playTone(440, 0.15, 'sine', 0.08), 100);\n  }\n\n  // Error sound\n  playError(): void {\n    this.playTone(200, 0.15, 'square', 0.05);\n    setTimeout(() => this.playTone(180, 0.2, 'square', 0.05), 100);\n  }\n\n  // Alert triggered sound\n  playAlert(): void {\n    this.playTone(880, 0.1, 'sine', 0.1);\n    setTimeout(() => this.playTone(880, 0.1, 'sine', 0.1), 150);\n    setTimeout(() => this.playTone(1100, 0.2, 'sine', 0.1), 300);\n  }\n\n  // Click sound\n  playClick(): void {\n    this.playTone(600, 0.05, 'sine', 0.03);\n  }\n\n  // Notification sound\n  playNotification(): void {\n    this.playTone(523, 0.1, 'sine', 0.08);\n    setTimeout(() => this.playTone(659, 0.15, 'sine', 0.08), 100);\n  }\n}\n\nexport const soundManager = new SoundManager();\n","import { useEffect, useRef } from 'react';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { Header } from '@/components/layout/Header';\nimport { MarketTicker } from '@/components/layout/MarketTicker';\nimport { Footer } from '@/components/layout/Footer';\nimport { MarketOverview } from '@/components/trading/MarketOverview';\nimport { TradingPanel } from '@/components/trading/TradingPanel';\nimport { MarketStatus } from '@/components/trading/MarketStatus';\nimport { StopLossPanel } from '@/components/trading/StopLossPanel';\nimport { ChartSection } from '@/components/charts/ChartSection';\nimport { PortfolioSection } from '@/components/portfolio/PortfolioSection';\nimport { TradeHistory } from '@/components/history/TradeHistory';\nimport { AnalyticsDashboard } from '@/components/analytics/AnalyticsDashboard';\nimport { Watchlist } from '@/components/watchlist/Watchlist';\nimport { PriceAlerts } from '@/components/alerts/PriceAlerts';\nimport { Tutorial } from '@/components/tutorial/Tutorial';\nimport { Toast } from '@/components/ui/Toast';\nimport { ScreenReaderAnnouncer } from '@/components/ui/ScreenReaderAnnouncer';\nimport { useWebSocketInit } from '@/hooks/useWebSocket';\nimport { useAlertsStore } from '@/store/alertsStore';\nimport { useMarketStore } from '@/store/marketStore';\nimport { useSettingsStore } from '@/store/settingsStore';\nimport { useUIStore } from '@/store/uiStore';\nimport { soundManager } from '@/utils/sounds';\n\n// Create a client\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      staleTime: 5000,\n      retry: 2,\n      refetchOnWindowFocus: false,\n    },\n  },\n});\n\nfunction AppContent() {\n  // Initialize WebSocket connection and price simulation\n  useWebSocketInit();\n\n  const prices = useMarketStore((state) => state.prices);\n  const showToast = useUIStore((state) => state.showToast);\n  const soundEnabled = useSettingsStore((state) => state.soundEnabled);\n  const hasCompletedTutorial = useSettingsStore((state) => state.hasCompletedTutorial);\n  const setShowTutorial = useSettingsStore((state) => state.setShowTutorial);\n\n  // Use ref to track if tutorial has been shown\n  const tutorialShownRef = useRef(false);\n\n  // Sync sound settings\n  useEffect(() => {\n    soundManager.setEnabled(soundEnabled);\n  }, [soundEnabled]);\n\n  // Check price alerts when prices change (using store method directly to avoid dependency issues)\n  useEffect(() => {\n    const alerts = useAlertsStore.getState().alerts;\n    const activeAlerts = alerts.filter(a => !a.triggered);\n\n    activeAlerts.forEach((alert) => {\n      const priceData = prices[alert.symbol];\n      if (!priceData) return;\n\n      const currentPrice = priceData.price;\n      const shouldTrigger =\n        (alert.condition === 'above' && currentPrice >= alert.targetPrice) ||\n        (alert.condition === 'below' && currentPrice <= alert.targetPrice);\n\n      if (shouldTrigger) {\n        useAlertsStore.getState().triggerAlert(alert.id);\n        showToast(\n          `üîî Alert: ${alert.symbol} reached ${alert.condition === 'above' ? 'above' : 'below'} $${alert.targetPrice.toFixed(2)}`,\n          'info'\n        );\n        if (soundEnabled) {\n          soundManager.playAlert();\n        }\n      }\n    });\n  }, [prices, showToast, soundEnabled]);\n\n  // Show tutorial for first-time users (only once)\n  useEffect(() => {\n    if (!hasCompletedTutorial && !tutorialShownRef.current) {\n      tutorialShownRef.current = true;\n      setShowTutorial(true);\n    }\n  }, [hasCompletedTutorial, setShowTutorial]);\n\n  return (\n    <div className=\"min-h-screen text-gray-100 p-2 sm:p-4 transition-colors\">\n      {/* Skip link for accessibility */}\n      <a href=\"#main-content\" className=\"skip-link\">\n        Skip to main content\n      </a>\n\n      <div\n        className=\"max-w-7xl mx-auto\"\n        role=\"application\"\n        aria-label=\"Wall Street Trading Simulator\"\n      >\n        <Header />\n        <MarketTicker />\n\n        <main id=\"main-content\">\n          {/* Row 1: Market Overview, Trading, Status */}\n          <div className=\"grid grid-cols-12 gap-3 sm:gap-4 mb-4\">\n            <MarketOverview className=\"col-span-12 lg:col-span-5\" />\n            <TradingPanel className=\"col-span-12 lg:col-span-4\" />\n            <div className=\"col-span-12 lg:col-span-3 space-y-4\">\n              <MarketStatus />\n              <Watchlist />\n            </div>\n          </div>\n\n          {/* Row 2: Charts, Portfolio, History */}\n          <div className=\"grid grid-cols-12 gap-3 sm:gap-4 mb-4\">\n            <ChartSection className=\"col-span-12 lg:col-span-6\" />\n            <PortfolioSection className=\"col-span-12 lg:col-span-3\" />\n            <TradeHistory className=\"col-span-12 lg:col-span-3\" />\n          </div>\n\n          {/* Row 3: Alerts, Stop-Loss */}\n          <div className=\"grid grid-cols-12 gap-3 sm:gap-4 mb-4\">\n            <PriceAlerts className=\"col-span-12 lg:col-span-6\" />\n            <StopLossPanel className=\"col-span-12 lg:col-span-6\" />\n          </div>\n\n          {/* Row 4: Analytics Dashboard */}\n          <AnalyticsDashboard className=\"mb-4\" />\n        </main>\n\n        <Footer />\n      </div>\n\n      <Toast />\n      <ScreenReaderAnnouncer />\n      <Tutorial />\n    </div>\n  );\n}\n\nexport function App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <AppContent />\n    </QueryClientProvider>\n  );\n}\n","import { StrictMode } from 'react';\nimport { createRoot } from 'react-dom/client';\nimport { App } from './App';\nimport './styles/globals.css';\n\nconst rootElement = document.getElementById('root');\n\nif (!rootElement) {\n  throw new Error('Root element not found');\n}\n\ncreateRoot(rootElement).render(\n  <StrictMode>\n    <App />\n  </StrictMode>\n);\n"],"names":["m","require$$0","client","r","e","t","f","o","clsx","Card","children","className","props","jsx","variants","sizes","Button","variant","size","disabled","createJSONStorage","getStorage","options","storage","name","_a","parse","str2","str","newValue","toThenable","fn","input","result","onFulfilled","_onRejected","_onFulfilled","onRejected","persistImpl","config","baseOptions","set","get","api","state","persistedState","currentState","hasHydrated","hydrationListeners","finishHydrationListeners","args","setItem","savedSetState","replace","configResult","stateFromStorage","hydrate","_b","cb","_a2","postRehydrationCallback","deserializedStorageValue","migration","migrationResult","migrated","migratedState","newOptions","persist","useSettingsStore","create","theme","newTheme","enabled","show","ThemeToggle","toggleTheme","SoundToggle","soundEnabled","toggleSound","TUTORIAL_STEPS","Tutorial","currentStep","setCurrentStep","useState","showTutorial","completeTutorial","setShowTutorial","step","isLastStep","isFirstStep","handleNext","s","handlePrev","handleSkip","jsxs","_","index","TutorialButton","ASSETS","TICKER_SYMBOLS","INITIAL_CASH","STORAGE_KEY","STORAGE_VERSION","FALLBACK_PRICES","TIMEFRAMES","TIMEFRAME_RESOLUTION","RateLimiterClass","maxAttempts","windowMs","__publicField","action","now","record","resolve","tryAcquire","apiRateLimiter","tradeRateLimiter","generateId","usePortfolioStore","type","symbol","quantity","price","total","existing","newQuantity","newAvgPrice","newTrade","position","newPositions","currentPrice","prices","positions","version","oldState","useMarketStore","change","changePercent","newHistory","newPrice","previousPrice","isSimulated","isConnected","priceHistory","data","basePrice","i","variation","newPrices","asset","priceChange","history","formatCurrency","amount","formatPercent","value","formatNumber","decimals","formatTime","timestamp","FINNHUB_API_KEY","WebSocketManager","event","message","trade","error","symbols","callback","connected","delay","wsManager","useWebSocketInit","updatePriceFromWebSocket","setConnected","setSimulated","initializeFallbackPrices","simulatePriceMovement","useEffect","unsubscribeTrade","unsubscribeConnection","interval","useConnectionStatus","Header","cashBalance","resetPortfolio","portfolioValue","dayPL","dayPLPercent","useMemo","positionsValue","pl","plPercent","handleReset","MarketTicker","tickerItems","isPositive","Footer","useWatchlistStore","Sparkline","width","height","color","canvasRef","useRef","sparklineColor","first","canvas","ctx","min","range","padding","x","gradient","typeColors","AssetCard","isSelected","onSelect","colors","isInWatchlist","toggleWatchlist","handleWatchlistClick","useUIStore","orderType","timeframe","chartTab","assetFilter","id","filters","MarketOverview","selectedSymbol","selectSymbol","setAssetFilter","filteredAssets","filter","priceData","Input","label","inputId","useAnnouncer","announcerRef","useCallback","politeness","announcer","validateQuantity","num","validatePrice","TradingPanel","setQuantity","limitPrice","setLimitPrice","executeTrade","setOrderType","showToast","announce","estimatedTotal","maxShares","handleQuantityChange","handleLimitPriceChange","handleTrade","MarketStatus","indices","setIndices","isMarketOpen","day","hour","isWeekday","isDuringHours","volume","useStopLossStore","triggerPrice","newOrder","executedPrice","triggered","order","Tooltip","content","isVisible","setIsVisible","coords","setCoords","triggerRef","tooltipRef","trigger","tooltip","top","left","Fragment","TRADING_GLOSSARY","GlossaryTerm","term","definition","StopLossPanel","setTriggerPrice","orders","addStopLoss","removeStopLoss","ownedShares","handleAddStopLoss","qty","activeOrders","triggeredOrders","StopLossItem","onRemove","RateLimitError","APIError","status","FinnhubClient","endpoint","params","url","key","response","resolution","from","to","quotes","finnhub","getTimeRange","generateSimulatedCandles","count","candles","open","close","high","low","useCandlestick","useQuery","time","PriceChart","containerRef","chartRef","seriesRef","isLoading","chart","createChart","candlestickSeries","handleResize","resizeObserver","chartData","candle","VolumeChart","histogramSeries","volumeData","ChartControls","setTimeframe","tf","OrderBook","bids","asks","bidPrice","bidSize","askPrice","askSize","bid","ask","newsItems","MarketNews","item","tabs","ChartSection","setChartTab","tab","PortfolioSection","totalValue","totalPL","totalPLPercent","positionsList","list","currentValue","costBasis","exportTradesToCsv","trades","headers","rows","date","csvContent","row","cell","blob","link","TradeHistory","tradeHistory","handleExport","AnalyticsDashboard","analytics","unrealizedPL","pos","buyTrades","sellTrades","avgTradeSize","sum","realizedPL","buyPrice","allocations","a","b","winningTrades","avgPrice","winRate","MetricCard","alloc","trend","subtitle","Watchlist","watchlist","removeFromWatchlist","useAlertsStore","targetPrice","condition","newAlert","alert","PriceAlerts","setTargetPrice","setCondition","alerts","addAlert","removeAlert","clearTriggeredAlerts","handleAddAlert","activeAlerts","triggeredAlerts","AlertItem","typeStyles","Toast","toasts","dismissToast","toast","ScreenReaderAnnouncer","SoundManager","frequency","duration","oscillator","gainNode","soundManager","queryClient","QueryClient","AppContent","hasCompletedTutorial","tutorialShownRef","App","QueryClientProvider","rootElement","createRoot","StrictMode"],"mappings":"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","x_google_ignoreList":[0,1,4]}