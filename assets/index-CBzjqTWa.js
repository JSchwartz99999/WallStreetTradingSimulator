var xe=Object.defineProperty;var pe=(r,s,t)=>s in r?xe(r,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[s]=t;var k=(r,s,t)=>pe(r,typeof s!="symbol"?s+"":s,t);import{j as e,c as F,r as b,u as ge,Q as fe,a as ye}from"./state-BDISBRrE.js";import{a as be}from"./react-vendor-CRB3T2We.js";import{V as le}from"./charts-BwNSsnkb.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();var _={},ee;function ve(){if(ee)return _;ee=1;var r=be();return _.createRoot=r.createRoot,_.hydrateRoot=r.hydrateRoot,_}var je=ve();function ce(r){var s,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var a=r.length;for(s=0;s<a;s++)r[s]&&(t=ce(r[s]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function w(){for(var r,s,t=0,n="",a=arguments.length;t<a;t++)(r=arguments[t])&&(s=ce(r))&&(n&&(n+=" "),n+=s);return n}function L({children:r,className:s,...t}){return e.jsx("div",{className:w("card",s),...t,children:r})}const we={primary:"bg-emerald-600 hover:bg-emerald-700 text-white",secondary:"bg-gray-700 hover:bg-gray-600 text-white",success:"bg-emerald-600 hover:bg-emerald-700 text-white",danger:"bg-red-600 hover:bg-red-700 text-white",ghost:"bg-transparent hover:bg-gray-700/50 text-gray-300 hover:text-white"},Ne={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base font-semibold"};function P({children:r,variant:s="primary",size:t="md",className:n,disabled:a,...i}){return e.jsx("button",{className:w("rounded-lg transition-colors focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800",we[s],Ne[t],a&&"opacity-50 cursor-not-allowed",s==="success"&&"focus:ring-emerald-400",s==="danger"&&"focus:ring-red-400",s==="primary"&&"focus:ring-emerald-400",s==="secondary"&&"focus:ring-gray-400",s==="ghost"&&"focus:ring-gray-400",n),disabled:a,...i,children:r})}function D(r,s){let t;try{t=r()}catch{return}return{getItem:a=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),l=(i=t.getItem(a))!=null?i:null;return l instanceof Promise?l.then(o):o(l)},setItem:(a,i)=>t.setItem(a,JSON.stringify(i,void 0)),removeItem:a=>t.removeItem(a)}}const X=r=>s=>{try{const t=r(s);return t instanceof Promise?t:{then(n){return X(n)(t)},catch(n){return this}}}catch(t){return{then(n){return this},catch(n){return X(n)(t)}}}},Se=(r,s)=>(t,n,a)=>{let i={storage:D(()=>localStorage),partialize:f=>f,version:0,merge:(f,p)=>({...p,...f}),...s},o=!1;const l=new Set,c=new Set;let d=i.storage;if(!d)return r((...f)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...f)},n,a);const m=()=>{const f=i.partialize({...n()});return d.setItem(i.name,{state:f,version:i.version})},u=a.setState;a.setState=(f,p)=>(u(f,p),m());const x=r((...f)=>(t(...f),m()),n,a);a.getInitialState=()=>x;let g;const S=()=>{var f,p;if(!d)return;o=!1,l.forEach(h=>{var N;return h((N=n())!=null?N:x)});const y=((p=i.onRehydrateStorage)==null?void 0:p.call(i,(f=n())!=null?f:x))||void 0;return X(d.getItem.bind(d))(i.name).then(h=>{if(h)if(typeof h.version=="number"&&h.version!==i.version){if(i.migrate){const N=i.migrate(h.state,h.version);return N instanceof Promise?N.then(C=>[!0,C]):[!0,N]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,h.state];return[!1,void 0]}).then(h=>{var N;const[C,I]=h;if(g=i.merge(I,(N=n())!=null?N:x),t(g,!0),C)return m()}).then(()=>{y==null||y(g,void 0),g=n(),o=!0,c.forEach(h=>h(g))}).catch(h=>{y==null||y(void 0,h)})};return a.persist={setOptions:f=>{i={...i,...f},f.storage&&(d=f.storage)},clearStorage:()=>{d==null||d.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>S(),hasHydrated:()=>o,onHydrate:f=>(l.add(f),()=>{l.delete(f)}),onFinishHydration:f=>(c.add(f),()=>{c.delete(f)})},i.skipHydration||S(),g||x},z=Se,E=F()(z((r,s)=>({theme:"dark",soundEnabled:!0,showTutorial:!1,hasCompletedTutorial:!1,setTheme:t=>{r({theme:t}),t==="light"?document.documentElement.classList.add("light-theme"):document.documentElement.classList.remove("light-theme")},toggleTheme:()=>{const t=s().theme==="dark"?"light":"dark";s().setTheme(t)},setSoundEnabled:t=>r({soundEnabled:t}),toggleSound:()=>r(t=>({soundEnabled:!t.soundEnabled})),setShowTutorial:t=>r({showTutorial:t}),completeTutorial:()=>r({showTutorial:!1,hasCompletedTutorial:!0}),resetTutorial:()=>r({hasCompletedTutorial:!1})}),{name:"wall-street-settings",storage:D(()=>localStorage),onRehydrateStorage:()=>r=>{(r==null?void 0:r.theme)==="light"&&document.documentElement.classList.add("light-theme")}}));function Te(){const r=E(t=>t.theme),s=E(t=>t.toggleTheme);return e.jsx(P,{variant:"ghost",size:"sm",onClick:s,"aria-label":`Switch to ${r==="dark"?"light":"dark"} mode`,title:`Switch to ${r==="dark"?"light":"dark"} mode`,children:r==="dark"?"â˜€ï¸":"ðŸŒ™"})}function Pe(){const r=E(t=>t.soundEnabled),s=E(t=>t.toggleSound);return e.jsx(P,{variant:"ghost",size:"sm",onClick:s,"aria-label":r?"Mute sounds":"Enable sounds",title:r?"Mute sounds":"Enable sounds",children:r?"ðŸ”Š":"ðŸ”‡"})}const G=[{title:"Welcome to Wall Street Simulator! ðŸ“ˆ",content:"This is a paper trading simulator where you can practice trading stocks, commodities, and bonds with virtual money. No real money is involved!",highlight:null},{title:"Market Overview",content:"Browse available assets in the Market Overview section. Click on any asset to select it for trading. Use the filter buttons to show only stocks, commodities, or bonds.",highlight:"market-overview"},{title:"Trading Panel",content:"Once you select an asset, use the Trading Panel to buy or sell. Choose between Market orders (instant execution at current price) or Limit orders (execution at your specified price).",highlight:"trading-panel"},{title:"Your Portfolio",content:"Track your holdings in the Portfolio section. You can see your positions, average purchase price, and current profit/loss for each asset.",highlight:"portfolio"},{title:"Price Charts",content:"Analyze price movements with interactive candlestick charts. Switch between different timeframes (1D, 5D, 1M, 3M, 1Y) to see historical trends.",highlight:"charts"},{title:"Watchlist & Alerts",content:"Star your favorite assets to add them to your Watchlist. Set Price Alerts to get notified when a stock reaches your target price.",highlight:"watchlist"},{title:"Analytics Dashboard",content:"Review your trading performance in the Analytics Dashboard. See your portfolio allocation, win rate, and other key metrics.",highlight:"analytics"},{title:"You're Ready! ðŸš€",content:"Start with $100,000 in virtual cash. Experiment with different strategies, learn from your trades, and have fun! You can always reset your portfolio to start fresh.",highlight:null}];function ke(){const[r,s]=b.useState(0),t=E(u=>u.showTutorial),n=E(u=>u.completeTutorial),a=E(u=>u.setShowTutorial);if(!t)return null;const i=G[r],o=r===G.length-1,l=r===0,c=()=>{o?n():s(u=>u+1)},d=()=>{l||s(u=>u-1)},m=()=>{a(!1)};return e.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl max-w-md w-full p-6 shadow-2xl",children:[e.jsx("div",{className:"flex gap-1 mb-4",children:G.map((u,x)=>e.jsx("div",{className:`h-1 flex-1 rounded ${x<=r?"bg-emerald-500":"bg-gray-600"}`},x))}),e.jsxs("div",{className:"text-sm text-gray-400 mb-2",children:["Step ",r+1," of ",G.length]}),e.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:i.title}),e.jsx("p",{className:"text-gray-300 mb-6 leading-relaxed",children:i.content}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(P,{variant:"ghost",onClick:m,children:"Skip Tutorial"}),e.jsxs("div",{className:"flex gap-2",children:[!l&&e.jsx(P,{variant:"secondary",onClick:d,children:"Back"}),e.jsx(P,{onClick:c,children:o?"Get Started":"Next"})]})]})]})})}function Ce(){const r=E(s=>s.setShowTutorial);return e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>r(!0),"aria-label":"Show tutorial",title:"Show tutorial",children:"â“"})}const H={AAPL:{name:"Apple Inc.",type:"stocks",symbol:"AAPL"},MSFT:{name:"Microsoft",type:"stocks",symbol:"MSFT"},TSLA:{name:"Tesla Inc.",type:"stocks",symbol:"TSLA"},GOOGL:{name:"Alphabet",type:"stocks",symbol:"GOOGL"},AMZN:{name:"Amazon",type:"stocks",symbol:"AMZN"},META:{name:"Meta Platforms",type:"stocks",symbol:"META"},NVDA:{name:"NVIDIA",type:"stocks",symbol:"NVDA"},JPM:{name:"JPMorgan Chase",type:"stocks",symbol:"JPM"},GC:{name:"Gold",type:"commodities",symbol:"GC"},CL:{name:"Crude Oil",type:"commodities",symbol:"CL"},SI:{name:"Silver",type:"commodities",symbol:"SI"},TNX:{name:"10Y Treasury",type:"bonds",symbol:"TNX"},TYX:{name:"30Y Treasury",type:"bonds",symbol:"TYX"}},de=["AAPL","MSFT","GOOGL","AMZN","TSLA","META","NVDA","JPM"];new Set(Object.keys(H));const R=1e5,Ae="wallStreetSimulator",te="2.0",Le={AAPL:{price:262.24,change:-5.02},MSFT:{price:475,change:2.15},TSLA:{price:432.96,change:-18.71},GOOGL:{price:314.34,change:-2.36},AMZN:{price:240.92,change:7.86},META:{price:660.46,change:1.67},NVDA:{price:187.27,change:-.85},JPM:{price:334.29,change:1.75},GC:{price:4478.24,change:30.24},CL:{price:58.15,change:-.17},SI:{price:81.52,change:4.97},TNX:{price:4.19,change:.02},TYX:{price:4.88,change:.03}},Me=["1D","5D","1M","3M","1Y"],Ee={"1D":"5","5D":"15","1M":"60","3M":"D","1Y":"D"};class me{constructor(s=60,t=6e4){k(this,"attempts",new Map);k(this,"maxAttempts");k(this,"windowMs");this.maxAttempts=s,this.windowMs=t}check(s){const t=Date.now(),n=this.attempts.get(s)??{count:0,resetTime:t+this.windowMs};return t>n.resetTime&&(n.count=0,n.resetTime=t+this.windowMs),n.count>=this.maxAttempts?!1:(n.count++,this.attempts.set(s,n),!0)}reset(s){this.attempts.delete(s)}async acquire(){return new Promise(s=>{const t=()=>{this.check("api")?s():setTimeout(t,100)};t()})}}const Re=new me(60,6e4),Oe=new me(10,6e4);function Q(){return crypto.randomUUID()}const M=F()(z((r,s)=>({version:te,cashBalance:R,positions:{},tradeHistory:[],executeTrade:(t,n,a,i)=>{const o=s(),l=a*i;if(t==="buy")return l>o.cashBalance?!1:(r(c=>{const d=c.positions[n],m=((d==null?void 0:d.quantity)||0)+a,x=((d?d.quantity*d.avgPrice:0)+l)/m,g={id:Q(),type:"buy",symbol:n,quantity:a,price:i,total:l,timestamp:Date.now()};return{cashBalance:c.cashBalance-l,positions:{...c.positions,[n]:{symbol:n,quantity:m,avgPrice:x}},tradeHistory:[g,...c.tradeHistory.slice(0,99)]}}),!0);{const c=o.positions[n];return!c||c.quantity<a?!1:(r(d=>{const m=d.positions[n].quantity-a,u={...d.positions};m===0?delete u[n]:u[n]={...u[n],quantity:m};const x={id:Q(),type:"sell",symbol:n,quantity:a,price:i,total:l,timestamp:Date.now()};return{cashBalance:d.cashBalance+l,positions:u,tradeHistory:[x,...d.tradeHistory.slice(0,99)]}}),!0)}},resetPortfolio:()=>r({cashBalance:R,positions:{},tradeHistory:[]}),getPositionValue:(t,n)=>{const a=s().positions[t];return a?a.quantity*n:0},getTotalPositionsValue:t=>{const n=s().positions;return Object.entries(n).reduce((a,[i,o])=>{const l=t[i]??o.avgPrice;return a+o.quantity*l},0)}}),{name:Ae,version:2,storage:D(()=>localStorage),migrate:(r,s)=>{if(s<2){const t=r;return{version:te,cashBalance:t.cashBalance??R,positions:t.positions??{},tradeHistory:t.tradeHistory??[]}}return r}})),j=F((r,s)=>({prices:{},priceHistory:{},selectedSymbol:"AAPL",isSimulated:!0,isConnected:!1,setPrice:(t,n,a,i)=>{r(o=>{const c=[...o.priceHistory[t]??[],n].slice(-20);return{prices:{...o.prices,[t]:{price:n,change:a,changePercent:i,lastUpdated:Date.now()}},priceHistory:{...o.priceHistory,[t]:c}}})},updatePriceFromWebSocket:(t,n)=>{r(a=>{const i=a.prices[t],o=(i==null?void 0:i.price)??n,l=n-o,c=o>0?l/o*100:0,m=[...a.priceHistory[t]??[],n].slice(-20);return{prices:{...a.prices,[t]:{...i,price:n,change:l,changePercent:c,lastUpdated:Date.now()}},priceHistory:{...a.priceHistory,[t]:m}}})},selectSymbol:t=>r({selectedSymbol:t}),setSimulated:t=>r({isSimulated:t}),setConnected:t=>r({isConnected:t}),initializeFallbackPrices:()=>{const t={},n={};Object.entries(Le).forEach(([a,i])=>{const o=i.price>0?i.change/i.price*100:0;t[a]={price:i.price,change:i.change,changePercent:o,lastUpdated:Date.now()};const l=i.price;n[a]=Array.from({length:10},(c,d)=>{const m=(Math.random()-.5)*.02*l;return l+m*(d/10)}),n[a].push(i.price)}),r({prices:t,priceHistory:n,isSimulated:!0})},simulatePriceMovement:()=>{const t=s();if(!t.isSimulated)return;const n={},a={};Object.entries(t.prices).forEach(([i,o])=>{const l=(Math.random()-.5)*.5,c=o.price*(l/100),d=Math.max(.01,o.price+c);n[i]={...o,price:d,change:c,changePercent:l,lastUpdated:Date.now()};const m=t.priceHistory[i]??[];a[i]=[...m,d].slice(-20)}),r({prices:n,priceHistory:a})},getPriceHistory:t=>s().priceHistory[t]??[]}));function v(r){return Number.isFinite(r)?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(r):"$0.00"}function O(r){return Number.isFinite(r)?`${r>=0?"+":""}${r.toFixed(2)}%`:"+0.00%"}function Ie(r,s=0){return Number.isFinite(r)?new Intl.NumberFormat("en-US",{minimumFractionDigits:s,maximumFractionDigits:s}).format(r):"0"}function Fe(r){return new Date(r).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"})}const se="d5fb84pr01qjlnjenivgd5fb84pr01qjlnjenj00",W={apiKey:se,baseUrl:"https://finnhub.io/api/v1",wsUrl:"wss://ws.finnhub.io",hasApiKey:!!se};class De{constructor(){k(this,"ws",null);k(this,"subscriptions",new Set);k(this,"tradeCallbacks",[]);k(this,"connectionCallbacks",[]);k(this,"reconnectAttempts",0);k(this,"maxReconnects",5);k(this,"reconnectTimeout",null);k(this,"pingInterval",null)}isAvailable(){return W.hasApiKey}connect(){var s;if(!this.isAvailable()){console.log("WebSocket not available - no API key");return}if(((s=this.ws)==null?void 0:s.readyState)!==WebSocket.OPEN)try{this.ws=new WebSocket(`${W.wsUrl}?token=${W.apiKey}`),this.ws.onopen=()=>{console.log("WebSocket connected"),this.reconnectAttempts=0,this.notifyConnection(!0),this.subscriptions.forEach(t=>{this.sendSubscribe(t)}),this.pingInterval=setInterval(()=>{var t;(t=this.ws)==null||t.readyState,WebSocket.OPEN},3e4)},this.ws.onmessage=t=>{try{const n=JSON.parse(t.data);n.type==="trade"&&n.data&&n.data.forEach(a=>{this.tradeCallbacks.forEach(i=>{i(a.s,a.p,a.v)})})}catch(n){console.error("Error parsing WebSocket message:",n)}},this.ws.onclose=()=>{console.log("WebSocket disconnected"),this.notifyConnection(!1),this.cleanup(),this.attemptReconnect()},this.ws.onerror=t=>{console.error("WebSocket error:",t)}}catch(t){console.error("Failed to create WebSocket:",t)}}disconnect(){this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.cleanup(),this.ws&&(this.ws.close(),this.ws=null)}subscribe(s){var t;this.subscriptions.add(s),((t=this.ws)==null?void 0:t.readyState)===WebSocket.OPEN&&this.sendSubscribe(s)}unsubscribe(s){var t;this.subscriptions.delete(s),((t=this.ws)==null?void 0:t.readyState)===WebSocket.OPEN&&this.ws.send(JSON.stringify({type:"unsubscribe",symbol:s}))}subscribeAll(s){s.forEach(t=>this.subscribe(t))}onTrade(s){return this.tradeCallbacks.push(s),()=>{const t=this.tradeCallbacks.indexOf(s);t>-1&&this.tradeCallbacks.splice(t,1)}}onConnection(s){return this.connectionCallbacks.push(s),()=>{const t=this.connectionCallbacks.indexOf(s);t>-1&&this.connectionCallbacks.splice(t,1)}}isConnected(){var s;return((s=this.ws)==null?void 0:s.readyState)===WebSocket.OPEN}sendSubscribe(s){var t;((t=this.ws)==null?void 0:t.readyState)===WebSocket.OPEN&&this.ws.send(JSON.stringify({type:"subscribe",symbol:s}))}notifyConnection(s){this.connectionCallbacks.forEach(t=>t(s))}cleanup(){this.pingInterval&&(clearInterval(this.pingInterval),this.pingInterval=null)}attemptReconnect(){if(this.reconnectAttempts>=this.maxReconnects){console.log("Max reconnect attempts reached");return}this.reconnectAttempts++;const s=Math.min(1e3*Math.pow(2,this.reconnectAttempts),3e4);console.log(`Reconnecting in ${s}ms (attempt ${this.reconnectAttempts})`),this.reconnectTimeout=setTimeout(()=>{this.connect()},s)}}const B=new De;function Be(){const r=j(i=>i.updatePriceFromWebSocket),s=j(i=>i.setConnected),t=j(i=>i.setSimulated),n=j(i=>i.initializeFallbackPrices),a=j(i=>i.simulatePriceMovement);b.useEffect(()=>{if(n(),B.isAvailable()){const i=B.onTrade((l,c)=>{r(l,c)}),o=B.onConnection(l=>{s(l),t(!l)});return B.connect(),B.subscribeAll(de),()=>{i(),o(),B.disconnect()}}else{t(!0),s(!1);const i=setInterval(()=>{a()},3e3);return()=>{clearInterval(i)}}},[n,r,s,t,a])}function qe(){const r=j(t=>t.isConnected),s=j(t=>t.isSimulated);return{isConnected:r,isSimulated:s}}function We(){const r=M(m=>m.cashBalance),s=M(m=>m.positions),t=M(m=>m.resetPortfolio),n=j(m=>m.prices),{isConnected:a,isSimulated:i}=qe(),{portfolioValue:o,dayPL:l,dayPLPercent:c}=b.useMemo(()=>{let m=0;Object.entries(s).forEach(([S,f])=>{var y;const p=((y=n[S])==null?void 0:y.price)??f.avgPrice;m+=f.quantity*p});const u=r+m,x=u-R,g=x/R*100;return{portfolioValue:u,dayPL:x,dayPLPercent:g}},[r,s,n]),d=()=>{confirm("Are you sure you want to reset your portfolio? This will clear all positions and trade history.")&&t()};return e.jsx(L,{className:"mb-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 flex-wrap",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-emerald-400",children:"Wall Street Trading Simulator"}),e.jsxs("span",{className:w("flex items-center gap-2 text-sm",a?"text-emerald-400":i?"text-yellow-400":"text-red-400"),role:"status","aria-live":"polite",children:[e.jsx("span",{className:w("w-2 h-2 rounded-full pulse",a?"bg-emerald-500":i?"bg-yellow-500":"bg-red-500"),"aria-hidden":"true"}),e.jsx("span",{children:a?"LIVE":i?"SIMULATED":"OFFLINE"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 sm:gap-6 flex-wrap w-full sm:w-auto",children:[e.jsxs("div",{className:"text-left sm:text-right",children:[e.jsx("div",{className:"text-xs sm:text-sm text-gray-400",children:"Portfolio Value"}),e.jsx("div",{className:w("text-lg sm:text-xl font-bold price-animate",o>=R?"text-emerald-400":"text-red-400"),"aria-label":`Portfolio value: ${v(o)}`,children:v(o)})]}),e.jsxs("div",{className:"text-left sm:text-right",children:[e.jsx("div",{className:"text-xs sm:text-sm text-gray-400",children:"Cash Balance"}),e.jsx("div",{className:"text-lg sm:text-xl font-bold text-emerald-400 price-animate","aria-label":`Cash balance: ${v(r)}`,children:v(r)})]}),e.jsxs("div",{className:"text-left sm:text-right",children:[e.jsx("div",{className:"text-xs sm:text-sm text-gray-400",children:"Total P/L"}),e.jsxs("div",{className:w("text-lg sm:text-xl font-bold price-animate",l>=0?"text-emerald-400":"text-red-400"),"aria-label":`Total profit and loss: ${v(l)}`,children:[v(l)," (",c>=0?"+":"",c.toFixed(2),"%)"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Te,{}),e.jsx(Pe,{}),e.jsx(Ce,{})]}),e.jsx(P,{variant:"secondary",size:"sm",onClick:d,"aria-label":"Reset portfolio to starting balance",children:"Reset"})]})]})})}function ze(){const r=j(t=>t.prices),s=de.map(t=>{const n=r[t];if(!n)return null;const a=n.change>=0;return e.jsxs("div",{className:"flex items-center gap-3",role:"listitem",children:[e.jsx("span",{className:"font-semibold text-white",children:t}),e.jsx("span",{className:"text-gray-300",children:v(n.price)}),e.jsxs("span",{className:w("flex items-center gap-1",a?"text-emerald-400":"text-red-400"),children:[e.jsx("span",{"aria-hidden":"true",children:a?"â–²":"â–¼"}),e.jsx("span",{children:O(n.changePercent)})]})]},t)}).filter(Boolean);return e.jsx(L,{className:"p-2 sm:p-3 mb-4 overflow-hidden",role:"marquee","aria-label":"Live market ticker",children:e.jsxs("div",{className:"flex gap-6 sm:gap-8 ticker-scroll whitespace-nowrap",children:[s,s]})})}function He(){return e.jsxs(L,{className:"text-center text-gray-400 text-sm",children:[e.jsx("p",{children:"Wall Street Trading Simulator - For Educational Purposes Only"}),e.jsx("p",{className:"mt-1",children:"Data is simulated and does not represent real market conditions"}),e.jsx("p",{className:"mt-2 text-xs",children:e.jsx("a",{href:"https://github.com/JSchwartz99999/WallStreetTradingSimulator",className:"text-emerald-400 hover:text-emerald-300 transition-colors",target:"_blank",rel:"noopener noreferrer",children:"View on GitHub"})})]})}const K=F()(z((r,s)=>({watchlist:[],addToWatchlist:t=>{r(n=>n.watchlist.includes(t)?n:{watchlist:[...n.watchlist,t]})},removeFromWatchlist:t=>{r(n=>({watchlist:n.watchlist.filter(a=>a!==t)}))},isInWatchlist:t=>s().watchlist.includes(t),toggleWatchlist:t=>{const n=s();n.watchlist.includes(t)?n.removeFromWatchlist(t):n.addToWatchlist(t)}}),{name:"wall-street-watchlist",storage:D(()=>localStorage)}));function $e({data:r,width:s=60,height:t=20,color:n,className:a}){const i=b.useRef(null),o=b.useMemo(()=>{if(n)return n;if(r.length<2)return"#6b7280";const l=r[0];return r[r.length-1]>=l?"#10b981":"#ef4444"},[r,n]);return b.useEffect(()=>{const l=i.current;if(!l||r.length<2)return;const c=l.getContext("2d");if(!c)return;c.clearRect(0,0,s,t);const d=Math.min(...r),u=Math.max(...r)-d||1,x=2;c.beginPath(),c.strokeStyle=o,c.lineWidth=1.5,c.lineCap="round",c.lineJoin="round",r.forEach((S,f)=>{const p=f/(r.length-1)*(s-x*2)+x,y=t-x-(S-d)/u*(t-x*2);f===0?c.moveTo(p,y):c.lineTo(p,y)}),c.stroke();const g=c.createLinearGradient(0,0,0,t);g.addColorStop(0,o+"40"),g.addColorStop(1,o+"00"),c.lineTo(s-x,t),c.lineTo(x,t),c.closePath(),c.fillStyle=g,c.fill()},[r,s,t,o]),r.length<2?e.jsx("div",{style:{width:s,height:t},className:a}):e.jsx("canvas",{ref:i,width:s,height:t,className:a,"aria-hidden":"true"})}const Ve={stocks:{bg:"bg-blue-900/50",text:"text-blue-300"},commodities:{bg:"bg-yellow-900/50",text:"text-yellow-300"},bonds:{bg:"bg-purple-900/50",text:"text-purple-300"}};function Ue({symbol:r,asset:s,price:t,change:n,changePercent:a,isSelected:i,onSelect:o}){const l=n>=0,c=Ve[s.type],d=K(g=>g.watchlist.includes(r)),m=K(g=>g.toggleWatchlist),u=j(g=>g.priceHistory[r]??[]),x=g=>{g.stopPropagation(),m(r)};return e.jsxs("div",{onClick:()=>o(r),onKeyDown:g=>{(g.key==="Enter"||g.key===" ")&&(g.preventDefault(),o(r))},tabIndex:0,role:"option","aria-selected":i,className:w("p-3 bg-gray-700 rounded-lg cursor-pointer","hover:bg-gray-600 transition-colors","focus:outline-none focus:ring-2 focus:ring-emerald-500","border border-transparent",i&&"asset-selected"),children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:x,className:w("text-lg transition-colors focus:outline-none hover:scale-110",d?"text-yellow-400":"text-gray-600 hover:text-yellow-400"),"aria-label":d?`Remove ${r} from watchlist`:`Add ${r} to watchlist`,children:d?"â˜…":"â˜†"}),e.jsx("span",{className:"font-semibold text-white",children:r})]}),e.jsx("span",{className:w("text-xs px-2 py-0.5 rounded",c.bg,c.text),children:s.type})]}),e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:s.name}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-white price-animate",children:v(t)}),e.jsxs("div",{className:w("text-sm flex items-center gap-1",l?"text-emerald-400":"text-red-400"),children:[e.jsx("span",{"aria-hidden":"true",children:l?"â–²":"â–¼"}),v(Math.abs(n))," (",O(a),")"]})]}),u.length>2&&e.jsx($e,{data:u,width:60,height:24,className:"opacity-80"})]})]})}const A=F()(z(r=>({orderType:"market",timeframe:"1D",chartTab:"chart",assetFilter:"all",toasts:[],setOrderType:s=>r({orderType:s}),setTimeframe:s=>r({timeframe:s}),setChartTab:s=>r({chartTab:s}),setAssetFilter:s=>r({assetFilter:s}),showToast:(s,t="info")=>{const n=crypto.randomUUID();r(a=>({toasts:[...a.toasts,{id:n,message:s,type:t}]})),setTimeout(()=>{r(a=>({toasts:a.toasts.filter(i=>i.id!==n)}))},3e3)},dismissToast:s=>r(t=>({toasts:t.toasts.filter(n=>n.id!==s)}))}),{name:"wall-street-ui",storage:D(()=>localStorage),partialize:r=>({orderType:r.orderType,timeframe:r.timeframe,chartTab:r.chartTab,assetFilter:r.assetFilter})})),_e=[{value:"all",label:"All"},{value:"stocks",label:"Stocks"},{value:"commodities",label:"Commodities"},{value:"bonds",label:"Bonds"}];function Ge({className:r}){const s=j(l=>l.prices),t=j(l=>l.selectedSymbol),n=j(l=>l.selectSymbol),a=A(l=>l.assetFilter),i=A(l=>l.setAssetFilter),o=Object.entries(H).filter(([,l])=>a==="all"||l.type===a);return e.jsxs(L,{className:r,"aria-labelledby":"market-overview-title",children:[e.jsx("h2",{id:"market-overview-title",className:"text-lg font-semibold mb-4 text-gray-200",children:"Market Overview"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",role:"tablist","aria-label":"Filter assets by type",children:_e.map(l=>e.jsx(P,{variant:a===l.value?"primary":"secondary",size:"sm",onClick:()=>i(l.value),role:"tab","aria-selected":a===l.value,children:l.label},l.value))}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-80 overflow-y-auto",role:"listbox","aria-label":"Available assets",children:o.map(([l,c])=>{const d=s[l]??{price:0,change:0,changePercent:0};return e.jsx(Ue,{symbol:l,asset:c,price:d.price,change:d.change,changePercent:d.changePercent,isSelected:t===l,onSelect:n},l)})})]})}function U({label:r,error:s,className:t,id:n,...a}){const i=n||(r==null?void 0:r.toLowerCase().replace(/\s+/g,"-"));return e.jsxs("div",{className:"space-y-1",children:[r&&e.jsx("label",{htmlFor:i,className:"block text-sm text-gray-400",children:r}),e.jsx("input",{id:i,className:w("w-full px-3 py-2 bg-gray-700 border rounded-lg","focus:border-emerald-500 focus:outline-none focus:ring-1 focus:ring-emerald-500","transition-colors",s?"border-red-500":"border-gray-600",t),...a}),s&&e.jsx("p",{className:"text-sm text-red-400",children:s})]})}function Ye(){const r=b.useRef(null);return{announce:b.useCallback((t,n="polite")=>{let a=r.current;a||(a=document.getElementById("sr-announce"),r.current=a),a&&(a.textContent="",a.setAttribute("aria-live",n),requestAnimationFrame(()=>{a&&(a.textContent=t)}),setTimeout(()=>{a&&(a.textContent="")},1e3))},[])}}function Qe(r){const s=Number(r);return Number.isInteger(s)&&s>=1&&s<=1e5}function Ke(r){const s=Number(r);return Number.isFinite(s)&&s>0&&s<=1e6}function Je({className:r}){var V;const[s,t]=b.useState(1),[n,a]=b.useState(""),i=j(T=>T.selectedSymbol),l=((V=j(T=>T.prices)[i])==null?void 0:V.price)??0,c=M(T=>T.cashBalance),d=M(T=>T.positions),m=M(T=>T.executeTrade),u=A(T=>T.orderType),x=A(T=>T.setOrderType),g=A(T=>T.showToast),{announce:S}=Ye(),f=H[i],p=d[i],y=b.useMemo(()=>u==="limit"&&n&&parseFloat(n)||l,[u,n,l]),h=s*y,N=y>0?Math.floor(c/y):0,C=T=>{const Z=parseInt(T.target.value)||0;t(Math.max(0,Math.min(1e5,Z)))},I=T=>{a(T.target.value)},$=b.useCallback(T=>{if(!Oe.check("trade")){g("Too many trades. Please wait a moment.","error");return}if(!Qe(s)){g("Please enter a valid quantity (1-100,000)","error");return}if(u==="limit"&&!Ke(n)){g("Please enter a valid limit price","error");return}m(T,i,s,y)?(g(`${T==="buy"?"Bought":"Sold"} ${s} shares of ${i}`,"success"),S(`Successfully ${T==="buy"?"bought":"sold"} ${s} shares of ${i} at ${v(y)} each`),t(1)):g(T==="buy"?"Insufficient funds":"Insufficient shares","error")},[s,n,y,i,u,m,g,S]);return e.jsxs(L,{className:r,"aria-labelledby":"trading-title",children:[e.jsx("h2",{id:"trading-title",className:"text-lg font-semibold mb-4 text-gray-200",children:"Trade"}),e.jsxs("div",{className:"mb-4 p-3 bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Selected Asset"}),e.jsx("div",{className:"text-xl font-bold text-emerald-400",children:i}),e.jsx("div",{className:"text-sm text-gray-400",children:f==null?void 0:f.name}),e.jsx("div",{className:"text-lg",children:v(l)}),p&&e.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:["You own: ",p.quantity," shares"]})]}),e.jsxs("div",{className:"flex gap-2 mb-3",role:"group","aria-label":"Order type selection",children:[e.jsx(P,{variant:u==="market"?"primary":"secondary",onClick:()=>x("market"),"aria-pressed":u==="market",className:"flex-1",children:"Market"}),e.jsx(P,{variant:u==="limit"?"primary":"secondary",onClick:()=>x("limit"),"aria-pressed":u==="limit",className:"flex-1",children:"Limit"})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsx(U,{label:"Quantity",type:"number",min:1,max:1e5,value:s,onChange:C,"aria-describedby":"maxSharesHint"}),u==="limit"&&e.jsx(U,{label:"Limit Price",type:"number",step:.01,min:.01,value:n||l.toFixed(2),onChange:I}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Estimated Total:"," ",e.jsx("span",{className:"text-white font-semibold",children:v(h)})]}),e.jsxs("div",{id:"maxSharesHint",className:"text-sm text-gray-400",children:["Max Shares: ",e.jsx("span",{className:"text-white",children:N.toLocaleString()})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(P,{variant:"success",size:"lg",onClick:()=>$("buy"),"aria-label":"Buy selected asset",className:"glow-green",children:"BUY"}),e.jsx(P,{variant:"danger",size:"lg",onClick:()=>$("sell"),"aria-label":"Sell selected asset",className:"glow-red",children:"SELL"})]})]})}function Xe({className:r}){const[s,t]=b.useState({sp500:1.24,nasdaq:1.56,dow:-.32,vix:16.42});b.useEffect(()=>{const i=setInterval(()=>{t({sp500:(Math.random()-.3)*2,nasdaq:(Math.random()-.3)*2.5,dow:(Math.random()-.5)*1.5,vix:15+Math.random()*5})},5e3);return()=>clearInterval(i)},[]);const n=b.useMemo(()=>{const i=new Date,o=i.getDay(),l=i.getHours(),c=o>=1&&o<=5,d=l>=9&&l<16;return c&&d},[]),a=b.useMemo(()=>`${(2+Math.random()*2).toFixed(1)}B`,[]);return e.jsxs(L,{className:r,"aria-labelledby":"market-status-title",children:[e.jsx("h2",{id:"market-status-title",className:"text-lg font-semibold mb-4 text-gray-200",children:"Market Status"}),e.jsxs("dl",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("dt",{className:"text-gray-400",children:"Market Hours"}),e.jsx("dd",{className:w("font-semibold",n?"text-emerald-400":"text-red-400"),children:n?"Open":"Closed"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("dt",{className:"text-gray-400",children:"S&P 500"}),e.jsx("dd",{className:w(s.sp500>=0?"text-emerald-400":"text-red-400"),children:O(s.sp500)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("dt",{className:"text-gray-400",children:"NASDAQ"}),e.jsx("dd",{className:w(s.nasdaq>=0?"text-emerald-400":"text-red-400"),children:O(s.nasdaq)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("dt",{className:"text-gray-400",children:"DOW"}),e.jsx("dd",{className:w(s.dow>=0?"text-emerald-400":"text-red-400"),children:O(s.dow)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("dt",{className:"text-gray-400",children:"VIX"}),e.jsx("dd",{className:"text-yellow-400",children:s.vix.toFixed(2)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("dt",{className:"text-gray-400",children:"Volume"}),e.jsx("dd",{className:"text-gray-200",children:a})]})]})]})}const J=F()(z((r,s)=>({orders:[],addStopLoss:(t,n,a)=>{const i={id:Q(),symbol:t,triggerPrice:n,quantity:a,createdAt:Date.now(),triggered:!1};r(o=>({orders:[...o.orders,i]}))},removeStopLoss:t=>{r(n=>({orders:n.orders.filter(a=>a.id!==t)}))},triggerStopLoss:(t,n)=>{r(a=>({orders:a.orders.map(i=>i.id===t?{...i,triggered:!0,triggeredAt:Date.now(),executedPrice:n}:i)}))},getActiveOrders:()=>s().orders.filter(t=>!t.triggered),getOrdersForSymbol:t=>s().orders.filter(n=>n.symbol===t&&!n.triggered),checkStopLosses:(t,n)=>{const a=s(),i=[];return a.orders.forEach(o=>{if(o.triggered)return;const l=t[o.symbol],c=n[o.symbol];if(!l||!c)return;l.price<=o.triggerPrice&&c.quantity>=o.quantity&&i.push(o)}),i}}),{name:"wall-street-stop-loss",storage:D(()=>localStorage)}));function Ze({content:r,children:s,position:t="top"}){const[n,a]=b.useState(!1),[i,o]=b.useState({top:0,left:0}),l=b.useRef(null),c=b.useRef(null);return b.useEffect(()=>{if(n&&l.current&&c.current){const d=l.current.getBoundingClientRect(),m=c.current.getBoundingClientRect();let u=0,x=0;switch(t){case"top":u=d.top-m.height-8,x=d.left+d.width/2-m.width/2;break;case"bottom":u=d.bottom+8,x=d.left+d.width/2-m.width/2;break;case"left":u=d.top+d.height/2-m.height/2,x=d.left-m.width-8;break;case"right":u=d.top+d.height/2-m.height/2,x=d.right+8;break}x=Math.max(8,Math.min(x,window.innerWidth-m.width-8)),u=Math.max(8,Math.min(u,window.innerHeight-m.height-8)),o({top:u,left:x})}},[n,t]),e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:l,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),onFocus:()=>a(!0),onBlur:()=>a(!1),className:"inline-flex items-center",children:s}),n&&e.jsx("div",{ref:c,className:w("fixed z-50 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg shadow-lg","border border-gray-700 max-w-xs","animate-fade-in"),style:{top:i.top,left:i.left},role:"tooltip",children:r})]})}const et={"Market Order":"An order to buy or sell immediately at the current market price. Execution is guaranteed, but the price is not.","Limit Order":"An order to buy or sell at a specific price or better. The order will only execute if the market reaches your price.","Stop-Loss":"An order to sell a security when it reaches a certain price, designed to limit losses.","P/L":"Profit and Loss - the net gain or loss on your investment.",Position:"The amount of a security that you own (long position) or owe (short position).",Portfolio:"A collection of all your investments and cash holdings.",Volume:"The number of shares or contracts traded during a given period.",Candlestick:"A chart type showing open, high, low, and close prices for a time period.",Bid:"The highest price a buyer is willing to pay for a security.",Ask:"The lowest price a seller is willing to accept for a security.",Spread:"The difference between the bid and ask prices.","Bull Market":"A market condition where prices are rising or expected to rise.","Bear Market":"A market condition where prices are falling or expected to fall.",Volatility:"A measure of how much a security's price fluctuates over time.",Dividend:"A portion of a company's earnings distributed to shareholders."};function tt({term:r,children:s}){const t=et[r];return t?e.jsx(Ze,{content:t,children:e.jsx("span",{className:"border-b border-dotted border-gray-500 cursor-help",children:s||r})}):e.jsx("span",{children:s||r})}function st({className:r}){var y;const[s,t]=b.useState(""),[n,a]=b.useState(""),i=J(h=>h.orders),o=J(h=>h.addStopLoss),l=J(h=>h.removeStopLoss),c=j(h=>h.selectedSymbol),m=((y=j(h=>h.prices)[c])==null?void 0:y.price)??0,x=M(h=>h.positions)[c],g=(x==null?void 0:x.quantity)??0,S=()=>{const h=parseFloat(s),N=parseInt(n);isNaN(h)||h<=0||isNaN(N)||N<=0||N>g||(o(c,h,N),t(""),a(""))},f=i.filter(h=>!h.triggered),p=i.filter(h=>h.triggered).slice(0,5);return e.jsxs(L,{className:r,children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 text-gray-200 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ›¡ï¸"})," ",e.jsx(tt,{term:"Stop-Loss",children:"Stop-Loss Orders"})]}),e.jsxs("div",{className:"mb-4 p-3 bg-gray-700/50 rounded-lg",children:[e.jsxs("div",{className:"text-sm text-gray-400 mb-2",children:["Set stop-loss for"," ",e.jsx("span",{className:"text-emerald-400 font-semibold",children:c}),g>0&&e.jsxs("span",{className:"text-gray-500 ml-2",children:["(You own: ",g," shares)"]})]}),g===0?e.jsxs("p",{className:"text-gray-500 text-sm",children:["You need to own shares of ",c," to set a stop-loss."]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["Current price: ",v(m)]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[e.jsx(U,{type:"number",step:"0.01",min:"0.01",max:m,value:s,onChange:h=>t(h.target.value),placeholder:"Trigger price",label:"Trigger Price"}),e.jsx(U,{type:"number",min:"1",max:g,value:n,onChange:h=>a(h.target.value),placeholder:"Quantity",label:"Quantity"})]}),e.jsx(P,{onClick:S,disabled:!s||!n,className:"w-full",children:"Set Stop-Loss"})]})]}),f.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-400 mb-2",children:"Active Orders"}),e.jsx("div",{className:"space-y-2",children:f.map(h=>e.jsx(re,{order:h,onRemove:l},h.id))})]}),p.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-400 mb-2",children:"Recently Triggered"}),e.jsx("div",{className:"space-y-2 opacity-60",children:p.map(h=>e.jsx(re,{order:h,onRemove:l,triggered:!0},h.id))})]}),i.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-2",children:"No stop-loss orders"})]})}function re({order:r,onRemove:s,triggered:t}){return e.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg ${t?"bg-red-900/30":"bg-gray-700/50"}`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-white",children:r.symbol}),e.jsxs("span",{className:"text-xs text-gray-400",children:[r.quantity," shares"]}),t&&e.jsx("span",{className:"text-xs text-red-400",children:"âœ“ Executed"})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Trigger @ ",e.jsx("span",{className:"text-red-400",children:v(r.triggerPrice)}),r.executedPrice&&e.jsxs("span",{className:"ml-2",children:["â†’ Sold @ ",v(r.executedPrice)]})]})]}),!t&&e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>s(r.id),"aria-label":"Remove stop-loss",children:"âœ•"})]})}class rt extends Error{constructor(s="Rate limit exceeded"){super(s),this.name="RateLimitError"}}class nt extends Error{constructor(t,n){super(t);k(this,"status");this.name="APIError",this.status=n}}class it{constructor(){k(this,"baseUrl");k(this,"apiKey");this.baseUrl=W.baseUrl,this.apiKey=W.apiKey}isAvailable(){return W.hasApiKey}async request(s,t={}){if(!this.isAvailable())throw new Error("Finnhub API key not configured");await Re.acquire();const n=new URL(`${this.baseUrl}${s}`);n.searchParams.set("token",this.apiKey),Object.entries(t).forEach(([i,o])=>{n.searchParams.set(i,o)});const a=await fetch(n.toString());if(a.status===429)throw new rt;if(!a.ok)throw new nt(`API error: ${a.statusText}`,a.status);return a.json()}async getQuote(s){return this.request("/quote",{symbol:s})}async getCandles(s,t,n,a){return this.request("/stock/candle",{symbol:s,resolution:t,from:String(n),to:String(a)})}async getQuotes(s){const t={};for(const n of s)try{t[n]=await this.getQuote(n),await new Promise(a=>setTimeout(a,100))}catch(a){console.warn(`Failed to fetch quote for ${n}:`,a)}return t}}const ne=new it;function at(r){const s=Math.floor(Date.now()/1e3),t=86400;switch(r){case"1D":return{from:s-t,to:s};case"5D":return{from:s-t*5,to:s};case"1M":return{from:s-t*30,to:s};case"3M":return{from:s-t*90,to:s};case"1Y":return{from:s-t*365,to:s};default:return{from:s-t,to:s}}}function ie(r,s){const t=[],n=Date.now(),a=3e5;let i=r*.98;for(let o=s-1;o>=0;o--){const l=i,c=(Math.random()-.48)*(r*.01),d=Math.max(.01,i+c),m=Math.max(l,d)*(1+Math.random()*.005),u=Math.min(l,d)*(1-Math.random()*.005),x=Math.floor(Math.random()*1e6)+1e5;t.push({time:Math.floor((n-o*a)/1e3),open:l,high:m,low:u,close:d,volume:x}),i=d}return t}function ue(r,s,t){return ge({queryKey:["candles",r,s],queryFn:async()=>{if(!ne.isAvailable())return ie(t??100,50);const n=Ee[s],{from:a,to:i}=at(s),o=await ne.getCandles(r,n,a,i);return o.s==="no_data"||!o.t||o.t.length===0?ie(t??100,50):o.t.map((l,c)=>({time:l,open:o.o[c],high:o.h[c],low:o.l[c],close:o.c[c],volume:o.v[c]}))},staleTime:6e4,refetchInterval:6e4,retry:1})}function ot(){var d;const r=b.useRef(null),s=b.useRef(null),t=b.useRef(null),n=j(m=>m.selectedSymbol),a=j(m=>m.prices),i=A(m=>m.timeframe),o=((d=a[n])==null?void 0:d.price)??100,{data:l,isLoading:c}=ue(n,i,o);return b.useEffect(()=>{if(!r.current)return;const m=le(r.current,{width:r.current.clientWidth,height:300,layout:{background:{color:"transparent"},textColor:"#9ca3af"},grid:{vertLines:{color:"rgba(75, 85, 99, 0.3)"},horzLines:{color:"rgba(75, 85, 99, 0.3)"}},timeScale:{borderColor:"#4b5563",timeVisible:!0,secondsVisible:!1},rightPriceScale:{borderColor:"#4b5563"},crosshair:{vertLine:{color:"#6b7280",labelBackgroundColor:"#374151"},horzLine:{color:"#6b7280",labelBackgroundColor:"#374151"}}}),u=m.addCandlestickSeries({upColor:"#10b981",downColor:"#ef4444",borderUpColor:"#10b981",borderDownColor:"#ef4444",wickUpColor:"#10b981",wickDownColor:"#ef4444"});s.current=m,t.current=u;const x=()=>{r.current&&m.applyOptions({width:r.current.clientWidth})},g=new ResizeObserver(x);return g.observe(r.current),()=>{g.disconnect(),m.remove()}},[]),b.useEffect(()=>{var u;if(!t.current||!l)return;const m=l.map(x=>({time:x.time,open:x.open,high:x.high,low:x.low,close:x.close}));t.current.setData(m),(u=s.current)==null||u.timeScale().fitContent()},[l]),e.jsxs("div",{className:"relative",children:[c&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-800/50 z-10",children:e.jsx("div",{className:"animate-pulse text-gray-400",children:"Loading chart..."})}),e.jsx("div",{ref:r,className:"w-full",role:"img","aria-label":`Candlestick price chart for ${n}`})]})}function lt(){var c;const r=b.useRef(null),s=b.useRef(null),t=b.useRef(null),n=j(d=>d.selectedSymbol),a=j(d=>d.prices),i=A(d=>d.timeframe),o=((c=a[n])==null?void 0:c.price)??100,{data:l}=ue(n,i,o);return b.useEffect(()=>{if(!r.current)return;const d=le(r.current,{width:r.current.clientWidth,height:80,layout:{background:{color:"transparent"},textColor:"#9ca3af"},grid:{vertLines:{visible:!1},horzLines:{visible:!1}},timeScale:{visible:!1},rightPriceScale:{visible:!1},leftPriceScale:{visible:!1},crosshair:{vertLine:{visible:!1},horzLine:{visible:!1}}}),m=d.addHistogramSeries({color:"rgba(107, 114, 128, 0.5)",priceFormat:{type:"volume"},priceScaleId:""});s.current=d,t.current=m;const u=()=>{r.current&&d.applyOptions({width:r.current.clientWidth})},x=new ResizeObserver(u);return x.observe(r.current),()=>{x.disconnect(),d.remove()}},[]),b.useEffect(()=>{if(!t.current||!l)return;const d=l.map(m=>({time:m.time,value:m.volume??0,color:m.close>=m.open?"rgba(16, 185, 129, 0.5)":"rgba(239, 68, 68, 0.5)"}));t.current.setData(d)},[l]),e.jsx("div",{ref:r,className:"w-full mt-2",role:"img","aria-label":`Volume chart for ${n}`})}function ct(){const r=A(t=>t.timeframe),s=A(t=>t.setTimeframe);return e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",role:"group","aria-label":"Chart timeframe",children:Me.map(t=>e.jsx(P,{variant:r===t?"primary":"secondary",size:"sm",onClick:()=>s(t),children:t},t))})}function dt(){var i;const r=j(o=>o.selectedSymbol),t=((i=j(o=>o.prices)[r])==null?void 0:i.price)??100,{bids:n,asks:a}=b.useMemo(()=>{const o=[],l=[];for(let c=0;c<8;c++){const d=t-(c+1)*.05,m=Math.floor(Math.random()*500)+100;o.push({price:d,size:m});const u=t+(c+1)*.05,x=Math.floor(Math.random()*500)+100;l.push({price:u,size:x})}return{bids:o,asks:l}},[t]);return e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-red-400 font-semibold mb-2",children:"Bids (Buy Orders)"}),e.jsx("div",{className:"space-y-1 text-sm",role:"list","aria-label":"Buy orders",children:n.map((o,l)=>e.jsxs("div",{className:"flex justify-between text-red-400",role:"listitem",children:[e.jsx("span",{children:v(o.price)}),e.jsx("span",{children:o.size})]},l))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-emerald-400 font-semibold mb-2",children:"Asks (Sell Orders)"}),e.jsx("div",{className:"space-y-1 text-sm",role:"list","aria-label":"Sell orders",children:a.map((o,l)=>e.jsxs("div",{className:"flex justify-between text-emerald-400",role:"listitem",children:[e.jsx("span",{children:v(o.price)}),e.jsx("span",{children:o.size})]},l))})]})]})}const mt=[{title:"Tech Stocks Rally on AI Optimism",description:"Major technology companies see gains as investors remain bullish on artificial intelligence developments.",time:"2 hours ago",positive:!0},{title:"Fed Signals Potential Rate Changes",description:"Federal Reserve officials hint at possible adjustments to monetary policy in upcoming meetings.",time:"4 hours ago",positive:!1},{title:"Energy Sector Shows Strong Performance",description:"Oil prices stabilize as global demand outlook improves, boosting energy stocks.",time:"6 hours ago",positive:!0},{title:"Semiconductor Demand Continues Growth",description:"Chip manufacturers report strong orders as data center and AI infrastructure investments accelerate.",time:"8 hours ago",positive:!0}];function ut(){return e.jsx("div",{className:"space-y-3",children:mt.map((r,s)=>e.jsxs("article",{className:"p-3 bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:`font-semibold ${r.positive?"text-emerald-400":"text-red-400"}`,children:r.title}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:r.description}),e.jsx("time",{className:"text-xs text-gray-500 mt-2 block",children:r.time})]},s))})}const ht=[{value:"chart",label:"Price Chart"},{value:"orderbook",label:"Order Book"},{value:"news",label:"Market News"}];function xt({className:r}){const s=A(n=>n.chartTab),t=A(n=>n.setChartTab);return e.jsxs(L,{className:r,"aria-labelledby":"charts-title",children:[e.jsx("h2",{id:"charts-title",className:"sr-only",children:"Charts and Analysis"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",role:"tablist","aria-label":"Chart view options",children:ht.map(n=>e.jsx(P,{variant:"secondary",size:"sm",onClick:()=>t(n.value),role:"tab","aria-selected":s===n.value,"aria-controls":`${n.value}Content`,className:w(s===n.value&&"tab-active"),children:n.label},n.value))}),e.jsxs("div",{id:"chartContent",role:"tabpanel","aria-labelledby":"chartTabBtn",className:w(s!=="chart"&&"hidden"),children:[e.jsx(ct,{}),e.jsx(ot,{}),e.jsx(lt,{})]}),e.jsx("div",{id:"orderbookContent",role:"tabpanel","aria-labelledby":"orderbookTabBtn",className:w(s!=="orderbook"&&"hidden"),children:e.jsx(dt,{})}),e.jsx("div",{id:"newsContent",role:"tabpanel","aria-labelledby":"newsTabBtn",className:w(s!=="news"&&"hidden"),children:e.jsx(ut,{})})]})}function pt({className:r}){const s=M(c=>c.positions),t=M(c=>c.cashBalance),n=j(c=>c.prices),{totalValue:a,totalPL:i,totalPLPercent:o,positionsList:l}=b.useMemo(()=>{let c=0;const d=[];Object.entries(s).forEach(([g,S])=>{var C;const f=((C=n[g])==null?void 0:C.price)??S.avgPrice,p=S.quantity*f,y=S.quantity*S.avgPrice,h=p-y,N=y>0?h/y*100:0;c+=p,d.push({symbol:g,quantity:S.quantity,avgPrice:S.avgPrice,currentValue:p,pl:h,plPercent:N})});const m=t+c,u=m-R,x=u/R*100;return{totalValue:m,totalPL:u,totalPLPercent:x,positionsList:d}},[s,t,n]);return e.jsxs(L,{className:r,"aria-labelledby":"portfolio-title",children:[e.jsx("h2",{id:"portfolio-title",className:"text-lg font-semibold mb-4 text-gray-200",children:"Portfolio"}),e.jsxs("div",{className:"mb-4 p-3 bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Total Value"}),e.jsx("span",{className:w("font-bold",i>=0?"text-emerald-400":"text-red-400"),children:v(a)})]}),e.jsxs("div",{className:"flex justify-between mt-2",children:[e.jsx("span",{className:"text-gray-400",children:"Total P/L"}),e.jsxs("span",{className:w(i>=0?"text-emerald-400":"text-red-400"),children:[v(i)," (",O(o),")"]})]})]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",role:"list","aria-label":"Current positions",children:l.length===0?e.jsx("div",{className:"text-center text-gray-500 py-4",children:"No positions yet"}):l.map(c=>e.jsxs("div",{className:"p-3 bg-gray-700 rounded-lg",role:"listitem",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-white",children:c.symbol}),e.jsxs("span",{className:"text-gray-400 text-sm ml-2",children:[c.quantity," shares"]})]}),e.jsx("span",{className:"text-white font-bold",children:v(c.currentValue)})]}),e.jsxs("div",{className:"flex justify-between items-center mt-1 text-sm",children:[e.jsxs("span",{className:"text-gray-400",children:["Avg: ",v(c.avgPrice)]}),e.jsxs("span",{className:w("flex items-center gap-1",c.pl>=0?"text-emerald-400":"text-red-400"),children:[e.jsx("span",{"aria-hidden":"true",children:c.pl>=0?"â–²":"â–¼"}),v(Math.abs(c.pl))," (",O(c.plPercent),")"]})]})]},c.symbol))})]})}function gt(r){if(r.length===0){alert("No trades to export");return}const s=["Date","Time","Type","Symbol","Quantity","Price","Total","ID"],t=r.map(l=>{const c=new Date(l.timestamp);return[c.toLocaleDateString(),c.toLocaleTimeString(),l.type.toUpperCase(),l.symbol,l.quantity.toString(),v(l.price),v(l.total),l.id]}),n=[s.join(","),...t.map(l=>l.map(c=>`"${c}"`).join(","))].join(`
`),a=new Blob([n],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),o=URL.createObjectURL(a);i.setAttribute("href",o),i.setAttribute("download",`trade_history_${new Date().toISOString().split("T")[0]}.csv`),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(o)}function ft({className:r}){const s=M(n=>n.tradeHistory),t=()=>{gt(s)};return e.jsxs(L,{className:r,"aria-labelledby":"history-title",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{id:"history-title",className:"text-lg font-semibold text-gray-200",children:"Trade History"}),s.length>0&&e.jsx(P,{variant:"ghost",size:"sm",onClick:t,"aria-label":"Export trade history to CSV",title:"Export to CSV",children:"ðŸ“¥ Export"})]}),e.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",role:"list","aria-label":"Trade history",children:s.length===0?e.jsx("div",{className:"text-center text-gray-500 py-4",children:"No trades yet"}):s.slice(0,20).map(n=>e.jsxs("div",{className:"p-2 bg-gray-700 rounded text-sm",role:"listitem",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:w("font-semibold",n.type==="buy"?"text-emerald-400":"text-red-400"),children:n.type.toUpperCase()}),e.jsx("span",{className:"text-gray-400 text-xs",children:Fe(n.timestamp)})]}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsxs("span",{className:"text-white",children:[n.symbol," x",n.quantity]}),e.jsxs("span",{className:"text-gray-300",children:["@ ",v(n.price)]})]}),e.jsxs("div",{className:"text-right text-gray-400 text-xs mt-1",children:["Total: ",v(n.total)]})]},n.id))})]})}function yt({className:r}){const s=M(o=>o.positions),t=M(o=>o.cashBalance),n=M(o=>o.tradeHistory),a=j(o=>o.prices),i=b.useMemo(()=>{let o=t,l=0;Object.entries(s).forEach(([y,h])=>{var I;const N=((I=a[y])==null?void 0:I.price)??h.avgPrice,C=h.quantity*N;o+=C,l+=h.quantity*(N-h.avgPrice)});const c=o-R,d=c/R*100,m=n.filter(y=>y.type==="buy"),u=n.filter(y=>y.type==="sell"),x=n.length>0?n.reduce((y,h)=>y+h.total,0)/n.length:0,g=u.reduce((y,h)=>{var C;const N=((C=s[h.symbol])==null?void 0:C.avgPrice)??h.price;return y+h.quantity*(h.price-N)},0),S=[];Object.entries(s).forEach(([y,h])=>{var $,V;const N=h.quantity*((($=a[y])==null?void 0:$.price)??h.avgPrice),C=((V=H[y])==null?void 0:V.type)??"stocks",I={stocks:"#3b82f6",commodities:"#f59e0b",bonds:"#a855f7"};S.push({symbol:y,value:N,percent:N/o*100,color:I[C]})}),S.push({symbol:"Cash",value:t,percent:t/o*100,color:"#6b7280"}),S.sort((y,h)=>h.value-y.value);const f=u.filter(y=>{var N;const h=((N=s[y.symbol])==null?void 0:N.avgPrice)??y.price;return y.price>h}),p=u.length>0?f.length/u.length*100:0;return{portfolioValue:o,totalPL:c,totalPLPercent:d,unrealizedPL:l,realizedPL:g,totalTrades:n.length,buyTrades:m.length,sellTrades:u.length,avgTradeSize:x,allocations:S,winRate:p}},[s,t,a,n]);return e.jsxs(L,{className:r,children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-200",children:"Portfolio Analytics"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(Y,{label:"Portfolio Value",value:v(i.portfolioValue),trend:i.totalPL>=0?"up":"down"}),e.jsx(Y,{label:"Total P/L",value:`${v(i.totalPL)} (${O(i.totalPLPercent)})`,trend:i.totalPL>=0?"up":"down"}),e.jsx(Y,{label:"Unrealized P/L",value:v(i.unrealizedPL),trend:i.unrealizedPL>=0?"up":"down"}),e.jsx(Y,{label:"Total Trades",value:i.totalTrades.toString(),subtitle:`${i.buyTrades} buys, ${i.sellTrades} sells`})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-3",children:"Portfolio Allocation"}),i.allocations.length===0?e.jsx("p",{className:"text-gray-500 text-sm",children:"No positions yet"}):e.jsxs("div",{className:"space-y-2",children:[i.allocations.slice(0,5).map(o=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:o.color}}),e.jsx("span",{className:"text-sm text-white flex-1",children:o.symbol}),e.jsx("span",{className:"text-sm text-gray-400",children:O(o.percent)}),e.jsx("span",{className:"text-sm text-gray-300",children:v(o.value)})]},o.symbol)),e.jsx("div",{className:"h-4 rounded-full overflow-hidden flex mt-3",children:i.allocations.map(o=>e.jsx("div",{style:{width:`${o.percent}%`,backgroundColor:o.color},title:`${o.symbol}: ${o.percent.toFixed(1)}%`},o.symbol))})]})]}),e.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-3",children:"Trading Statistics"}),e.jsxs("dl",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-gray-400",children:"Win Rate"}),e.jsxs("dd",{className:w(i.winRate>=50?"text-emerald-400":"text-red-400"),children:[Ie(i.winRate,1),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-gray-400",children:"Avg Trade Size"}),e.jsx("dd",{className:"text-white",children:v(i.avgTradeSize)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-gray-400",children:"Total Volume"}),e.jsx("dd",{className:"text-white",children:v(n.reduce((o,l)=>o+l.total,0))})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-gray-400",children:"Cash Available"}),e.jsx("dd",{className:"text-emerald-400",children:v(t)})]})]})]})]})]})}function Y({label:r,value:s,trend:t,subtitle:n}){return e.jsxs("div",{className:"p-3 bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:r}),e.jsx("div",{className:w("text-lg font-bold",t==="up"&&"text-emerald-400",t==="down"&&"text-red-400",!t&&"text-white"),children:s}),n&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:n})]})}function bt({className:r}){const s=K(i=>i.watchlist),t=K(i=>i.removeFromWatchlist),n=j(i=>i.prices),a=j(i=>i.selectSymbol);return s.length===0?e.jsxs(L,{className:r,children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 text-gray-200 flex items-center gap-2",children:[e.jsx("span",{children:"â­"})," Watchlist"]}),e.jsx("p",{className:"text-center text-gray-500 py-4",children:"No items in watchlist. Click the star on any asset to add it."})]}):e.jsxs(L,{className:r,children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 text-gray-200 flex items-center gap-2",children:[e.jsx("span",{children:"â­"})," Watchlist (",s.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:s.map(i=>{const o=H[i],l=n[i],c=(l==null?void 0:l.price)??0,d=(l==null?void 0:l.change)??0,m=(l==null?void 0:l.changePercent)??0,u=d>=0;return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-700/50 rounded-lg hover:bg-gray-700 transition-colors cursor-pointer",onClick:()=>a(i),children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-white",children:i}),e.jsx("div",{className:"text-xs text-gray-400",children:o==null?void 0:o.name})]}),e.jsxs("div",{className:"text-right mr-2",children:[e.jsx("div",{className:"font-semibold text-white",children:v(c)}),e.jsxs("div",{className:w("text-xs",u?"text-emerald-400":"text-red-400"),children:[u?"â–²":"â–¼"," ",O(m)]})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:x=>{x.stopPropagation(),t(i)},"aria-label":`Remove ${i} from watchlist`,children:"âœ•"})]},i)})})]})}const q=F()(z((r,s)=>({alerts:[],addAlert:(t,n,a)=>{const i={id:Q(),symbol:t,targetPrice:n,condition:a,triggered:!1,createdAt:Date.now()};r(o=>({alerts:[...o.alerts,i]}))},removeAlert:t=>{r(n=>({alerts:n.alerts.filter(a=>a.id!==t)}))},triggerAlert:t=>{r(n=>({alerts:n.alerts.map(a=>a.id===t?{...a,triggered:!0,triggeredAt:Date.now()}:a)}))},clearTriggeredAlerts:()=>{r(t=>({alerts:t.alerts.filter(n=>!n.triggered)}))},getActiveAlerts:()=>s().alerts.filter(t=>!t.triggered),checkAlerts:t=>{const n=s(),a=[];return n.alerts.forEach(i=>{if(i.triggered)return;const o=t[i.symbol];if(!o)return;const l=o.price;(i.condition==="above"&&l>=i.targetPrice||i.condition==="below"&&l<=i.targetPrice)&&(a.push(i),s().triggerAlert(i.id))}),a}}),{name:"wall-street-alerts",storage:D(()=>localStorage)}));function vt({className:r}){var f;const[s,t]=b.useState(""),[n,a]=b.useState("above"),i=q(p=>p.alerts),o=q(p=>p.addAlert),l=q(p=>p.removeAlert),c=q(p=>p.clearTriggeredAlerts),d=j(p=>p.selectedSymbol),u=((f=j(p=>p.prices)[d])==null?void 0:f.price)??0,x=()=>{const p=parseFloat(s);isNaN(p)||p<=0||(o(d,p,n),t(""))},g=i.filter(p=>!p.triggered),S=i.filter(p=>p.triggered);return e.jsxs(L,{className:r,children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 text-gray-200 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ””"})," Price Alerts"]}),e.jsxs("div",{className:"mb-4 p-3 bg-gray-700/50 rounded-lg",children:[e.jsxs("div",{className:"text-sm text-gray-400 mb-2",children:["Create alert for ",e.jsx("span",{className:"text-emerald-400 font-semibold",children:d}),e.jsxs("span",{className:"text-gray-500 ml-2",children:["(Current: ",v(u),")"]})]}),e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsx("div",{className:"flex-1",children:e.jsx(U,{type:"number",step:"0.01",min:"0.01",value:s,onChange:p=>t(p.target.value),placeholder:"Target price"})}),e.jsxs("select",{value:n,onChange:p=>a(p.target.value),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-emerald-500 focus:outline-none",children:[e.jsx("option",{value:"above",children:"Above"}),e.jsx("option",{value:"below",children:"Below"})]}),e.jsx(P,{onClick:x,disabled:!s,children:"Add"})]})]}),g.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-400 mb-2",children:"Active Alerts"}),e.jsx("div",{className:"space-y-2",children:g.map(p=>e.jsx(ae,{alert:p,onRemove:l},p.id))})]}),S.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-400",children:"Triggered"}),e.jsx(P,{variant:"ghost",size:"sm",onClick:c,children:"Clear"})]}),e.jsx("div",{className:"space-y-2 opacity-60",children:S.slice(0,5).map(p=>e.jsx(ae,{alert:p,onRemove:l,triggered:!0},p.id))})]}),i.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-2",children:"No alerts set"})]})}function ae({alert:r,onRemove:s,triggered:t}){const n=H[r.symbol];return e.jsxs("div",{className:w("flex items-center justify-between p-2 rounded-lg",t?"bg-emerald-900/30":"bg-gray-700/50"),children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-white",children:r.symbol}),e.jsx("span",{className:"text-xs text-gray-400",children:n==null?void 0:n.name}),t&&e.jsx("span",{className:"text-xs text-emerald-400",children:"âœ“ Triggered"})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[r.condition==="above"?"â†‘ Above":"â†“ Below"," ",e.jsx("span",{className:"text-white",children:v(r.targetPrice)})]})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>s(r.id),"aria-label":"Remove alert",children:"âœ•"})]})}const jt={success:"bg-emerald-600",error:"bg-red-600",info:"bg-blue-600"};function wt(){const r=A(t=>t.toasts),s=A(t=>t.dismissToast);return r.length===0?null:e.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:r.map(t=>e.jsx("div",{role:"alert","aria-live":"polite",className:w("px-6 py-3 rounded-lg shadow-lg text-white animate-fade-in",jt[t.type]),onClick:()=>s(t.id),children:t.message},t.id))})}function Nt(){return e.jsx("div",{id:"sr-announce",className:"sr-only","aria-live":"polite","aria-atomic":"true"})}class St{constructor(){k(this,"audioContext",null);k(this,"enabled",!0)}getContext(){return this.audioContext||(this.audioContext=new AudioContext),this.audioContext}setEnabled(s){this.enabled=s}playTone(s,t,n="sine",a=.1){if(this.enabled)try{const i=this.getContext(),o=i.createOscillator(),l=i.createGain();o.connect(l),l.connect(i.destination),o.type=n,o.frequency.setValueAtTime(s,i.currentTime),l.gain.setValueAtTime(0,i.currentTime),l.gain.linearRampToValueAtTime(a,i.currentTime+.01),l.gain.exponentialRampToValueAtTime(.001,i.currentTime+t),o.start(i.currentTime),o.stop(i.currentTime+t)}catch{}}playBuy(){this.playTone(440,.1,"sine",.08),setTimeout(()=>this.playTone(554,.1,"sine",.08),50),setTimeout(()=>this.playTone(659,.15,"sine",.08),100)}playSell(){this.playTone(659,.1,"sine",.08),setTimeout(()=>this.playTone(554,.1,"sine",.08),50),setTimeout(()=>this.playTone(440,.15,"sine",.08),100)}playError(){this.playTone(200,.15,"square",.05),setTimeout(()=>this.playTone(180,.2,"square",.05),100)}playAlert(){this.playTone(880,.1,"sine",.1),setTimeout(()=>this.playTone(880,.1,"sine",.1),150),setTimeout(()=>this.playTone(1100,.2,"sine",.1),300)}playClick(){this.playTone(600,.05,"sine",.03)}playNotification(){this.playTone(523,.1,"sine",.08),setTimeout(()=>this.playTone(659,.15,"sine",.08),100)}}const oe=new St,Tt=new fe({defaultOptions:{queries:{staleTime:5e3,retry:2,refetchOnWindowFocus:!1}}});function Pt(){Be();const r=j(o=>o.prices),s=A(o=>o.showToast),t=E(o=>o.soundEnabled),n=E(o=>o.hasCompletedTutorial),a=E(o=>o.setShowTutorial),i=b.useRef(!1);return b.useEffect(()=>{oe.setEnabled(t)},[t]),b.useEffect(()=>{q.getState().alerts.filter(c=>!c.triggered).forEach(c=>{const d=r[c.symbol];if(!d)return;const m=d.price;(c.condition==="above"&&m>=c.targetPrice||c.condition==="below"&&m<=c.targetPrice)&&(q.getState().triggerAlert(c.id),s(`ðŸ”” Alert: ${c.symbol} reached ${c.condition==="above"?"above":"below"} $${c.targetPrice.toFixed(2)}`,"info"),t&&oe.playAlert())})},[r,s,t]),b.useEffect(()=>{!n&&!i.current&&(i.current=!0,a(!0))},[n,a]),e.jsxs("div",{className:"min-h-screen text-gray-100 p-2 sm:p-4 transition-colors",children:[e.jsx("a",{href:"#main-content",className:"skip-link",children:"Skip to main content"}),e.jsxs("div",{className:"max-w-7xl mx-auto",role:"application","aria-label":"Wall Street Trading Simulator",children:[e.jsx(We,{}),e.jsx(ze,{}),e.jsxs("main",{id:"main-content",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-3 sm:gap-4 mb-4",children:[e.jsx(Ge,{className:"col-span-12 lg:col-span-5"}),e.jsx(Je,{className:"col-span-12 lg:col-span-4"}),e.jsxs("div",{className:"col-span-12 lg:col-span-3 space-y-4",children:[e.jsx(Xe,{}),e.jsx(bt,{})]})]}),e.jsxs("div",{className:"grid grid-cols-12 gap-3 sm:gap-4 mb-4",children:[e.jsx(xt,{className:"col-span-12 lg:col-span-6"}),e.jsx(pt,{className:"col-span-12 lg:col-span-3"}),e.jsx(ft,{className:"col-span-12 lg:col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-12 gap-3 sm:gap-4 mb-4",children:[e.jsx(vt,{className:"col-span-12 lg:col-span-6"}),e.jsx(st,{className:"col-span-12 lg:col-span-6"})]}),e.jsx(yt,{className:"mb-4"})]}),e.jsx(He,{})]}),e.jsx(wt,{}),e.jsx(Nt,{}),e.jsx(ke,{})]})}function kt(){return e.jsx(ye,{client:Tt,children:e.jsx(Pt,{})})}const he=document.getElementById("root");if(!he)throw new Error("Root element not found");je.createRoot(he).render(e.jsx(b.StrictMode,{children:e.jsx(kt,{})}));
//# sourceMappingURL=index-CBzjqTWa.js.map
